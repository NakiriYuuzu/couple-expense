import{b as e,c as t,d as n,e as r,f as i}from"./SelectValue-BoBfgLwg.js";import{b as a}from"./trending-up-AORfcXSH.js";import{v as o}from"./PopperContent-BnGMTRB6.js";import{b as s}from"./Card-B_5NY5d-.js";import{b as c}from"./TopBar-Cegs0OHU.js";import{b as l,c as u,d,e as f,f as p}from"./DialogTitle-VRbnv-C7.js";import{b as m,c as h,d as g,e as _}from"./TabsTrigger-3bTBGpIf.js";import{A as v,B as y,C as b,D as x,E as S,F as C,G as w,H as T,J as E,R as ee,S as te,aA as ne,aB as re,aC as D,aE as O,aF as k,aG as A,aH as ie,aJ as j,aK as ae,aN as oe,aP as se,aQ as ce,aR as M,aS as le,aT as ue,aU as de,aV as fe,aX as pe,aY as me,a_ as N,aa as he,ac as ge,af as _e,ag as ve,ai as ye,al as be,am as xe,an as Se,as as Ce,aw as we,ay as P,az as F,b4 as Te,b5 as I,b8 as Ee,b9 as De,bb as L,bc as Oe,bd as ke,bf as Ae,bg as R,bh as je,bi as Me,bj as Ne,c as Pe,i as Fe,k as Ie,m as Le,n as Re,u as ze,x as Be,y as Ve,z as He}from"./index-Dkwm6DWF.js";import{b as Ue}from"./CardContent-BWSex-LG.js";import{b as We,c as Ge}from"./usePullToRefresh-Bx0xemPJ.js";var Ke=!1;function qe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Je(e){var t=document.createElement(`style`);return t.setAttribute(`data-emotion`,e.key),e.nonce!==void 0&&t.setAttribute(`nonce`,e.nonce),t.appendChild(document.createTextNode(``)),t.setAttribute(`data-s`,``),t}var Ye=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=t.tags.length===0?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=e.speedy===void 0?!Ke:e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(Je(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=qe(t);try{n.insertRule(e,n.cssRules.length)}catch{}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach(function(e){var t;return(t=e.parentNode)?.removeChild(e)}),this.tags=[],this.ctr=0},e}(),Xe=`-ms-`,Ze=`-moz-`,z=`-webkit-`,Qe=`comm`,$e=`rule`,et=`decl`,tt=`@import`,nt=`@keyframes`,rt=`@layer`,it=Math.abs,at=String.fromCharCode,ot=Object.assign;function st(e,t){return V(e,0)^45?(((t<<2^V(e,0))<<2^V(e,1))<<2^V(e,2))<<2^V(e,3):0}function ct(e){return e.trim()}function lt(e,t){return(e=t.exec(e))?e[0]:e}function B(e,t,n){return e.replace(t,n)}function ut(e,t){return e.indexOf(t)}function V(e,t){return e.charCodeAt(t)|0}function dt(e,t,n){return e.slice(t,n)}function ft(e){return e.length}function pt(e){return e.length}function mt(e,t){return t.push(e),e}function ht(e,t){return e.map(t).join(``)}var gt=1,_t=1,vt=0,yt=0,H=0,bt=``;function xt(e,t,n,r,i,a,o){return{value:e,root:t,parent:n,type:r,props:i,children:a,line:gt,column:_t,length:o,return:``}}function St(e,t){return ot(xt(``,null,null,``,null,null,0),e,{length:-e.length},t)}function Ct(){return H}function wt(){return H=yt>0?V(bt,--yt):0,_t--,H===10&&(_t=1,gt--),H}function Tt(){return H=yt<vt?V(bt,yt++):0,_t++,H===10&&(_t=1,gt++),H}function Et(){return V(bt,yt)}function Dt(){return yt}function Ot(e,t){return dt(bt,e,t)}function kt(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function At(e){return gt=_t=1,vt=ft(bt=e),yt=0,[]}function jt(e){return bt=``,e}function Mt(e){return ct(Ot(yt-1,Ft(e===91?e+2:e===40?e+1:e)))}function Nt(e){for(;(H=Et())&&H<33;)Tt();return kt(e)>2||kt(H)>3?``:` `}function Pt(e,t){for(;--t&&Tt()&&!(H<48||H>102||H>57&&H<65||H>70&&H<97););return Ot(e,Dt()+(t<6&&Et()==32&&Tt()==32))}function Ft(e){for(;Tt();)switch(H){case e:return yt;case 34:case 39:e!==34&&e!==39&&Ft(H);break;case 40:e===41&&Ft(e);break;case 92:Tt();break}return yt}function It(e,t){for(;Tt()&&e+H!==57&&!(e+H===84&&Et()===47););return`/*`+Ot(t,yt-1)+`*`+at(e===47?e:Tt())}function Lt(e){for(;!kt(Et());)Tt();return Ot(e,yt)}function Rt(e){return jt(zt(``,null,null,null,[``],e=At(e),0,[0],e))}function zt(e,t,n,r,i,a,o,s,c){for(var l=0,u=0,d=o,f=0,p=0,m=0,h=1,g=1,_=1,v=0,y=``,b=i,x=a,S=r,C=y;g;)switch(m=v,v=Tt()){case 40:if(m!=108&&V(C,d-1)==58){ut(C+=B(Mt(v),`&`,`&\f`),`&\f`)!=-1&&(_=-1);break}case 34:case 39:case 91:C+=Mt(v);break;case 9:case 10:case 13:case 32:C+=Nt(m);break;case 92:C+=Pt(Dt()-1,7);continue;case 47:switch(Et()){case 42:case 47:mt(Vt(It(Tt(),Dt()),t,n),c);break;default:C+=`/`}break;case 123*h:s[l++]=ft(C)*_;case 125*h:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+u:_==-1&&(C=B(C,/\f/g,``)),p>0&&ft(C)-d&&mt(p>32?Ht(C+`;`,r,n,d-1):Ht(B(C,` `,``)+`;`,r,n,d-2),c);break;case 59:C+=`;`;default:if(mt(S=Bt(C,t,n,l,u,i,s,y,b=[],x=[],d),a),v===123)if(u===0)zt(C,t,S,S,b,a,d,s,x);else switch(f===99&&V(C,3)===110?100:f){case 100:case 108:case 109:case 115:zt(e,S,S,r&&mt(Bt(e,S,S,0,0,i,s,y,i,b=[],d),x),i,x,d,s,r?b:x);break;default:zt(C,S,S,S,[``],x,0,s,x)}}l=u=p=0,h=_=1,y=C=``,d=o;break;case 58:d=1+ft(C),p=m;default:if(h<1){if(v==123)--h;else if(v==125&&h++==0&&wt()==125)continue}switch(C+=at(v),v*h){case 38:_=u>0?1:(C+=`\f`,-1);break;case 44:s[l++]=(ft(C)-1)*_,_=1;break;case 64:Et()===45&&(C+=Mt(Tt())),f=Et(),u=d=ft(y=C+=Lt(Dt())),v++;break;case 45:m===45&&ft(C)==2&&(h=0)}}return a}function Bt(e,t,n,r,i,a,o,s,c,l,u){for(var d=i-1,f=i===0?a:[``],p=pt(f),m=0,h=0,g=0;m<r;++m)for(var _=0,v=dt(e,d+1,d=it(h=o[m])),y=e;_<p;++_)(y=ct(h>0?f[_]+` `+v:B(v,/&\f/g,f[_])))&&(c[g++]=y);return xt(e,t,n,i===0?$e:s,c,l,u)}function Vt(e,t,n){return xt(e,t,n,Qe,at(Ct()),dt(e,2,-2),0)}function Ht(e,t,n,r){return xt(e,t,n,et,dt(e,0,r),dt(e,r+1,-1),r)}function Ut(e,t){for(var n=``,r=pt(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||``;return n}function Wt(e,t,n,r){switch(e.type){case rt:if(e.children.length)break;case tt:case et:return e.return=e.return||e.value;case Qe:return``;case nt:return e.return=e.value+`{`+Ut(e.children,r)+`}`;case $e:e.value=e.props.join(`,`)}return ft(n=Ut(e.children,r))?e.return=e.value+`{`+n+`}`:``}function Gt(e){var t=pt(e);return function(n,r,i,a){for(var o=``,s=0;s<t;s++)o+=e[s](n,r,i,a)||``;return o}}function Kt(e){return function(t){t.root||(t=t.return)&&e(t)}}function qt(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var Jt=function(e,t,n){for(var r=0,i=0;r=i,i=Et(),r===38&&i===12&&(t[n]=1),!kt(i);)Tt();return Ot(e,yt)},Yt=function(e,t){var n=-1,r=44;do switch(kt(r)){case 0:r===38&&Et()===12&&(t[n]=1),e[n]+=Jt(yt-1,t,n);break;case 2:e[n]+=Mt(r);break;case 4:if(r===44){e[++n]=Et()===58?`&\f`:``,t[n]=e[n].length;break}default:e[n]+=at(r)}while(r=Tt());return e},Xt=function(e,t){return jt(Yt(At(e),t))},Zt=new WeakMap,Qt=function(e){if(!(e.type!==`rule`||!e.parent||e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;n.type!==`rule`;)if(n=n.parent,!n)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!Zt.get(n))&&!r){Zt.set(e,!0);for(var i=[],a=Xt(t,i),o=n.props,s=0,c=0;s<a.length;s++)for(var l=0;l<o.length;l++,c++)e.props[c]=i[s]?a[s].replace(/&\f/g,o[l]):o[l]+` `+a[s]}}},$t=function(e){if(e.type===`decl`){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return=``,e.value=``)}};function en(e,t){switch(st(e,t)){case 5103:return z+`print-`+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return z+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return z+e+Ze+e+Xe+e+e;case 6828:case 4268:return z+e+Xe+e+e;case 6165:return z+e+Xe+`flex-`+e+e;case 5187:return z+e+B(e,/(\w+).+(:[^]+)/,z+`box-$1$2`+Xe+`flex-$1$2`)+e;case 5443:return z+e+Xe+`flex-item-`+B(e,/flex-|-self/,``)+e;case 4675:return z+e+Xe+`flex-line-pack`+B(e,/align-content|flex-|-self/,``)+e;case 5548:return z+e+Xe+B(e,`shrink`,`negative`)+e;case 5292:return z+e+Xe+B(e,`basis`,`preferred-size`)+e;case 6060:return z+`box-`+B(e,`-grow`,``)+z+e+Xe+B(e,`grow`,`positive`)+e;case 4554:return z+B(e,/([^-])(transform)/g,`$1`+z+`$2`)+e;case 6187:return B(B(B(e,/(zoom-|grab)/,z+`$1`),/(image-set)/,z+`$1`),e,``)+e;case 5495:case 3959:return B(e,/(image-set\([^]*)/,z+"$1$`$1");case 4968:return B(B(e,/(.+:)(flex-)?(.*)/,z+`box-pack:$3`+Xe+`flex-pack:$3`),/s.+-b[^;]+/,`justify`)+z+e+e;case 4095:case 3583:case 4068:case 2532:return B(e,/(.+)-inline(.+)/,z+`$1$2`)+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ft(e)-1-t>6)switch(V(e,t+1)){case 109:if(V(e,t+4)!==45)break;case 102:return B(e,/(.+:)(.+)-([^]+)/,`$1`+z+`$2-$3$1`+Ze+(V(e,t+3)==108?`$3`:`$2-$3`))+e;case 115:return~ut(e,`stretch`)?en(B(e,`stretch`,`fill-available`),t)+e:e}break;case 4949:if(V(e,t+1)!==115)break;case 6444:switch(V(e,ft(e)-3-(~ut(e,`!important`)&&10))){case 107:return B(e,`:`,`:`+z)+e;case 101:return B(e,/(.+:)([^;!]+)(;|!.+)?/,`$1`+z+(V(e,14)===45?`inline-`:``)+`box$3$1`+z+`$2$3$1`+Xe+`$2box$3`)+e}break;case 5936:switch(V(e,t+11)){case 114:return z+e+Xe+B(e,/[svh]\w+-[tblr]{2}/,`tb`)+e;case 108:return z+e+Xe+B(e,/[svh]\w+-[tblr]{2}/,`tb-rl`)+e;case 45:return z+e+Xe+B(e,/[svh]\w+-[tblr]{2}/,`lr`)+e}return z+e+Xe+e+e}return e}var tn=function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case et:e.return=en(e.value,e.length);break;case nt:return Ut([St(e,{value:B(e.value,`@`,`@`+z)})],r);case $e:if(e.length)return ht(e.props,function(t){switch(lt(t,/(::plac\w+|:read-\w+)/)){case`:read-only`:case`:read-write`:return Ut([St(e,{props:[B(t,/:(read-\w+)/,`:`+Ze+`$1`)]})],r);case`::placeholder`:return Ut([St(e,{props:[B(t,/:(plac\w+)/,`:`+z+`input-$1`)]}),St(e,{props:[B(t,/:(plac\w+)/,`:`+Ze+`$1`)]}),St(e,{props:[B(t,/:(plac\w+)/,Xe+`input-$1`)]})],r)}return``})}},nn=[tn],rn=function(e){var t=e.key;if(t===`css`){var n=document.querySelectorAll(`style[data-emotion]:not([data-s])`);Array.prototype.forEach.call(n,function(e){var t=e.getAttribute(`data-emotion`);t.indexOf(` `)!==-1&&(document.head.appendChild(e),e.setAttribute(`data-s`,``))})}var r=e.stylisPlugins||nn,i={},a,o=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll(`style[data-emotion^="`+t+` "]`),function(e){for(var t=e.getAttribute(`data-emotion`).split(` `),n=1;n<t.length;n++)i[t[n]]=!0;o.push(e)});var s,c=[Qt,$t],l,u=[Wt,Kt(function(e){l.insert(e)})],d=Gt(c.concat(r,u)),f=function(e){return Ut(Rt(e),d)};s=function(e,t,n,r){l=n,f(e?e+`{`+t.styles+`}`:t.styles),r&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new Ye({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:s};return p.sheet.hydrate(o),p};function an(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var on={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},sn=!1,cn=/[A-Z]|^ms/g,ln=/_EMO_([^_]+?)_([^]*?)_EMO_/g,un=function(e){return e.charCodeAt(1)===45},dn=function(e){return e!=null&&typeof e!=`boolean`},fn=qt(function(e){return un(e)?e:e.replace(cn,`-$&`).toLowerCase()}),pn=function(e,t){switch(e){case`animation`:case`animationName`:if(typeof t==`string`)return t.replace(ln,function(e,t,n){return vn={name:t,styles:n,next:vn},t})}return on[e]!==1&&!un(e)&&typeof t==`number`&&t!==0?t+`px`:t},mn=`Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.`;function hn(e,t,n){if(n==null)return``;var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case`boolean`:return``;case`object`:var i=n;if(i.anim===1)return vn={name:i.name,styles:i.styles,next:vn},i.name;var a=n;if(a.styles!==void 0){var o=a.next;if(o!==void 0)for(;o!==void 0;)vn={name:o.name,styles:o.styles,next:vn},o=o.next;var s=a.styles+`;`;return s}return gn(e,t,n);case`function`:if(e!==void 0){var c=vn,l=n(e);return vn=c,hn(e,t,l)}break}var u=n;if(t==null)return u;var d=t[u];return d===void 0?u:d}function gn(e,t,n){var r=``;if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=hn(e,t,n[i])+`;`;else for(var a in n){var o=n[a];if(typeof o!=`object`){var s=o;t!=null&&t[s]!==void 0?r+=a+`{`+t[s]+`}`:dn(s)&&(r+=fn(a)+`:`+pn(a,s)+`;`)}else{if(a===`NO_COMPONENT_SELECTOR`&&sn)throw Error(mn);if(Array.isArray(o)&&typeof o[0]==`string`&&(t==null||t[o[0]]===void 0))for(var c=0;c<o.length;c++)dn(o[c])&&(r+=fn(a)+`:`+pn(a,o[c])+`;`);else{var l=hn(e,t,o);switch(a){case`animation`:case`animationName`:r+=fn(a)+`:`+l+`;`;break;default:r+=a+`{`+l+`}`}}}}return r}var _n=/label:\s*([^\s;{]+)\s*(;|$)/g,vn;function yn(e,t,n){if(e.length===1&&typeof e[0]==`object`&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,i=``;vn=void 0;var a=e[0];if(a==null||a.raw===void 0)r=!1,i+=hn(n,t,a);else{var o=a;i+=o[0]}for(var s=1;s<e.length;s++)if(i+=hn(n,t,e[s]),r){var c=a;i+=c[s]}_n.lastIndex=0;for(var l=``,u;(u=_n.exec(i))!==null;)l+=`-`+u[1];var d=an(i)+l;return{name:d,styles:i,next:vn}}var bn=!0;function xn(e,t,n){var r=``;return n.split(` `).forEach(function(n){e[n]===void 0?n&&(r+=n+` `):t.push(e[n]+`;`)}),r}var Sn=function(e,t,n){var r=e.key+`-`+t.name;(n===!1||bn===!1)&&e.registered[r]===void 0&&(e.registered[r]=t.styles)},Cn=function(e,t,n){Sn(e,t,n);var r=e.key+`-`+t.name;if(e.inserted[t.name]===void 0){var i=t;do e.insert(t===i?`.`+r:``,i,e.sheet,!0),i=i.next;while(i!==void 0)}};function wn(e,t){if(e.inserted[t.name]===void 0)return e.insert(``,t,e.sheet,!0)}function Tn(e,t,n){var r=[],i=xn(e,r,n);return r.length<2?n:i+t(r)}var En=function(e){var t=rn(e);t.sheet.speedy=function(e){this.isSpeedy=e},t.compat=!0;var n=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=yn(n,t.registered,void 0);return Cn(t,i,!1),t.key+`-`+i.name},r=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=yn(n,t.registered),a=`animation-`+i.name;return wn(t,{name:i.name,styles:`@keyframes `+a+`{`+i.styles+`}`}),a},i=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=yn(n,t.registered);wn(t,i)},a=function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return Tn(t.registered,n,Dn(r))};return{css:n,cx:a,injectGlobal:i,keyframes:r,hydrate:function(e){e.forEach(function(e){t.inserted[e]=!0})},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:xn.bind(null,t.registered),merge:Tn.bind(null,t.registered,n)}},Dn=function e(t){for(var n=``,r=0;r<t.length;r++){var i=t[r];if(i!=null){var a=void 0;switch(typeof i){case`boolean`:break;case`object`:if(Array.isArray(i))a=e(i);else for(var o in a=``,i)i[o]&&o&&(a&&(a+=` `),a+=o);break;default:a=i}a&&(n&&(n+=` `),n+=a)}}return n},On=En({key:`css`});On.flush,On.hydrate,On.cx,On.merge,On.getRegisteredStyles;var kn=On.injectGlobal;On.keyframes;var U=On.css;On.sheet,On.cache;function An(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function jn(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Mn(e){let t,n,r;e.length===2?(t=e===An||e===jn?e:Nn,n=e,r=e):(t=An,n=(t,n)=>An(e(t),n),r=(t,n)=>e(t)-n);function i(e,r,i=0,a=e.length){if(i<a){if(t(r,r)!==0)return a;do{let t=i+a>>>1;n(e[t],r)<0?i=t+1:a=t}while(i<a)}return i}function a(e,r,i=0,a=e.length){if(i<a){if(t(r,r)!==0)return a;do{let t=i+a>>>1;n(e[t],r)<=0?i=t+1:a=t}while(i<a)}return i}function o(e,t,n=0,a=e.length){let o=i(e,t,n,a-1);return o>n&&r(e[o-1],t)>-r(e[o],t)?o-1:o}return{left:i,center:o,right:a}}function Nn(){return 0}function Pn(e){return e===null?NaN:+e}const Fn=Mn(An),In=Fn.right,Ln=Fn.left;Mn(Pn).center;var Rn=In;function zn(e,t){let n,r;if(t===void 0)for(let t of e)t!=null&&(n===void 0?t>=t&&(n=r=t):(n>t&&(n=t),r<t&&(r=t)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}var Bn=class extends Map{constructor(e,t=Wn){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(let[t,n]of e)this.set(t,n)}get(e){return super.get(Vn(this,e))}has(e){return super.has(Vn(this,e))}set(e,t){return super.set(Hn(this,e),t)}delete(e){return super.delete(Un(this,e))}};function Vn({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):n}function Hn({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Un({_intern:e,_key:t},n){let r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Wn(e){return typeof e==`object`&&e?e.valueOf():e}const Gn=Math.sqrt(50),Kn=Math.sqrt(10),qn=Math.sqrt(2);function Jn(e,t,n){let r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/10**i,o=a>=Gn?10:a>=Kn?5:a>=qn?2:1,s,c,l;return i<0?(l=10**-i/o,s=Math.round(e*l),c=Math.round(t*l),s/l<e&&++s,c/l>t&&--c,l=-l):(l=10**i*o,s=Math.round(e/l),c=Math.round(t/l),s*l<e&&++s,c*l>t&&--c),c<s&&.5<=n&&n<2?Jn(e,t,n*2):[s,c,l]}function Yn(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];let r=t<e,[i,a,o]=r?Jn(t,e,n):Jn(e,t,n);if(!(a>=i))return[];let s=a-i+1,c=Array(s);if(r)if(o<0)for(let e=0;e<s;++e)c[e]=(a-e)/-o;else for(let e=0;e<s;++e)c[e]=(a-e)*o;else if(o<0)for(let e=0;e<s;++e)c[e]=(i+e)/-o;else for(let e=0;e<s;++e)c[e]=(i+e)*o;return c}function Xn(e,t,n){return t=+t,e=+e,n=+n,Jn(e,t,n)[2]}function Zn(e,t,n){t=+t,e=+e,n=+n;let r=t<e,i=r?Xn(t,e,n):Xn(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Qn(e,t){let n;if(t===void 0)for(let t of e)t!=null&&(n<t||n===void 0&&t>=t)&&(n=t);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function $n(e,t){let n;if(t===void 0)for(let t of e)t!=null&&(n>t||n===void 0&&t>=t)&&(n=t);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function er(e,t,n=Pn){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),s=+n(e[a+1],a+1,e);return o+(s-o)*(i-a)}}function tr(e,t){let n=0,r=0;if(t===void 0)for(let t of e)t!=null&&(t=+t)>=t&&(++n,r+=t);else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function*nr(e){for(let t of e)yield*t}function rr(e){return Array.from(nr(e))}function ir(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=Array(i);++r<i;)a[r]=e+r*n;return a}function ar(e,t){let n=0;if(t===void 0)for(let t of e)(t=+t)&&(n+=t);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function or(e,t,n){var r=n||{},i=r.noTrailing,a=i===void 0?!1:i,o=r.noLeading,s=o===void 0?!1:o,c=r.debounceMode,l=c===void 0?void 0:c,u,d=!1,f=0;function p(){u&&clearTimeout(u)}function m(e){var t=e||{},n=t.upcomingOnly,r=n===void 0?!1:n;p(),d=!r}function h(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=this,c=Date.now()-f;if(d)return;function m(){f=Date.now(),t.apply(o,r)}function h(){u=void 0}!s&&l&&!u&&m(),p(),l===void 0&&c>e?s?(f=Date.now(),a||(u=setTimeout(l?h:m,e))):m():a!==!0&&(u=setTimeout(l?h:m,l===void 0?e-c:e))}return h.cancel=m,h}var sr;(function(e){e.Left=`left`,e.Right=`right`,e.Auto=`auto`})(sr||={});const cr=e=>typeof e==`number`,lr=e=>typeof e==`function`,ur=e=>typeof e==`string`,dr=e=>Array.isArray(e),fr=e=>e instanceof Object,pr=e=>e.constructor.name!==`Function`&&e.constructor.name!==`Object`,mr=e=>fr(e)&&!dr(e)&&!lr(e)&&!pr(e),hr=e=>[Object,Array].includes((e||{}).constructor)&&!Object.entries(e||{}).length,gr=(e,t,n=[],r=new Set)=>{if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;if(r.has(e))return!0;r.add(e);for(let i=0;i<e.length;i++)if(!gr(e[i],t[i],n,r))return!1;return!0}if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(typeof e==`object`&&e&&t!==null){if(typeof t!=`object`)return!1;if(e===t)return!0;let i=Object.keys(e).filter(e=>!n.includes(e)),a=Object.keys(t).filter(e=>!n.includes(e));if(i.length!==a.length)return!1;if(r.has(e))return!0;r.add(e);for(let a of i)if(!gr(e[a],t[a],n,r))return!1;return!0}return e===t},_r=e=>e.flat(),vr=(e,t=new Map)=>{if(typeof e!=`object`||!e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){let n=[];t.set(e,n);for(let r of e)n.push(t.has(r)?t.get(r):vr(r,t));return n}if(pr(e)){let t=e;return t}if(e instanceof Object){let n={};t.set(e,n);let r=e;return Object.keys(e).reduce((e,n)=>(e[n]=t.has(r[n])?t.get(r[n]):vr(r[n],t),e),n),n}return e},yr=(e,t,n=new Map)=>{if(!e||!t||e===t)return e;let r=pr(e)?e:vr(e);return n.has(t)?n.get(t):(n.set(t,r),Object.keys(t).forEach(i=>{i===`__proto__`||i===`constructor`||(mr(e[i])&&mr(t[i])?r[i]=yr(e[i],t[i],n):pr(t)?r[i]=t:r[i]=vr(t[i]))}),r)},br=(e,t,n)=>or(t,e,n);function xr(e,t,n){return lr(t)?t(e,n):t}function Sr(e,t,n){return xr(e,t,n)}function W(e,t,n){return xr(e,t,n)}function Cr(e){return e.filter(e=>e&&!cr(e))}function wr(e,t,n){return Math.min(Math.max(e,t),n)}function Tr(e,...t){if(!e)return[void 0,void 0];if(dr(t)){let n=0,r=0;return e.forEach((e,i)=>{let a=0,o=0;for(let n of t){let t=W(e,n,i)||0;t>=0?a+=t:o+=t}a>r&&(r=a),o<n&&(n=o)}),[n,r]}}function Er(e,t,...n){let r=[],i=0,a=0;for(let o of n){let n=W(e,o,t)||0;n>=0?r.push(i+=n):r.push(a+=n)}return r}function Dr(e,t,n,r){let i=e.map((e,n)=>W(e,t,n)||0),a=n.map((t,n)=>{let i=tr(e,(e,n)=>W(e,t,n)||0);return i===0&&Array.isArray(r)?r[n]:i<0}),o=n.map(()=>[]);return e.forEach((e,t)=>{let r=i[t],a=i[t];n.forEach((n,i)=>{let s=W(e,n,t)||0;s>=0?o[i].push([r,r+=s]):o[i].push([a,a+=s])})}),o.forEach((e,t)=>{e.isMostlyNegative=a[t]}),o}function Or(e,...t){if(!e)return;let n=$n(e,(e,n)=>$n(t,t=>W(e,t,n)));return n}function kr(e,...t){if(!e)return;let n=Qn(e,(e,n)=>Qn(t,t=>W(e,t,n)));return n}function Ar(e,...t){return[Or(e,...t),kr(e,...t)]}function jr(e,t,n,r=sr.Auto){if(e.length<=1)return e[0];let i=e.map((e,t)=>[e,t]),a=i.sort(([e,t],[r,i])=>W(e,n,t)-W(r,n,i)),o=a.map(([e,t])=>W(e,n,t)),s=r===sr.Right?Ln(o,t,0,e.length-1):In(o,t,1,e.length);return r===sr.Right?a[s][0]:r===sr.Left?a[s-1][0]:t-o[s-1]>o[s]-t?a[s][0]:a[s-1][0]}function Mr(e,t,n,r=!1){if(!n)return[];let i=e.filter((e,r)=>{let i=W(e,n,r);return i>=t[0]&&i<=t[1]});if(r){if(i.length===0){let r=jr(e,t[0],n,sr.Left),i=jr(e,t[1],n,sr.Right);return[r,i].filter(Boolean)}let r=i[0],a=i[i.length-1],o=e.findIndex(e=>e===r),s=e.findIndex(e=>e===a),c=Math.max(0,o-1),l=Math.min(e.length-1,s+1);return e.slice(c,l+1)}return i}var Nr={value:()=>{}};function Pr(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+``)||r in n||/[\s.]/.test(r))throw Error(`illegal type: `+r);n[r]=[]}return new Fr(n)}function Fr(e){this._=e}function Ir(e,t){return e.trim().split(/^|\s+/).map(function(e){var n=``,r=e.indexOf(`.`);if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw Error(`unknown type: `+e);return{type:e,name:n}})}Fr.prototype=Pr.prototype={constructor:Fr,on:function(e,t){var n=this._,r=Ir(e+``,n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=Lr(n[i],e.name)))return i;return}if(t!=null&&typeof t!=`function`)throw Error(`invalid callback: `+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=Rr(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Rr(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Fr(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw Error(`unknown type: `+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw Error(`unknown type: `+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function Lr(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Rr(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Nr,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var zr=Pr,Br=0,Vr=0,Hr=0,Ur=1e3,Wr,Gr,Kr=0,qr=0,Jr=0,Yr=typeof performance==`object`&&performance.now?performance:Date,Xr=typeof window==`object`&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Zr(){return qr||(Xr(Qr),qr=Yr.now()+Jr)}function Qr(){qr=0}function $r(){this._call=this._time=this._next=null}$r.prototype=ei.prototype={constructor:$r,restart:function(e,t,n){if(typeof e!=`function`)throw TypeError(`callback is not a function`);n=(n==null?Zr():+n)+(t==null?0:+t),!this._next&&Gr!==this&&(Gr?Gr._next=this:Wr=this,Gr=this),this._call=e,this._time=n,ai()},stop:function(){this._call&&(this._call=null,this._time=1/0,ai())}};function ei(e,t,n){var r=new $r;return r.restart(e,t,n),r}function ti(){Zr(),++Br;for(var e=Wr,t;e;)(t=qr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Br}function ni(){qr=(Kr=Yr.now())+Jr,Br=Vr=0;try{ti()}finally{Br=0,ii(),qr=0}}function ri(){var e=Yr.now(),t=e-Kr;t>Ur&&(Jr-=t,Kr=e)}function ii(){for(var e,t=Wr,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Wr=n);Gr=e,ai(r)}function ai(e){if(!Br){Vr&&=clearTimeout(Vr);var t=e-qr;t>24?(e<1/0&&(Vr=setTimeout(ni,e-Yr.now()-Jr)),Hr&&=clearInterval(Hr)):(Hr||(Kr=Yr.now(),Hr=setInterval(ri,Ur)),Br=1,Xr(ni))}}function oi(e,t,n){var r=new $r;return t=t==null?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}var si=A({__name:`CardDescription`,props:{class:{}},setup(e){let t=e;return(e,n)=>(M(),D(`p`,{"data-slot":`card-description`,class:ke(L(_e)(`text-muted-foreground text-sm`,t.class))},[de(e.$slots,`default`)],2))}}),ci=si,li=A({__name:`CardFooter`,props:{class:{}},setup(e){let t=e;return(e,n)=>(M(),D(`div`,{"data-slot":`card-footer`,class:ke(L(_e)(`flex items-center px-6 [.border-t]:pt-6`,t.class))},[de(e.$slots,`default`)],2))}}),ui=li,di=A({__name:`CardHeader`,props:{class:{}},setup(e){let t=e;return(e,n)=>(M(),D(`div`,{"data-slot":`card-header`,class:ke(L(_e)(`@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6`,t.class))},[de(e.$slots,`default`)],2))}}),fi=di,pi=A({__name:`CardTitle`,props:{class:{}},setup(e){let t=e;return(e,n)=>(M(),D(`h3`,{"data-slot":`card-title`,class:ke(L(_e)(`leading-none font-semibold`,t.class))},[de(e.$slots,`default`)],2))}}),mi=pi;const hi={class:`animate-fade-in-up`},gi={class:`grid gap-4 sm:grid-cols-2 mb-8`},_i={class:`text-sm font-medium text-white/80`},vi={class:`mt-2 text-2xl sm:text-3xl font-bold text-white`},yi={class:`text-sm font-medium text-white/80`},bi={class:`mt-2 text-2xl sm:text-3xl font-bold text-white`},xi={class:`animate-fade-in-up`},Si={class:`mb-4 text-lg font-semibold text-foreground`},Ci={class:`flex flex-col space-y-4 pt-4`},wi={class:`text-sm font-medium mb-auto`},Ti={key:0,class:`text-[8px] text-destructive font-bold leading-none px-1.5 py-0.5 bg-destructive/10 rounded-sm mt-auto`},Ei={class:`space-y-2 mt-4`};var Di=A({__name:`CalendarView`,props:{scope:{default:`personal`}},setup(a){let o=a,{t:c}=ge(),m=Fe(),h=Ie(),{categoryLabels:g}=m,{isInCouple:_}=h,E=P(()=>o.scope===`personal`?m.personalExpenses:m.familyExpenses),A=new Date,ie=A.toISOString().split(`T`)[0],j=I(te(ee())),ae=I(!1),oe=I([]),se=I(``),ce=e=>({id:e.id,title:e.title,amount:`NT ${Math.round(e.amount)}`,category:e.category,icon:Re.getIconKey(e.category),user:e.user}),le=P(()=>[c(`stats.months.january`),c(`stats.months.february`),c(`stats.months.march`),c(`stats.months.april`),c(`stats.months.may`),c(`stats.months.june`),c(`stats.months.july`),c(`stats.months.august`),c(`stats.months.september`),c(`stats.months.october`),c(`stats.months.november`),c(`stats.months.december`)]),de=P(()=>{let e=new Set;return E.value.forEach(t=>{e.add(parseInt(t.date.substring(0,4)))}),e.add(A.getFullYear()),Array.from(e).sort((e,t)=>t-e)}),fe=P(()=>j.value.year===A.getFullYear()&&j.value.month===A.getMonth()+1),pe=P(()=>{let e=`${j.value.year}-${j.value.month.toString().padStart(2,`0`)}`;return E.value.filter(t=>t.date.startsWith(e))}),me=P(()=>pe.value.reduce((e,t)=>e+t.amount,0)),he=P(()=>{let e=E.value.filter(e=>e.date===ie);return e.reduce((e,t)=>e+t.amount,0)}),_e=e=>{if(!e)return 0;let t=`${e.year}-${e.month.toString().padStart(2,`0`)}-${e.day.toString().padStart(2,`0`)}`,n=E.value.filter(e=>e.date===t);if(n.length===0)return 0;let r=n.reduce((e,t)=>e+t.amount,0);return r>0?r.toFixed(0):0},ve=e=>{if(!e)return;let t=`${e.year}-${e.month.toString().padStart(2,`0`)}-${e.day.toString().padStart(2,`0`)}`,n=E.value.filter(e=>e.date===t);n.length!==0&&(oe.value=n,se.value=t,ae.value=!0)},ye=e=>{let[t,n,r]=e.split(`-`);return`${t} 年 ${parseInt(n)} 月 ${parseInt(r)} 日`},be=P(()=>oe.value.map(ce));return(a,o)=>(M(),D(`div`,hi,[F(`div`,gi,[k(L(s),{class:`relative overflow-hidden border-0 shadow-lg animate-slide-in-left hover:shadow-xl transition-all duration-300`},{default:N(()=>[o[4]||=F(`div`,{class:`absolute inset-0 bg-gradient-to-br from-brand-primary to-brand-primary/80`},null,-1),k(L(Ue),{class:`relative p-4 sm:p-6`},{default:N(()=>[F(`p`,_i,R(L(c)(`stats.monthlyTotal`)),1),F(`p`,vi,`NT$ `+R(me.value.toLocaleString()),1)]),_:1})]),_:1}),k(L(s),{class:`relative overflow-hidden border-0 shadow-lg animate-slide-in-left hover:shadow-xl transition-all duration-300`},{default:N(()=>[o[5]||=F(`div`,{class:`absolute inset-0 bg-gradient-to-br from-brand-primary/40 to-brand-primary/60`},null,-1),k(L(Ue),{class:`relative p-4 sm:p-6`},{default:N(()=>[F(`p`,yi,R(fe.value?L(c)(`stats.todayExpense`):L(c)(`stats.dailyAverage`)),1),F(`p`,bi,` NT$ `+R(fe.value?he.value.toLocaleString():Math.round(me.value/(pe.value.length||1)).toLocaleString()),1)]),_:1})]),_:1})]),F(`div`,xi,[F(`h2`,Si,R(L(c)(`stats.calendarView`)),1),k(L(T),{placeholder:j.value,"onUpdate:placeholder":o[2]||=e=>j.value=e,class:`rounded-md border-0 shadow-lg bg-card p-4`},{default:N(({date:a,grid:s,weekDays:l})=>[k(L(He),null,{default:N(()=>[k(L(Ve),{class:`flex w-full items-center justify-between gap-2`},{default:N(()=>[k(L(i),{"model-value":j.value.month.toString(),"onUpdate:modelValue":o[0]||=e=>{!e||!j.value||Number(e)!==j.value?.month&&(j.value=j.value.set({month:Number(e)}))}},{default:N(()=>[k(L(t),{"aria-label":L(c)(`stats.selectMonth`),class:`w-[60%]`},{default:N(()=>[k(L(e),null,{default:N(()=>[O(R(le.value[j.value.month-1]),1)]),_:1})]),_:1},8,[`aria-label`]),k(L(r),null,{default:N(()=>[(M(!0),D(we,null,ue(le.value,(e,t)=>(M(),ne(L(n),{key:t+1,value:(t+1).toString()},{default:N(()=>[O(R(e),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`model-value`]),k(L(i),{"model-value":j.value.year.toString(),"onUpdate:modelValue":o[1]||=e=>{!e||!j.value||Number(e)!==j.value?.year&&(j.value=j.value.set({year:Number(e)}))}},{default:N(()=>[k(L(t),{"aria-label":L(c)(`stats.selectYear`),class:`w-[40%]`},{default:N(()=>[k(L(e),null,{default:N(()=>[O(R(j.value.year)+` `+R(L(c)(`stats.year`)),1)]),_:1})]),_:1},8,[`aria-label`]),k(L(r),null,{default:N(()=>[(M(!0),D(we,null,ue(de.value,e=>(M(),ne(L(n),{key:e,value:e.toString()},{default:N(()=>[O(R(e)+` `+R(L(c)(`stats.year`)),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`model-value`])]),_:1})]),_:1}),F(`div`,Ci,[(M(!0),D(we,null,ue(s,e=>(M(),ne(L(S),{key:e.value.toString(),class:`w-full`},{default:N(()=>[k(L(b),null,{default:N(()=>[k(L(y),{class:`flex`},{default:N(()=>[(M(!0),D(we,null,ue(l,e=>(M(),ne(L(v),{key:e,class:`flex-1 text-center text-xs font-medium text-muted-foreground py-2`},{default:N(()=>[O(R(e),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),k(L(x),{class:`grid gap-1`},{default:N(()=>[(M(!0),D(we,null,ue(e.rows,(t,n)=>(M(),ne(L(y),{key:`weekDate-${n}`,class:`flex gap-1`},{default:N(()=>[(M(!0),D(we,null,ue(t,t=>(M(),ne(L(w),{key:t.toString(),date:t,class:`flex-1`},{default:N(()=>[k(L(C),{day:t,month:e.value,class:ke([`relative w-full h-20 p-2 flex flex-col items-center justify-start border border-border/20 rounded-md hover:bg-accent hover:text-accent-foreground transition-colors`,{"cursor-pointer":_e(t)}]),onClick:e=>_e(t)&&ve(t)},{default:N(()=>[F(`span`,wi,R(t.day),1),_e(t)?(M(),D(`span`,Ti,` $`+R(_e(t)),1)):re(``,!0)]),_:2},1032,[`day`,`month`,`class`,`onClick`])]),_:2},1032,[`date`]))),128))]),_:2},1024))),128))]),_:2},1024)]),_:2},1024))),128))])]),_:1},8,[`placeholder`])]),k(L(p),{open:ae.value,"onUpdate:open":o[3]||=e=>ae.value=e},{default:N(()=>[k(L(f),{class:`max-w-md max-h-[80vh] overflow-y-auto`},{default:N(()=>[k(L(u),null,{default:N(()=>[k(L(l),null,{default:N(()=>[O(R(ye(se.value)),1)]),_:1}),k(L(d),null,{default:N(()=>[O(` 共 `+R(oe.value.length)+` 筆消費，總計 NT$ `+R(oe.value.reduce((e,t)=>e+t.amount,0).toLocaleString()),1)]),_:1})]),_:1}),F(`div`,Ei,[(M(!0),D(we,null,ue(be.value,e=>(M(),ne(Ge,{key:e.id,id:e.id,title:e.title,amount:e.amount,category:e.category,icon:e.icon,user:e.user,"show-user":L(_)},null,8,[`id`,`title`,`amount`,`category`,`icon`,`user`,`show-user`]))),128))])]),_:1})]),_:1},8,[`open`])]))}}),Oi=Pe(Di,[[`__scopeId`,`data-v-b3288b7a`]]),ki=`http://www.w3.org/1999/xhtml`,Ai={svg:`http://www.w3.org/2000/svg`,xhtml:ki,xlink:`http://www.w3.org/1999/xlink`,xml:`http://www.w3.org/XML/1998/namespace`,xmlns:`http://www.w3.org/2000/xmlns/`};function ji(e){var t=e+=``,n=t.indexOf(`:`);return n>=0&&(t=e.slice(0,n))!==`xmlns`&&(e=e.slice(n+1)),Ai.hasOwnProperty(t)?{space:Ai[t],local:e}:e}function Mi(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ki&&t.documentElement.namespaceURI===ki?t.createElement(e):t.createElementNS(n,e)}}function Ni(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Pi(e){var t=ji(e);return(t.local?Ni:Mi)(t)}function Fi(){}function Ii(e){return e==null?Fi:function(){return this.querySelector(e)}}function Li(e){typeof e!=`function`&&(e=Ii(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=Array(o),c,l,u=0;u<o;++u)(c=a[u])&&(l=e.call(c,c.__data__,u,a))&&(`__data__`in c&&(l.__data__=c.__data__),s[u]=l);return new Eo(r,this._parents)}function Ri(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function zi(){return[]}function Bi(e){return e==null?zi:function(){return this.querySelectorAll(e)}}function Vi(e){return function(){return Ri(e.apply(this,arguments))}}function Hi(e){e=typeof e==`function`?Vi(e):Bi(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],s=o.length,c,l=0;l<s;++l)(c=o[l])&&(r.push(e.call(c,c.__data__,l,o)),i.push(c));return new Eo(r,i)}function Ui(e){return function(){return this.matches(e)}}function Wi(e){return function(t){return t.matches(e)}}var Gi=Array.prototype.find;function Ki(e){return function(){return Gi.call(this.children,e)}}function qi(){return this.firstElementChild}function Ji(e){return this.select(e==null?qi:Ki(typeof e==`function`?e:Wi(e)))}var Yi=Array.prototype.filter;function Xi(){return Array.from(this.children)}function Zi(e){return function(){return Yi.call(this.children,e)}}function Qi(e){return this.selectAll(e==null?Xi:Zi(typeof e==`function`?e:Wi(e)))}function $i(e){typeof e!=`function`&&(e=Ui(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],c,l=0;l<o;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&s.push(c);return new Eo(r,this._parents)}function ea(e){return Array(e.length)}function ta(){return new Eo(this._enter||this._groups.map(ea),this._parents)}function na(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}na.prototype={constructor:na,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ra(e){return function(){return e}}function ia(e,t,n,r,i,a){for(var o=0,s,c=t.length,l=a.length;o<l;++o)(s=t[o])?(s.__data__=a[o],r[o]=s):n[o]=new na(e,a[o]);for(;o<c;++o)(s=t[o])&&(i[o]=s)}function aa(e,t,n,r,i,a,o){var s,c,l=new Map,u=t.length,d=a.length,f=Array(u),p;for(s=0;s<u;++s)(c=t[s])&&(f[s]=p=o.call(c,c.__data__,s,t)+``,l.has(p)?i[s]=c:l.set(p,c));for(s=0;s<d;++s)p=o.call(e,a[s],s,a)+``,(c=l.get(p))?(r[s]=c,c.__data__=a[s],l.delete(p)):n[s]=new na(e,a[s]);for(s=0;s<u;++s)(c=t[s])&&l.get(f[s])===c&&(i[s]=c)}function oa(e){return e.__data__}function sa(e,t){if(!arguments.length)return Array.from(this,oa);var n=t?aa:ia,r=this._parents,i=this._groups;typeof e!=`function`&&(e=ra(e));for(var a=i.length,o=Array(a),s=Array(a),c=Array(a),l=0;l<a;++l){var u=r[l],d=i[l],f=d.length,p=ca(e.call(u,u&&u.__data__,l,r)),m=p.length,h=s[l]=Array(m),g=o[l]=Array(m),_=c[l]=Array(f);n(u,d,h,g,_,p,t);for(var v=0,y=0,b,x;v<m;++v)if(b=h[v]){for(v>=y&&(y=v+1);!(x=g[y])&&++y<m;);b._next=x||null}}return o=new Eo(o,r),o._enter=s,o._exit=c,o}function ca(e){return typeof e==`object`&&`length`in e?e:Array.from(e)}function la(){return new Eo(this._exit||this._groups.map(ea),this._parents)}function ua(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e==`function`?(r=e(r),r&&=r.selection()):r=r.append(e+``),t!=null&&(i=t(i),i&&=i.selection()),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function da(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),s=Array(i),c=0;c<o;++c)for(var l=n[c],u=r[c],d=l.length,f=s[c]=Array(d),p,m=0;m<d;++m)(p=l[m]||u[m])&&(f[m]=p);for(;c<i;++c)s[c]=n[c];return new Eo(s,this._parents)}function fa(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function pa(e){e||=ma;function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}for(var n=this._groups,r=n.length,i=Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,c=i[a]=Array(s),l,u=0;u<s;++u)(l=o[u])&&(c[u]=l);c.sort(t)}return new Eo(i,this._parents).order()}function ma(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ha(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ga(){return Array.from(this)}function _a(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function va(){let e=0;for(let t of this)++e;return e}function ya(){return!this.node()}function ba(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function xa(e){return function(){this.removeAttribute(e)}}function Sa(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ca(e,t){return function(){this.setAttribute(e,t)}}function wa(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ta(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ea(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Da(e,t){var n=ji(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Sa:xa:typeof t==`function`?n.local?Ea:Ta:n.local?wa:Ca)(n,t))}function Oa(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ka(e){return function(){this.style.removeProperty(e)}}function Aa(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ja(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Ma(e,t,n){return arguments.length>1?this.each((t==null?ka:typeof t==`function`?ja:Aa)(e,t,n??``)):Na(this.node(),e)}function Na(e,t){return e.style.getPropertyValue(t)||Oa(e).getComputedStyle(e,null).getPropertyValue(t)}function Pa(e){return function(){delete this[e]}}function Fa(e,t){return function(){this[e]=t}}function Ia(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function La(e,t){return arguments.length>1?this.each((t==null?Pa:typeof t==`function`?Ia:Fa)(e,t)):this.node()[e]}function Ra(e){return e.trim().split(/^|\s+/)}function za(e){return e.classList||new Ba(e)}function Ba(e){this._node=e,this._names=Ra(e.getAttribute(`class`)||``)}Ba.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute(`class`,this._names.join(` `)))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute(`class`,this._names.join(` `)))},contains:function(e){return this._names.indexOf(e)>=0}};function Va(e,t){for(var n=za(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Ha(e,t){for(var n=za(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Ua(e){return function(){Va(this,e)}}function Wa(e){return function(){Ha(this,e)}}function Ga(e,t){return function(){(t.apply(this,arguments)?Va:Ha)(this,e)}}function Ka(e,t){var n=Ra(e+``);if(arguments.length<2){for(var r=za(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t==`function`?Ga:t?Ua:Wa)(n,t))}function qa(){this.textContent=``}function Ja(e){return function(){this.textContent=e}}function Ya(e){return function(){var t=e.apply(this,arguments);this.textContent=t??``}}function Xa(e){return arguments.length?this.each(e==null?qa:(typeof e==`function`?Ya:Ja)(e)):this.node().textContent}function Za(){this.innerHTML=``}function Qa(e){return function(){this.innerHTML=e}}function $a(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??``}}function eo(e){return arguments.length?this.each(e==null?Za:(typeof e==`function`?$a:Qa)(e)):this.node().innerHTML}function to(){this.nextSibling&&this.parentNode.appendChild(this)}function no(){return this.each(to)}function ro(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function io(){return this.each(ro)}function ao(e){var t=typeof e==`function`?e:Pi(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function oo(){return null}function so(e,t){var n=typeof e==`function`?e:Pi(e),r=t==null?oo:typeof t==`function`?t:Ii(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function co(){var e=this.parentNode;e&&e.removeChild(this)}function lo(){return this.each(co)}function uo(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fo(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function po(e){return this.select(e?fo:uo)}function mo(e){return arguments.length?this.property(`__data__`,e):this.node().__data__}function ho(e){return function(t){e.call(this,t,this.__data__)}}function go(e){return e.trim().split(/^|\s+/).map(function(e){var t=``,n=e.indexOf(`.`);return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function _o(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function vo(e,t,n){return function(){var r=this.__on,i,a=ho(t);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function yo(e,t,n){var r=go(e+``),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,l=s.length,u;c<l;++c)for(i=0,u=s[c];i<a;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(s=t?vo:_o,i=0;i<a;++i)this.each(s(r[i],t,n));return this}function bo(e,t,n){var r=Oa(e),i=r.CustomEvent;typeof i==`function`?i=new i(t,n):(i=r.document.createEvent(`Event`),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function xo(e,t){return function(){return bo(this,e,t)}}function So(e,t){return function(){return bo(this,e,t.apply(this,arguments))}}function Co(e,t){return this.each((typeof t==`function`?So:xo)(e,t))}function*wo(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var To=[null];function Eo(e,t){this._groups=e,this._parents=t}function Do(){return new Eo([[document.documentElement]],To)}function Oo(){return this}Eo.prototype=Do.prototype={constructor:Eo,select:Li,selectAll:Hi,selectChild:Ji,selectChildren:Qi,filter:$i,data:sa,enter:ta,exit:la,join:ua,merge:da,selection:Oo,order:fa,sort:pa,call:ha,nodes:ga,node:_a,size:va,empty:ya,each:ba,attr:Da,style:Ma,property:La,classed:Ka,text:Xa,html:eo,raise:no,lower:io,append:ao,insert:so,remove:lo,clone:po,datum:mo,on:yo,dispatch:Co,[Symbol.iterator]:wo};var ko=Do;function Ao(e){return typeof e==`string`?new Eo([[document.querySelector(e)]],[document.documentElement]):new Eo([[e]],To)}function jo(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Mo(e,t){if(e=jo(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}var No;(function(e){e[e.SVG=0]=`SVG`,e[e.HTML=1]=`HTML`})(No||={});var Po;(function(e){e.Fit=`fit`,e.Extend=`extend`,e.FitWidth=`fit_width`})(Po||={});var Fo=[],Io=function(){return Fo.some(function(e){return e.activeTargets.length>0})},Lo=function(){return Fo.some(function(e){return e.skippedTargets.length>0})},Ro=`ResizeObserver loop completed with undelivered notifications.`,zo=function(){var e;typeof ErrorEvent==`function`?e=new ErrorEvent(`error`,{message:Ro}):(e=document.createEvent(`Event`),e.initEvent(`error`,!1,!1),e.message=Ro),window.dispatchEvent(e)},Bo;(function(e){e.BORDER_BOX=`border-box`,e.CONTENT_BOX=`content-box`,e.DEVICE_PIXEL_CONTENT_BOX=`device-pixel-content-box`})(Bo||={});var Vo=function(e){return Object.freeze(e)},Ho=function(){function e(e,t){this.inlineSize=e,this.blockSize=t,Vo(this)}return e}(),Uo=function(){function e(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Vo(this)}return e.prototype.toJSON=function(){var e=this,t=e.x,n=e.y,r=e.top,i=e.right,a=e.bottom,o=e.left,s=e.width,c=e.height;return{x:t,y:n,top:r,right:i,bottom:a,left:o,width:s,height:c}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),Wo=function(e){return e instanceof SVGElement&&`getBBox`in e},Go=function(e){if(Wo(e)){var t=e.getBBox(),n=t.width,r=t.height;return!n&&!r}var i=e,a=i.offsetWidth,o=i.offsetHeight;return!(a||o||e.getClientRects().length)},Ko=function(e){var t;if(e instanceof Element)return!0;var n=(t=e?.ownerDocument)?.defaultView;return!!(n&&e instanceof n.Element)},qo=function(e){switch(e.tagName){case`INPUT`:if(e.type!==`image`)break;case`VIDEO`:case`AUDIO`:case`EMBED`:case`OBJECT`:case`CANVAS`:case`IFRAME`:case`IMG`:return!0}return!1},Jo=typeof window<`u`?window:{},Yo=new WeakMap,Xo=/auto|scroll/,Zo=/^tb|vertical/,Qo=/msie|trident/i.test(Jo.navigator&&Jo.navigator.userAgent),$o=function(e){return parseFloat(e||`0`)},es=function(e,t,n){return e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=!1),new Ho((n?t:e)||0,(n?e:t)||0)},ts=Vo({devicePixelContentBoxSize:es(),borderBoxSize:es(),contentBoxSize:es(),contentRect:new Uo(0,0,0,0)}),ns=function(e,t){if(t===void 0&&(t=!1),Yo.has(e)&&!t)return Yo.get(e);if(Go(e))return Yo.set(e,ts),ts;var n=getComputedStyle(e),r=Wo(e)&&e.ownerSVGElement&&e.getBBox(),i=!Qo&&n.boxSizing===`border-box`,a=Zo.test(n.writingMode||``),o=!r&&Xo.test(n.overflowY||``),s=!r&&Xo.test(n.overflowX||``),c=r?0:$o(n.paddingTop),l=r?0:$o(n.paddingRight),u=r?0:$o(n.paddingBottom),d=r?0:$o(n.paddingLeft),f=r?0:$o(n.borderTopWidth),p=r?0:$o(n.borderRightWidth),m=r?0:$o(n.borderBottomWidth),h=r?0:$o(n.borderLeftWidth),g=d+l,_=c+u,v=h+p,y=f+m,b=s?e.offsetHeight-y-e.clientHeight:0,x=o?e.offsetWidth-v-e.clientWidth:0,S=i?g+v:0,C=i?_+y:0,w=r?r.width:$o(n.width)-S-x,T=r?r.height:$o(n.height)-C-b,E=w+g+x+v,ee=T+_+b+y,te=Vo({devicePixelContentBoxSize:es(Math.round(w*devicePixelRatio),Math.round(T*devicePixelRatio),a),borderBoxSize:es(E,ee,a),contentBoxSize:es(w,T,a),contentRect:new Uo(d,c,w,T)});return Yo.set(e,te),te},rs=function(e,t,n){var r=ns(e,n),i=r.borderBoxSize,a=r.contentBoxSize,o=r.devicePixelContentBoxSize;switch(t){case Bo.DEVICE_PIXEL_CONTENT_BOX:return o;case Bo.BORDER_BOX:return i;default:return a}},os=function(){function e(e){var t=ns(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=Vo([t.borderBoxSize]),this.contentBoxSize=Vo([t.contentBoxSize]),this.devicePixelContentBoxSize=Vo([t.devicePixelContentBoxSize])}return e}(),ss=function(e){if(Go(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},cs=function(){var e=1/0,t=[];Fo.forEach(function(n){if(n.activeTargets.length!==0){var r=[];n.activeTargets.forEach(function(t){var n=new os(t.target),i=ss(t.target);r.push(n),t.lastReportedSize=rs(t.target,t.observedBox),i<e&&(e=i)}),t.push(function(){n.callback.call(n.observer,r,n.observer)}),n.activeTargets.splice(0,n.activeTargets.length)}});for(var n=0,r=t;n<r.length;n++){var i=r[n];i()}return e},ls=function(e){Fo.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(n){n.isActive()&&(ss(n.target)>e?t.activeTargets.push(n):t.skippedTargets.push(n))})})},us=function(){var e=0;for(ls(e);Io();)e=cs(),ls(e);return Lo()&&zo(),e>0},ds,fs=[],ps=function(){return fs.splice(0).forEach(function(e){return e()})},ms=function(e){if(!ds){var t=0,n=document.createTextNode(``),r={characterData:!0};new MutationObserver(function(){return ps()}).observe(n,r),ds=function(){n.textContent=`${t?t--:t++}`}}fs.push(e),ds()},hs=function(e){ms(function(){requestAnimationFrame(e)})},gs=0,_s=function(){return!!gs},vs=250,ys={attributes:!0,characterData:!0,childList:!0,subtree:!0},bs=[`resize`,`load`,`transitionend`,`animationend`,`animationstart`,`animationiteration`,`keyup`,`keydown`,`mouseup`,`mousedown`,`mouseover`,`mouseout`,`blur`,`focus`],xs=function(e){return e===void 0&&(e=0),Date.now()+e},Ss=!1,Cs=function(){function e(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return e.prototype.run=function(e){var t=this;if(e===void 0&&(e=vs),!Ss){Ss=!0;var n=xs(e);hs(function(){var r=!1;try{r=us()}finally{if(Ss=!1,e=n-xs(),!_s())return;r?t.run(1e3):e>0?t.run(e):t.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,ys)};document.body?t():Jo.addEventListener(`DOMContentLoaded`,t)},e.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),bs.forEach(function(t){return Jo.addEventListener(t,e.listener,!0)}))},e.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),bs.forEach(function(t){return Jo.removeEventListener(t,e.listener,!0)}),this.stopped=!0)},e}(),ws=new Cs,Ts=function(e){!gs&&e>0&&ws.start(),gs+=e,!gs&&ws.stop()},Es=function(e){return!Wo(e)&&!qo(e)&&getComputedStyle(e).display===`inline`},Ds=function(){function e(e,t){this.target=e,this.observedBox=t||Bo.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var e=rs(this.target,this.observedBox,!0);return Es(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},e}(),Os=function(){function e(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t}return e}(),ks=new WeakMap,As=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},js=function(){function e(){}return e.connect=function(e,t){var n=new Os(e,t);ks.set(e,n)},e.observe=function(e,t,n){var r=ks.get(e),i=r.observationTargets.length===0;As(r.observationTargets,t)<0&&(i&&Fo.push(r),r.observationTargets.push(new Ds(t,n&&n.box)),Ts(1),ws.schedule())},e.unobserve=function(e,t){var n=ks.get(e),r=As(n.observationTargets,t),i=n.observationTargets.length===1;r>=0&&(i&&Fo.splice(Fo.indexOf(n),1),n.observationTargets.splice(r,1),Ts(-1))},e.disconnect=function(e){var t=this,n=ks.get(e);n.observationTargets.slice().forEach(function(n){return t.unobserve(e,n.target)}),n.activeTargets.splice(0,n.activeTargets.length)},e}(),Ms=function(){function e(e){if(arguments.length===0)throw TypeError(`Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.`);if(typeof e!=`function`)throw TypeError(`Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.`);js.connect(this,e)}return e.prototype.observe=function(e,t){if(arguments.length===0)throw TypeError(`Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.`);if(!Ko(e))throw TypeError(`Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element`);js.observe(this,e,t)},e.prototype.unobserve=function(e){if(arguments.length===0)throw TypeError(`Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.`);if(!Ko(e))throw TypeError(`Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element`);js.unobserve(this,e)},e.prototype.disconnect=function(){js.disconnect(this)},e.toString=function(){return`function ResizeObserver () { [polyfill code] }`},e}();const Ns=globalThis.ResizeObserver||Ms,Ps={duration:void 0,margin:{top:0,bottom:0,left:0,right:0},padding:{top:0,bottom:0,left:0,right:0},sizing:Po.Fit,width:void 0,height:void 0,svgDefs:void 0,ariaLabel:void 0};var Fs=class e{constructor(t){this._defaultConfig=Ps,this._isFirstRender=!0,this._renderAnimationFrameId=null,this._container=t;let n=Ao(this._container);n.attr(`role`,`figure`),this.svg=n.append(`svg`).style(`display`,`block`).attr(`xmlns`,`http://www.w3.org/2000/svg`).attr(`height`,e.DEFAULT_CONTAINER_HEIGHT).attr(`aria-hidden`,!0),this._svgDefs=this.svg.append(`defs`),this._svgDefsExternal=this.svg.append(`defs`),this.element=this.svg.node()}updateContainer(e){var t;this.prevConfig=this.config,this.config=yr(this._defaultConfig,e),e?.svgDefs!==(t=this.prevConfig)?.svgDefs&&(this._svgDefsExternal.selectAll(`*`).remove(),this._svgDefsExternal.html(e.svgDefs))}_preRender(){}_render(e){let{config:t}=this;Ao(this._container).attr(`aria-label`,t.ariaLabel),this._isFirstRender=!1}render(e=this.config.duration){let t=this.config.width||this.containerWidth,n=this.config.height||this.containerHeight;this.svg.attr(`width`,t).attr(`height`,n),this._resizeObserver||this._setUpResizeObserver(),cancelAnimationFrame(this._renderAnimationFrameId),this._renderAnimationFrameId=requestAnimationFrame(()=>{this._preRender(),this._render(e)})}get containerWidth(){return this.config.width?this.element.clientWidth:this._container.clientWidth||this._container.getBoundingClientRect().width}get containerHeight(){return this.config.height?this.element.clientHeight:this._container.clientHeight||this._container.getBoundingClientRect().height||e.DEFAULT_CONTAINER_HEIGHT}get width(){return wr(this.containerWidth-this.config.margin.left-this.config.margin.right,0,1/0)}get height(){return wr(this.containerHeight-this.config.margin.top-this.config.margin.bottom,0,1/0)}_removeAllChildren(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild)}_onResize(){let{config:e}=this,t=e.sizing===Po.Fit||e.sizing===Po.FitWidth;t&&this.render(0)}_setUpResizeObserver(){if(this._resizeObserver)return;let e=this._container.getBoundingClientRect();this._containerSize={width:e.width,height:e.height},this._resizeObserver=new Ns((e,t)=>{cancelAnimationFrame(this._resizeObserverAnimationFrameId),this._resizeObserverAnimationFrameId=requestAnimationFrame(()=>{let e=this._container.getBoundingClientRect(),t={width:e.width,height:e.height},n=!gr(this._containerSize,t);n&&t.width&&t.height&&(this._containerSize=t,this._onResize())})}),this._resizeObserver.observe(this._container)}destroy(){var e;cancelAnimationFrame(this._renderAnimationFrameId),cancelAnimationFrame(this._resizeObserverAnimationFrameId),(e=this._resizeObserver)==null||e.disconnect(),this.svg.remove()}};Fs.DEFAULT_CONTAINER_HEIGHT=300;var Is=je(((exports,t)=>{t.exports=function(e,t){t||=[0,``],e=String(e);var n=parseFloat(e,10);return t[0]=n,t[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||``,t}})),Ls=je(((exports,t)=>{var n=Is();t.exports=o;var r=a(`in`,document.body);function i(e,t){var r=n(getComputedStyle(e).getPropertyValue(t));return r[0]*o(r[1],e)}function a(e,t){var n=document.createElement(`div`);n.style.height=`128`+e,t.appendChild(n);var r=i(n,`height`)/128;return t.removeChild(n),r}function o(e,t){if(!e)return null;switch(t||=document.body,e=(e+``||`px`).trim().toLowerCase(),(t===window||t===document)&&(t=document.body),e){case`%`:return t.clientHeight/100;case`ch`:case`ex`:return a(e,t);case`em`:return i(t,`font-size`);case`rem`:return i(document.body,`font-size`);case`vw`:return window.innerWidth/100;case`vh`:return window.innerHeight/100;case`vmin`:return Math.min(window.innerWidth,window.innerHeight)/100;case`vmax`:return Math.max(window.innerWidth,window.innerHeight)/100;case`in`:return r;case`cm`:return r/2.54;case`mm`:return r/25.4;case`pt`:return r/72;case`pc`:return r/6;case`px`:return 1}var s=n(e);if(!isNaN(s[0])&&s[1]){var c=o(s[1],t);return typeof c==`number`?s[0]*c:null}return null}}));Ls();function Rs(){let e=()=>Math.floor((1+crypto.getRandomValues(new Uint32Array(1))[0])*65536).toString(16).substring(1);return`${e()+e()}-${e()}-${e()}-${e()}-${e()}${e()}${e()}`}function zs(e,t){if(!ur(e))return``;let n=e.substr(4,e.length-5);return getComputedStyle(t).getPropertyValue(n)}function Bs(e,t,n=0){let[r,i,a,o]=[e.x+n,e.y+e.height-2*n,e.x+e.width-2*n,e.y+n],[s,c,l,u]=[t.x+n,t.y+t.height-2*n,t.x+t.width-2*n,t.y+n];return!(i<u||c<o||a<s||l<r)}function Vs(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Hs(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Us(){}var Ws=.7,Gs=1/Ws,Ks=`\\s*([+-]?\\d+)\\s*`,qs=`\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*`,Js=`\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*`,Ys=/^#([0-9a-f]{3,8})$/,Xs=RegExp(`^rgb\\(${Ks},${Ks},${Ks}\\)$`),Zs=RegExp(`^rgb\\(${Js},${Js},${Js}\\)$`),Qs=RegExp(`^rgba\\(${Ks},${Ks},${Ks},${qs}\\)$`),$s=RegExp(`^rgba\\(${Js},${Js},${Js},${qs}\\)$`),ec=RegExp(`^hsl\\(${qs},${Js},${Js}\\)$`),tc=RegExp(`^hsla\\(${qs},${Js},${Js},${qs}\\)$`),nc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Vs(Us,sc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:rc,formatHex:rc,formatHex8:ic,formatHsl:ac,formatRgb:oc,toString:oc});function rc(){return this.rgb().formatHex()}function ic(){return this.rgb().formatHex8()}function ac(){return bc(this).formatHsl()}function oc(){return this.rgb().formatRgb()}function sc(e){var t,n;return e=(e+``).trim().toLowerCase(),(t=Ys.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?cc(t):n===3?new fc(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?lc(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?lc(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Xs.exec(e))?new fc(t[1],t[2],t[3],1):(t=Zs.exec(e))?new fc(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Qs.exec(e))?lc(t[1],t[2],t[3],t[4]):(t=$s.exec(e))?lc(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ec.exec(e))?yc(t[1],t[2]/100,t[3]/100,1):(t=tc.exec(e))?yc(t[1],t[2]/100,t[3]/100,t[4]):nc.hasOwnProperty(e)?cc(nc[e]):e===`transparent`?new fc(NaN,NaN,NaN,0):null}function cc(e){return new fc(e>>16&255,e>>8&255,e&255,1)}function lc(e,t,n,r){return r<=0&&(e=t=n=NaN),new fc(e,t,n,r)}function uc(e){return e instanceof Us||(e=sc(e)),e?(e=e.rgb(),new fc(e.r,e.g,e.b,e.opacity)):new fc}function dc(e,t,n,r){return arguments.length===1?uc(e):new fc(e,t,n,r??1)}function fc(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Vs(fc,dc,Hs(Us,{brighter(e){return e=e==null?Gs:Gs**+e,new fc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ws:Ws**+e,new fc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fc(_c(this.r),_c(this.g),_c(this.b),gc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pc,formatHex:pc,formatHex8:mc,formatRgb:hc,toString:hc}));function pc(){return`#${vc(this.r)}${vc(this.g)}${vc(this.b)}`}function mc(){return`#${vc(this.r)}${vc(this.g)}${vc(this.b)}${vc((isNaN(this.opacity)?1:this.opacity)*255)}`}function hc(){let e=gc(this.opacity);return`${e===1?`rgb(`:`rgba(`}${_c(this.r)}, ${_c(this.g)}, ${_c(this.b)}${e===1?`)`:`, ${e})`}`}function gc(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function _c(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function vc(e){return e=_c(e),(e<16?`0`:``)+e.toString(16)}function yc(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Sc(e,t,n,r)}function bc(e){if(e instanceof Sc)return new Sc(e.h,e.s,e.l,e.opacity);if(e instanceof Us||(e=sc(e)),!e)return new Sc;if(e instanceof Sc)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,c=(a+i)/2;return s?(o=t===a?(n-r)/s+(n<r)*6:n===a?(r-t)/s+2:(t-n)/s+4,s/=c<.5?a+i:2-a-i,o*=60):s=c>0&&c<1?0:o,new Sc(o,s,c,e.opacity)}function xc(e,t,n,r){return arguments.length===1?bc(e):new Sc(e,t,n,r??1)}function Sc(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Vs(Sc,xc,Hs(Us,{brighter(e){return e=e==null?Gs:Gs**+e,new Sc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ws:Ws**+e,new Sc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new fc(Tc(e>=240?e-240:e+120,i,r),Tc(e,i,r),Tc(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Sc(Cc(this.h),wc(this.s),wc(this.l),gc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=gc(this.opacity);return`${e===1?`hsl(`:`hsla(`}${Cc(this.h)}, ${wc(this.s)*100}%, ${wc(this.l)*100}%${e===1?`)`:`, ${e})`}`}}));function Cc(e){return e=(e||0)%360,e<0?e+360:e}function wc(e){return Math.max(0,Math.min(1,e||0))}function Tc(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ec=(globalThis==null?void 0:globalThis.UNOVIS_COLORS)||[`#4D8CFD`,`#FF6B7E`,`#F4B83E`,`#A6CC74`,`#00C19A`,`#6859BE`],Dc=(globalThis==null?void 0:globalThis.UNOVIS_COLORS_DARK)||[`#4D8CFD`,`#FF6B7E`,`#FFC16D`,`#A6CC74`,`#00C19A`,`#7887E0`],Oc=e=>`--vis-${cr(e)?`color${e%Ec.length}`:e}`;function kc(e,t=.4){let n=xc(e);return n.l*=1+t,n.formatHex()}function Ac(e,t=.4,n=.6){let r=xc(e);return r.s*=1-n,r.l*=1-t,r.formatHex()}const jc=10,Mc=[{id:`stripes-diagonal`,svg:`<path d="M-1,1 l2,-2 M0,10 l10,-10 M9,11 l2,-2" stroke="#000"/>`},{id:`dots`,svg:`<path d="m0-1.5a1 1 0 010 3m10-3a1 1 0 000 3M5 3.5a1 1 0 010 3 1 1 0 010-3M0 8.5 a1 1 0 010 3m10-3a1 1 0 000 3" fill"#000"/>`},{id:`stripes-vertical`,svg:`<path d="M 5,-1 L5,11" stroke="#000"/>`},{id:`crosshatch`,svg:`<path d="M0 0L10 10ZM10 0L0 10Z" stroke="#000"/>`},{id:`waves`,svg:`<path d="M0 4Q2.5 1 5 4 7.5 7 10 4v2Q7.5 9 5 6 2.5 3 0 6Z" fill="#000"/>`},{id:`circles`,svg:`<circle cx="5" cy="5" r="3" stroke="#000" fill="#fff"/>`}],Nc=[{id:`circle`,marker:`<circle cx="5" cy="5" r="5"/>`,dashArray:[]},{id:`triangle`,marker:`<path d="M5,0 L10,9 L0,9Z">`,dashArray:[9,1]},{id:`diamond`,marker:`<path d="M 0 5 L5 0 L 10 5 L 5 10 L 0 5Z">`,dashArray:[2]},{id:`arrow`,marker:`<path d="M4 0 0 0 6 5 0 10 4 10 10 5Z">`,dashArray:[2,3,8,3]},{id:`square`,marker:`<rect x="1" y="1" width="8" height="8"/>`,dashArray:[6]},{id:`star`,marker:`<path d="m2 9 3-9 3 9L0 3h10Z"/>`,dashArray:[1,6]}];function Pc(e){return`vis-${`pattern-${e.svg?`fill`:`marker`}`}-${e.id}`}const Fc=e=>`<mask id="${Pc(e)}">
    <pattern id="${e.id}" viewBox="0 0 10 10" width="${jc}" height="${jc}" patternUnits="userSpaceOnUse">
      <rect width="100%" height="100%" fill="#fff"/>
      ${e.svg}
    </pattern>
    <rect x="-50%" y="-50%" width="200%" height="200%" fill="url(#${e.id})"/>
  </mask>`,Ic=(e,t)=>`<marker id="${Pc(e)}"
    fill="var(${Oc(t)})"
    markerUnits="userSpaceOnUse"
    refX="5"
    refY="5"
    markerWidth="${jc}"
    markerHeight="${jc}">
    ${e.marker}
  </marker>`;function Lc(){let e=Mc.map(Fc).concat(Nc.map(Ic)).join(``),t=document.createElementNS(`http://www.w3.org/2000/svg`,`svg`);t.setAttribute(`height`,`100%`),t.setAttribute(`width`,`100%`),t.style.position=`fixed`,t.style.zIndex=`-99999999`,t.innerHTML=`<defs>${e}</defs>`,document.body.appendChild(t)}typeof window<`u`&&Lc(),globalThis!=null&&globalThis.UNOVIS_ICON_FONT_FAMILY;const Rc=(globalThis==null?void 0:globalThis.UNOVIS_FONT_W2H_RATIO_DEFAULT)||.5,zc=(globalThis==null?void 0:globalThis.UNOVIS_TEXT_SEPARATOR_DEFAULT)||[` `,`-`,`.`,`,`],Bc=(globalThis==null?void 0:globalThis.UNOVIS_TEXT_HYPHEN_CHARACTER_DEFAULT)||`-`,Vc=(globalThis==null?void 0:globalThis.UNOVIS_TEXT_DEFAULT)||{text:``,fontSize:12,fontFamily:`var(--vis-font-family)`,lineHeight:1.25,marginTop:0,marginBottom:0};kn`
  :root {
    label: vis-root-styles;
    --vis-font-family: Inter, Arial, "Helvetica Neue", Helvetica, sans-serif;
    --vis-font-wh-ratio: ${Rc};
    --vis-color-main: var(${Oc(0)});
    --vis-color-main-light: ${kc(Ec[0])};
    --vis-color-main-dark: ${Ac(Ec[0])};
    --vis-color-grey: #2a2a2a;
    ${Ec.map((e,t)=>`${Oc(t)}: ${e};`)}
    ${Dc.map((e,t)=>`--vis-dark-color${t}: ${e};`)}
    ${Mc.map((e,t)=>`
      --${Pc(e)}: url(#${Pc(e)});
      --vis-pattern-fill${t}: var(--${Pc(e)});
    `)}
    ${Nc.map((e,t)=>{var n;return`
      --${Pc(e)}: url(#${Pc(e)});
      --vis-pattern-marker${t}: var(--${Pc(e)});
      --vis-pattern-dasharray${t}: ${(n=e.dashArray)?.join(` `)};
    `})}

    body.theme-dark {
      ${Ec.map((e,t)=>`${Oc(t)}: var(--vis-dark-color${t});`)}
    }

    body.theme-patterns {
      ${Mc.map((e,t)=>`path[style*="fill: var(${Oc(t)})"]  {
        mask: var(--vis-pattern-fill${t});
      }`)}
      ${Nc.map((e,t)=>`
      path[stroke="var(${Oc(t)})"]:not([style*="fill"]),
      path[style*="stroke: var(${Oc(t)})"]:not([style*="fill"]) {
        marker: var(--vis-pattern-marker${t});
        stroke-dasharray: var(--vis-pattern-dasharray${t});
      }
    `)}
}
`;function Hc(e=window==null?void 0:window.document.body){return e?+zs(`var(--vis-font-wh-ratio)`,e):Rc}var Uc=zr(`start`,`end`,`cancel`,`interrupt`),Wc=[],Gc=0,Kc=1,qc=2,Jc=3,Yc=4,Xc=5,Zc=6;function Qc(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;nl(e,n,{name:t,index:r,group:i,on:Uc,tween:Wc,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Gc})}function $c(e,t){var n=tl(e,t);if(n.state>Gc)throw Error(`too late; already scheduled`);return n}function el(e,t){var n=tl(e,t);if(n.state>Jc)throw Error(`too late; already running`);return n}function tl(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw Error(`transition not found`);return n}function nl(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=ei(a,0,n.time);function a(e){n.state=Kc,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}function o(a){var l,u,d,f;if(n.state!==Kc)return c();for(l in r){if(f=r[l],f.name!==n.name)continue;if(f.state===Jc)return oi(o);f.state===Yc?(f.state=Zc,f.timer.stop(),f.on.call(`interrupt`,e,e.__data__,f.index,f.group),delete r[l]):+l<t&&(f.state=Zc,f.timer.stop(),f.on.call(`cancel`,e,e.__data__,f.index,f.group),delete r[l])}if(oi(function(){n.state===Jc&&(n.state=Yc,n.timer.restart(s,n.delay,n.time),s(a))}),n.state=qc,n.on.call(`start`,e,e.__data__,n.index,n.group),n.state===qc){for(n.state=Jc,i=Array(d=n.tween.length),l=0,u=-1;l<d;++l)(f=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(i[++u]=f);i.length=u+1}}function s(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(c),n.state=Xc,1),a=-1,o=i.length;++a<o;)i[a].call(e,r);n.state===Xc&&(n.on.call(`end`,e,e.__data__,n.index,n.group),c())}function c(){for(var i in n.state=Zc,n.timer.stop(),delete r[t],r)return;delete e.__transition}}function rl(e,t){var n=e.__transition,r,i,a=!0,o;if(n){for(o in t=t==null?null:t+``,n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>qc&&r.state<Xc,r.state=Zc,r.timer.stop(),r.on.call(i?`interrupt`:`cancel`,e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function il(e){return this.each(function(){rl(this,e)})}function al(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}function ol(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,s=r<t-1?e[r+2]:2*a-i;return al((n-r/t)*t,o,i,a,s)}}function sl(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],a=e[r%t],o=e[(r+1)%t],s=e[(r+2)%t];return al((n-r/t)*t,i,a,o,s)}}var cl=e=>()=>e;function ll(e,t){return function(n){return e+n*t}}function ul(e,t,n){return e**=+n,t=t**+n-e,n=1/n,function(r){return(e+r*t)**+n}}function dl(e){return(e=+e)==1?fl:function(t,n){return n-t?ul(t,n,e):cl(isNaN(t)?n:t)}}function fl(e,t){var n=t-e;return n?ll(e,n):cl(isNaN(e)?t:e)}var pl=(function e(t){var n=dl(t);function r(e,t){var r=n((e=dc(e)).r,(t=dc(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=fl(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+``}}return r.gamma=e,r})(1);function ml(e){return function(t){var n=t.length,r=Array(n),i=Array(n),a=Array(n),o,s;for(o=0;o<n;++o)s=dc(t[o]),r[o]=s.r||0,i[o]=s.g||0,a[o]=s.b||0;return r=e(r),i=e(i),a=e(a),s.opacity=1,function(e){return s.r=r(e),s.g=i(e),s.b=a(e),s+``}}}ml(ol),ml(sl);function hl(e,t){t||=[];var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function gl(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function _l(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=Array(r),a=Array(n),o;for(o=0;o<r;++o)i[o]=El(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(e){for(o=0;o<r;++o)a[o]=i[o](e);return a}}function vl(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function yl(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function bl(e,t){var n={},r={},i;for(i in(typeof e!=`object`||!e)&&(e={}),(typeof t!=`object`||!t)&&(t={}),t)i in e?n[i]=El(e[i],t[i]):r[i]=t[i];return function(e){for(i in n)r[i]=n[i](e);return r}}var xl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Sl=new RegExp(xl.source,`g`);function Cl(e){return function(){return e}}function wl(e){return function(t){return e(t)+``}}function Tl(e,t){var n=xl.lastIndex=Sl.lastIndex=0,r,i,a,o=-1,s=[],c=[];for(e+=``,t+=``;(r=xl.exec(e))&&(i=Sl.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,c.push({i:o,x:yl(r,i)})),n=Sl.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?c[0]?wl(c[0].x):Cl(t):(t=c.length,function(e){for(var n=0,r;n<t;++n)s[(r=c[n]).i]=r.x(e);return s.join(``)})}function El(e,t){var n=typeof t,r;return t==null||n===`boolean`?cl(t):(n===`number`?yl:n===`string`?(r=sc(t))?(t=r,pl):Tl:t instanceof sc?pl:t instanceof Date?vl:gl(t)?hl:Array.isArray(t)?_l:typeof t.valueOf!=`function`&&typeof t.toString!=`function`||isNaN(t)?bl:yl)(e,t)}function Dl(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Ol=180/Math.PI,kl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Al(e,t,n,r,i,a){var o,s,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Ol,skewX:Math.atan(c)*Ol,scaleX:o,scaleY:s}}var jl;function Ml(e){let t=new(typeof DOMMatrix==`function`?DOMMatrix:WebKitCSSMatrix)(e+``);return t.isIdentity?kl:Al(t.a,t.b,t.c,t.d,t.e,t.f)}function Nl(e){return e==null||(jl||=document.createElementNS(`http://www.w3.org/2000/svg`,`g`),jl.setAttribute(`transform`,e),!(e=jl.transform.baseVal.consolidate()))?kl:(e=e.matrix,Al(e.a,e.b,e.c,e.d,e.e,e.f))}function Pl(e,t,n,r){function i(e){return e.length?e.pop()+` `:``}function a(e,r,i,a,o,s){if(e!==i||r!==a){var c=o.push(`translate(`,null,t,null,n);s.push({i:c-4,x:yl(e,i)},{i:c-2,x:yl(r,a)})}else (i||a)&&o.push(`translate(`+i+t+a+n)}function o(e,t,n,a){e===t?t&&n.push(i(n)+`rotate(`+t+r):(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+`rotate(`,null,r)-2,x:yl(e,t)}))}function s(e,t,n,a){e===t?t&&n.push(i(n)+`skewX(`+t+r):a.push({i:n.push(i(n)+`skewX(`,null,r)-2,x:yl(e,t)})}function c(e,t,n,r,a,o){if(e!==n||t!==r){var s=a.push(i(a)+`scale(`,null,`,`,null,`)`);o.push({i:s-4,x:yl(e,n)},{i:s-2,x:yl(t,r)})}else (n!==1||r!==1)&&a.push(i(a)+`scale(`+n+`,`+r+`)`)}return function(t,n){var r=[],i=[];return t=e(t),n=e(n),a(t.translateX,t.translateY,n.translateX,n.translateY,r,i),o(t.rotate,n.rotate,r,i),s(t.skewX,n.skewX,r,i),c(t.scaleX,t.scaleY,n.scaleX,n.scaleY,r,i),t=n=null,function(e){for(var t=-1,n=i.length,a;++t<n;)r[(a=i[t]).i]=a.x(e);return r.join(``)}}}var Fl=Pl(Ml,`px, `,`px)`,`deg)`),Il=Pl(Nl,`, `,`)`,`)`);function Ll(e,t){t===void 0&&(t=e,e=El);for(var n=0,r=t.length-1,i=t[0],a=Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return a[t](e-t)}}function Rl(e,t){var n,r;return function(){var i=el(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function zl(e,t,n){var r,i;if(typeof n!=`function`)throw Error();return function(){var a=el(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===t){i[c]=s;break}c===l&&i.push(s)}a.tween=i}}function Bl(e,t){var n=this._id;if(e+=``,arguments.length<2){for(var r=tl(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Rl:zl)(n,e,t))}function Vl(e,t,n){var r=e._id;return e.each(function(){var e=el(this,r);(e.value||={})[t]=n.apply(this,arguments)}),function(e){return tl(e,r).value[t]}}function Hl(e,t){var n;return(typeof t==`number`?yl:t instanceof sc?pl:(n=sc(t))?(t=n,pl):Tl)(e,t)}function Ul(e){return function(){this.removeAttribute(e)}}function Wl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Gl(e,t,n){var r,i=n+``,a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function Kl(e,t,n){var r,i=n+``,a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function ql(e,t,n){var r,i,a;return function(){var o,s=n(this),c;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=s+``,o===c?null:o===r&&c===i?a:(i=c,a=t(r=o,s)))}}function Jl(e,t,n){var r,i,a;return function(){var o,s=n(this),c;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=s+``,o===c?null:o===r&&c===i?a:(i=c,a=t(r=o,s)))}}function Yl(e,t){var n=ji(e),r=n===`transform`?Il:Hl;return this.attrTween(e,typeof t==`function`?(n.local?Jl:ql)(n,r,Vl(this,`attr.`+e,t)):t==null?(n.local?Wl:Ul)(n):(n.local?Kl:Gl)(n,r,t))}function Xl(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Zl(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Ql(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Zl(e,i)),n}return i._value=t,i}function $l(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Xl(e,i)),n}return i._value=t,i}function eu(e,t){var n=`attr.`+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!=`function`)throw Error();var r=ji(e);return this.tween(n,(r.local?Ql:$l)(r,t))}function tu(e,t){return function(){$c(this,e).delay=+t.apply(this,arguments)}}function nu(e,t){return t=+t,function(){$c(this,e).delay=t}}function ru(e){var t=this._id;return arguments.length?this.each((typeof e==`function`?tu:nu)(t,e)):tl(this.node(),t).delay}function iu(e,t){return function(){el(this,e).duration=+t.apply(this,arguments)}}function au(e,t){return t=+t,function(){el(this,e).duration=t}}function ou(e){var t=this._id;return arguments.length?this.each((typeof e==`function`?iu:au)(t,e)):tl(this.node(),t).duration}function su(e,t){if(typeof t!=`function`)throw Error();return function(){el(this,e).ease=t}}function cu(e){var t=this._id;return arguments.length?this.each(su(t,e)):tl(this.node(),t).ease}function lu(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!=`function`)throw Error();el(this,e).ease=n}}function uu(e){if(typeof e!=`function`)throw Error();return this.each(lu(this._id,e))}function du(e){typeof e!=`function`&&(e=Ui(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],c,l=0;l<o;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&s.push(c);return new Bu(r,this._parents,this._name,this._id)}function fu(e){if(e._id!==this._id)throw Error();for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=Array(r),s=0;s<a;++s)for(var c=t[s],l=n[s],u=c.length,d=o[s]=Array(u),f,p=0;p<u;++p)(f=c[p]||l[p])&&(d[p]=f);for(;s<r;++s)o[s]=t[s];return new Bu(o,this._parents,this._name,this._id)}function pu(e){return(e+``).trim().split(/^|\s+/).every(function(e){var t=e.indexOf(`.`);return t>=0&&(e=e.slice(0,t)),!e||e===`start`})}function mu(e,t,n){var r,i,a=pu(t)?$c:el;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}function hu(e,t){var n=this._id;return arguments.length<2?tl(this.node(),n).on.on(e):this.each(mu(n,e,t))}function gu(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function _u(){return this.on(`end.remove`,gu(this._id))}function vu(e){var t=this._name,n=this._id;typeof e!=`function`&&(e=Ii(e));for(var r=this._groups,i=r.length,a=Array(i),o=0;o<i;++o)for(var s=r[o],c=s.length,l=a[o]=Array(c),u,d,f=0;f<c;++f)(u=s[f])&&(d=e.call(u,u.__data__,f,s))&&(`__data__`in u&&(d.__data__=u.__data__),l[f]=d,Qc(l[f],t,n,f,l,tl(u,n)));return new Bu(a,this._parents,t,n)}function yu(e){var t=this._name,n=this._id;typeof e!=`function`&&(e=Bi(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var c=r[s],l=c.length,u,d=0;d<l;++d)if(u=c[d]){for(var f=e.call(u,u.__data__,d,c),p,m=tl(u,n),h=0,g=f.length;h<g;++h)(p=f[h])&&Qc(p,t,n,h,f,m);a.push(f),o.push(u)}return new Bu(a,o,t,n)}var bu=ko.prototype.constructor;function xu(){return new bu(this._groups,this._parents)}function Su(e,t){var n,r,i;return function(){var a=Na(this,e),o=(this.style.removeProperty(e),Na(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function Cu(e){return function(){this.style.removeProperty(e)}}function wu(e,t,n){var r,i=n+``,a;return function(){var o=Na(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function Tu(e,t,n){var r,i,a;return function(){var o=Na(this,e),s=n(this),c=s+``;return s??(c=s=(this.style.removeProperty(e),Na(this,e))),o===c?null:o===r&&c===i?a:(i=c,a=t(r=o,s))}}function Eu(e,t){var n,r,i,a=`style.`+t,o=`end.`+a,s;return function(){var c=el(this,e),l=c.on,u=c.value[a]==null?s||=Cu(t):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(o,i=u),c.on=r}}function Du(e,t,n){var r=(e+=``)==`transform`?Fl:Hl;return t==null?this.styleTween(e,Su(e,r)).on(`end.style.`+e,Cu(e)):typeof t==`function`?this.styleTween(e,Tu(e,r,Vl(this,`style.`+e,t))).each(Eu(this._id,e)):this.styleTween(e,wu(e,r,t),n).on(`end.style.`+e,null)}function Ou(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function ku(e,t,n){var r,i;function a(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&Ou(e,a,n)),r}return a._value=t,a}function Au(e,t,n){var r=`style.`+(e+=``);if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!=`function`)throw Error();return this.tween(r,ku(e,t,n??``))}function ju(e){return function(){this.textContent=e}}function Mu(e){return function(){var t=e(this);this.textContent=t??``}}function Nu(e){return this.tween(`text`,typeof e==`function`?Mu(Vl(this,`text`,e)):ju(e==null?``:e+``))}function Pu(e){return function(t){this.textContent=e.call(this,t)}}function Fu(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Pu(r)),t}return r._value=e,r}function Iu(e){var t=`text`;if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!=`function`)throw Error();return this.tween(t,Fu(e))}function Lu(){for(var e=this._name,t=this._id,n=Hu(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,c,l=0;l<s;++l)if(c=o[l]){var u=tl(c,t);Qc(c,e,n,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Bu(r,this._parents,e,n)}function Ru(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},c={value:function(){--i===0&&a()}};n.each(function(){var n=el(this,r),i=n.on;i!==e&&(t=(e=i).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),n.on=t}),i===0&&a()})}var zu=0;function Bu(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Vu(e){return ko().transition(e)}function Hu(){return++zu}var Uu=ko.prototype;Bu.prototype=Vu.prototype={constructor:Bu,select:vu,selectAll:yu,selectChild:Uu.selectChild,selectChildren:Uu.selectChildren,filter:du,merge:fu,selection:xu,transition:Lu,call:Uu.call,nodes:Uu.nodes,node:Uu.node,size:Uu.size,empty:Uu.empty,each:Uu.each,on:hu,attr:Yl,attrTween:eu,style:Du,styleTween:Au,text:Nu,textTween:Iu,remove:_u,tween:Bl,delay:ru,duration:ou,ease:cu,easeVarying:uu,end:Ru,[Symbol.iterator]:Uu[Symbol.iterator]};const Wu=e=>+e;function Gu(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Ku={time:null,delay:0,duration:250,ease:Gu};function qu(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw Error(`transition ${t} not found`);return n}function Ju(e){var t,n;e instanceof Bu?(t=e._id,e=e._name):(t=Hu(),(n=Ku).time=Zr(),e=e==null?null:e+``);for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,c,l=0;l<s;++l)(c=o[l])&&Qc(c,e,t,l,o,n||qu(c,t));return new Bu(r,this._parents,e,t)}ko.prototype.interrupt=il,ko.prototype.transition=Ju;function G(e,t,n){if(e.nodes().forEach(e=>rl(e)),t){let r=e.transition().duration(t);return n&&r.ease(n),r}else return e}var Yu=class{constructor(e){this.data=e}get data(){return this._data}set data(e){this._data=e}},K;(function(e){e.X=`x`,e.Y=`y`})(K||={});function Xu(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Zu(e,t){switch(arguments.length){case 0:break;case 1:typeof e==`function`?this.interpolator(e):this.range(e);break;default:this.domain(e),typeof t==`function`?this.interpolator(t):this.range(t);break}return this}const Qu=Symbol(`implicit`);function $u(){var e=new Bn,t=[],n=[],r=Qu;function i(i){let a=e.get(i);if(a===void 0){if(r!==Qu)return r;e.set(i,a=t.push(i)-1)}return n[a%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Bn;for(let r of n){if(e.has(r))continue;e.set(r,t.push(r)-1)}return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return $u(t,n).unknown(r)},Xu.apply(i,arguments),i}function ed(){var e=$u().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,s=!1,c=0,l=0,u=.5;delete e.unknown;function d(){var e=t().length,d=i<r,f=d?i:r,p=d?r:i;a=(p-f)/Math.max(1,e-c+l*2),s&&(a=Math.floor(a)),f+=(p-f-a*(e-c))*u,o=a*(1-c),s&&(f=Math.round(f),o=Math.round(o));var m=ir(e).map(function(e){return f+a*e});return n(d?m.reverse():m)}return e.domain=function(e){return arguments.length?(t(e),d()):t()},e.range=function(e){return arguments.length?([r,i]=e,r=+r,i=+i,d()):[r,i]},e.rangeRound=function(e){return[r,i]=e,r=+r,i=+i,s=!0,d()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(e){return arguments.length?(s=!!e,d()):s},e.padding=function(e){return arguments.length?(c=Math.min(1,l=+e),d()):c},e.paddingInner=function(e){return arguments.length?(c=Math.min(1,e),d()):c},e.paddingOuter=function(e){return arguments.length?(l=+e,d()):l},e.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),d()):u},e.copy=function(){return ed(t(),[r,i]).round(s).paddingInner(c).paddingOuter(l).align(u)},Xu.apply(d(),arguments)}function td(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return td(t())},e}function nd(){return td(ed.apply(null,arguments).paddingInner(1))}function rd(e){return function(){return e}}function id(e){return+e}var ad=[0,1];function od(e){return e}function sd(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:rd(isNaN(t)?NaN:.5)}function cd(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}function ld(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=sd(i,r),a=n(o,a)):(r=sd(r,i),a=n(a,o)),function(e){return a(r(e))}}function ud(e,t,n){var r=Math.min(e.length,t.length)-1,i=Array(r),a=Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=sd(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(t){var n=Rn(e,t,1,r)-1;return a[n](i[n](t))}}function dd(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function fd(){var e=ad,t=ad,n=El,r,i,a,o=od,s,c,l;function u(){var n=Math.min(e.length,t.length);return o!==od&&(o=cd(e[0],e[n-1])),s=n>2?ud:ld,c=l=null,d}function d(i){return i==null||isNaN(i=+i)?a:(c||=s(e.map(r),t,n))(r(o(i)))}return d.invert=function(n){return o(i((l||=s(t,e.map(r),yl))(n)))},d.domain=function(t){return arguments.length?(e=Array.from(t,id),u()):e.slice()},d.range=function(e){return arguments.length?(t=Array.from(e),u()):t.slice()},d.rangeRound=function(e){return t=Array.from(e),n=Dl,u()},d.clamp=function(e){return arguments.length?(o=e?!0:od,u()):o!==od},d.interpolate=function(e){return arguments.length?(n=e,u()):n},d.unknown=function(e){return arguments.length?(a=e,d):a},function(e,t){return r=e,i=t,u()}}function pd(){return fd()(od,od)}function md(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString(`en`).replace(/,/g,``):e.toString(10)}function hd(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf(`e`))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function gd(e){return e=hd(Math.abs(e)),e?e[1]:NaN}function _d(e,t){return function(n,r){for(var i=n.length,a=[],o=0,s=e[0],c=0;i>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),a.push(n.substring(i-=s,i+s)),!((c+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}function vd(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}var yd=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bd(e){if(!(t=yd.exec(e)))throw Error(`invalid format: `+e);var t;return new xd({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}bd.prototype=xd.prototype;function xd(e){this.fill=e.fill===void 0?` `:e.fill+``,this.align=e.align===void 0?`>`:e.align+``,this.sign=e.sign===void 0?`-`:e.sign+``,this.symbol=e.symbol===void 0?``:e.symbol+``,this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?``:e.type+``}xd.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?`0`:``)+(this.width===void 0?``:Math.max(1,this.width|0))+(this.comma?`,`:``)+(this.precision===void 0?``:`.`+Math.max(0,this.precision|0))+(this.trim?`~`:``)+this.type};function Sd(e){out:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case`.`:r=i=n;break;case`0`:r===0&&(r=n),i=n;break;default:if(!+e[n])break out;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Cd;function wd(e,t){var n=hd(e,t);if(!n)return e+``;var r=n[0],i=n[1],a=i-(Cd=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+Array(a-o+1).join(`0`):a>0?r.slice(0,a)+`.`+r.slice(a):`0.`+Array(1-a).join(`0`)+hd(e,Math.max(0,t+a-1))[0]}function Td(e,t){var n=hd(e,t);if(!n)return e+``;var r=n[0],i=n[1];return i<0?`0.`+Array(-i).join(`0`)+r:r.length>i+1?r.slice(0,i+1)+`.`+r.slice(i+1):r+Array(i-r.length+2).join(`0`)}var Ed={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+``,d:md,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Td(e*100,t),r:Td,s:wd,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Dd(e){return e}var Od=Array.prototype.map,kd=[`y`,`z`,`a`,`f`,`p`,`n`,`µ`,`m`,``,`k`,`M`,`G`,`T`,`P`,`E`,`Z`,`Y`];function Ad(e){var t=e.grouping===void 0||e.thousands===void 0?Dd:_d(Od.call(e.grouping,Number),e.thousands+``),n=e.currency===void 0?``:e.currency[0]+``,r=e.currency===void 0?``:e.currency[1]+``,i=e.decimal===void 0?`.`:e.decimal+``,a=e.numerals===void 0?Dd:vd(Od.call(e.numerals,String)),o=e.percent===void 0?`%`:e.percent+``,s=e.minus===void 0?`−`:e.minus+``,c=e.nan===void 0?`NaN`:e.nan+``;function l(e){e=bd(e);var l=e.fill,u=e.align,d=e.sign,f=e.symbol,p=e.zero,m=e.width,h=e.comma,g=e.precision,_=e.trim,v=e.type;v===`n`?(h=!0,v=`g`):Ed[v]||(g===void 0&&(g=12),_=!0,v=`g`),(p||l===`0`&&u===`=`)&&(p=!0,l=`0`,u=`=`);var y=f===`$`?n:f===`#`&&/[boxX]/.test(v)?`0`+v.toLowerCase():``,b=f===`$`?r:/[%p]/.test(v)?o:``,x=Ed[v],S=/[defgprs%]/.test(v);g=g===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g));function C(e){var n=y,r=b,o,f,C;if(v===`c`)r=x(e)+r,e=``;else{e=+e;var w=e<0||1/e<0;if(e=isNaN(e)?c:x(Math.abs(e),g),_&&(e=Sd(e)),w&&+e==0&&d!==`+`&&(w=!1),n=(w?d===`(`?d:s:d===`-`||d===`(`?``:d)+n,r=(v===`s`?kd[8+Cd/3]:``)+r+(w&&d===`(`?`)`:``),S){for(o=-1,f=e.length;++o<f;)if(C=e.charCodeAt(o),48>C||C>57){r=(C===46?i+e.slice(o+1):e.slice(o))+r,e=e.slice(0,o);break}}}h&&!p&&(e=t(e,1/0));var T=n.length+e.length+r.length,E=T<m?Array(m-T+1).join(l):``;switch(h&&p&&(e=t(E+e,E.length?m-r.length:1/0),E=``),u){case`<`:e=n+e+r+E;break;case`=`:e=n+E+e+r;break;case`^`:e=E.slice(0,T=E.length>>1)+n+e+r+E.slice(T);break;default:e=E+n+e+r;break}return a(e)}return C.toString=function(){return e+``},C}function u(e,t){var n=l((e=bd(e),e.type=`f`,e)),r=Math.max(-8,Math.min(8,Math.floor(gd(t)/3)))*3,i=10**-r,a=kd[8+r/3];return function(e){return n(i*e)+a}}return{format:l,formatPrefix:u}}var jd,Md,Nd;Pd({thousands:`,`,grouping:[3],currency:[`$`,``]});function Pd(e){return jd=Ad(e),Md=jd.format,Nd=jd.formatPrefix,jd}function Fd(e){return Math.max(0,-gd(Math.abs(e)))}function Id(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(gd(t)/3)))*3-gd(Math.abs(e)))}function Ld(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,gd(t)-gd(e))+1}function Rd(e,t,n,r){var i=Zn(e,t,n),a;switch(r=bd(r??`,f`),r.type){case`s`:var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=Id(i,o))&&(r.precision=a),Nd(r,o);case``:case`e`:case`g`:case`p`:case`r`:r.precision==null&&!isNaN(a=Ld(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type===`e`));break;case`f`:case`%`:r.precision==null&&!isNaN(a=Fd(i))&&(r.precision=a-(r.type===`%`)*2);break}return Md(r)}function zd(e){var t=e.domain;return e.ticks=function(e){var n=t();return Yn(n[0],n[n.length-1],e??10)},e.tickFormat=function(e,n){var r=t();return Rd(r[0],r[r.length-1],e??10,n)},e.nice=function(n){n??=10;var r=t(),i=0,a=r.length-1,o=r[i],s=r[a],c,l,u=10;for(s<o&&(l=o,o=s,s=l,l=i,i=a,a=l);u-- >0;){if(l=Xn(o,s,n),l===c)return r[i]=o,r[a]=s,t(r);if(l>0)o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l;else if(l<0)o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l;else break;c=l}return e},e}function Bd(){var e=pd();return e.copy=function(){return dd(e,Bd())},Xu.apply(e,arguments),zd(e)}function Vd(e){var t;function n(e){return e==null||isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Array.from(t,id),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return Vd(e).unknown(t)},e=arguments.length?Array.from(e,id):[0,1],zd(n)}function Hd(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function Ud(e){return Math.log(e)}function Wd(e){return Math.exp(e)}function Gd(e){return-Math.log(-e)}function Kd(e){return-Math.exp(-e)}function qd(e){return isFinite(e)?+(`1e`+e):e<0?0:e}function Jd(e){return e===10?qd:e===Math.E?Math.exp:t=>e**+t}function Yd(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Xd(e){return(t,n)=>-e(-t,n)}function Zd(e){let t=e(Ud,Wd),n=t.domain,r=10,i,a;function o(){return i=Yd(r),a=Jd(r),n()[0]<0?(i=Xd(i),a=Xd(a),e(Gd,Kd)):e(Ud,Wd),t}return t.base=function(e){return arguments.length?(r=+e,o()):r},t.domain=function(e){return arguments.length?(n(e),o()):n()},t.ticks=e=>{let t=n(),o=t[0],s=t[t.length-1],c=s<o;c&&([o,s]=[s,o]);let l=i(o),u=i(s),d,f,p=e==null?10:+e,m=[];if(!(r%1)&&u-l<p){if(l=Math.floor(l),u=Math.ceil(u),o>0){for(;l<=u;++l)for(d=1;d<r;++d)if(f=l<0?d/a(-l):d*a(l),!(f<o)){if(f>s)break;m.push(f)}}else for(;l<=u;++l)for(d=r-1;d>=1;--d)if(f=l>0?d/a(-l):d*a(l),!(f<o)){if(f>s)break;m.push(f)}m.length*2<p&&(m=Yn(o,s,p))}else m=Yn(l,u,Math.min(u-l,p)).map(a);return c?m.reverse():m},t.tickFormat=(e,n)=>{if(e??=10,n??=r===10?`s`:`,`,typeof n!=`function`&&(!(r%1)&&(n=bd(n)).precision==null&&(n.trim=!0),n=Md(n)),e===1/0)return n;let o=Math.max(1,r*e/t.ticks().length);return e=>{let t=e/a(Math.round(i(e)));return t*r<r-.5&&(t*=r),t<=o?n(e):``}},t.nice=()=>n(Hd(n(),{floor:e=>a(Math.floor(i(e))),ceil:e=>a(Math.ceil(i(e)))})),t}function Qd(){let e=Zd(fd()).domain([1,10]);return e.copy=()=>dd(e,Qd()).base(e.base()),Xu.apply(e,arguments),e}function $d(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ef(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function tf(e){var t=1,n=e($d(t),ef(t));return n.constant=function(n){return arguments.length?e($d(t=+n),ef(t)):t},zd(n)}function nf(){var e=tf(fd());return e.copy=function(){return dd(e,nf()).constant(e.constant())},Xu.apply(e,arguments)}function rf(e){return function(t){return t<0?-((-t)**+e):t**+e}}function af(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function sf(e){return e<0?-e*e:e*e}function cf(e){var t=e(od,od),n=1;function r(){return n===1?e(od,od):n===.5?e(af,sf):e(rf(n),rf(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,r()):n},zd(t)}function lf(){var e=cf(fd());return e.copy=function(){return dd(e,lf()).exponent(e.exponent())},Xu.apply(e,arguments),e}function uf(){return lf.apply(null,arguments).exponent(.5)}function df(){var e=[],t=[],n=[],r;function i(){var r=0,i=Math.max(1,t.length);for(n=Array(i-1);++r<i;)n[r-1]=er(e,r/i);return a}function a(e){return e==null||isNaN(e=+e)?r:t[Rn(n,e)]}return a.invertExtent=function(r){var i=t.indexOf(r);return i<0?[NaN,NaN]:[i>0?n[i-1]:e[0],i<n.length?n[i]:e[e.length-1]]},a.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)n!=null&&!isNaN(n=+n)&&e.push(n);return e.sort(An),i()},a.range=function(e){return arguments.length?(t=Array.from(e),i()):t.slice()},a.unknown=function(e){return arguments.length?(r=e,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return df().domain(e).range(t).unknown(r)},Xu.apply(a,arguments)}function ff(){var e=0,t=1,n=1,r=[.5],i=[0,1],a;function o(e){return e!=null&&e<=e?i[Rn(r,e,0,n)]:a}function s(){var i=-1;for(r=Array(n);++i<n;)r[i]=((i+1)*t-(i-n)*e)/(n+1);return o}return o.domain=function(n){return arguments.length?([e,t]=n,e=+e,t=+t,s()):[e,t]},o.range=function(e){return arguments.length?(n=(i=Array.from(e)).length-1,s()):i.slice()},o.invertExtent=function(a){var o=i.indexOf(a);return o<0?[NaN,NaN]:o<1?[e,r[0]]:o>=n?[r[n-1],t]:[r[o-1],r[o]]},o.unknown=function(e){return arguments.length&&(a=e),o},o.thresholds=function(){return r.slice()},o.copy=function(){return ff().domain([e,t]).range(i).unknown(a)},Xu.apply(zd(o),arguments)}function pf(){var e=[.5],t=[0,1],n,r=1;function i(i){return i!=null&&i<=i?t[Rn(e,i,0,r)]:n}return i.domain=function(n){return arguments.length?(e=Array.from(n),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(n){return arguments.length?(t=Array.from(n),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(n){var r=t.indexOf(n);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(n=e,i):n},i.copy=function(){return pf().domain(e).range(t).unknown(n)},Xu.apply(i,arguments)}const mf=new Date,hf=new Date;function q(e,t,n,r){function i(t){return e(t=arguments.length===0?new Date:new Date(+t)),t}return i.floor=t=>(e(t=new Date(+t)),t),i.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),i.round=e=>{let t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=(e,n)=>(t(e=new Date(+e),n==null?1:Math.floor(n)),e),i.range=(n,r,a)=>{let o=[];if(n=i.ceil(n),a=a==null?1:Math.floor(a),!(n<r)||!(a>0))return o;let s;do o.push(s=new Date(+n)),t(n,a),e(n);while(s<n&&n<r);return o},i.filter=n=>q(t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},(e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}),n&&(i.count=(t,r)=>(mf.setTime(+t),hf.setTime(+r),e(mf),e(hf),Math.floor(n(mf,hf))),i.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?i.filter(r?t=>r(t)%e===0:t=>i.count(0,t)%e===0):i)),i}const gf=q(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);gf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?q(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):gf),gf.range;const _f=1e3,vf=_f*60,yf=vf*60,bf=yf*24,xf=bf*7,Sf=bf*30,Cf=bf*365,wf=q(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*_f)},(e,t)=>(t-e)/_f,e=>e.getUTCSeconds());wf.range;const Tf=q(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*_f)},(e,t)=>{e.setTime(+e+t*vf)},(e,t)=>(t-e)/vf,e=>e.getMinutes());Tf.range;const Ef=q(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*vf)},(e,t)=>(t-e)/vf,e=>e.getUTCMinutes());Ef.range;const Df=q(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*_f-e.getMinutes()*vf)},(e,t)=>{e.setTime(+e+t*yf)},(e,t)=>(t-e)/yf,e=>e.getHours());Df.range;const Of=q(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*yf)},(e,t)=>(t-e)/yf,e=>e.getUTCHours());Of.range;const kf=q(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*vf)/bf,e=>e.getDate()-1);kf.range;const Af=q(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/bf,e=>e.getUTCDate()-1);Af.range;const jf=q(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/bf,e=>Math.floor(e/bf));jf.range;function Mf(e){return q(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*vf)/xf)}const Nf=Mf(0),Pf=Mf(1),Ff=Mf(2),If=Mf(3),Lf=Mf(4),Rf=Mf(5),zf=Mf(6);Nf.range,Pf.range,Ff.range,If.range,Lf.range,Rf.range,zf.range;function Bf(e){return q(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/xf)}const Vf=Bf(0),Hf=Bf(1),Uf=Bf(2),Wf=Bf(3),Gf=Bf(4),Kf=Bf(5),qf=Bf(6);Vf.range,Hf.range,Uf.range,Wf.range,Gf.range,Kf.range,qf.range;const Jf=q(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Jf.range;const Yf=q(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Yf.range;const Xf=q(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Xf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:q(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}),Xf.range;const Zf=q(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Zf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:q(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}),Zf.range;function Qf(e,t,n,r,i,a){let o=[[wf,1,_f],[wf,5,5*_f],[wf,15,15*_f],[wf,30,30*_f],[a,1,vf],[a,5,5*vf],[a,15,15*vf],[a,30,30*vf],[i,1,yf],[i,3,3*yf],[i,6,6*yf],[i,12,12*yf],[r,1,bf],[r,2,2*bf],[n,1,xf],[t,1,Sf],[t,3,3*Sf],[e,1,Cf]];function s(e,t,n){let r=t<e;r&&([e,t]=[t,e]);let i=n&&typeof n.range==`function`?n:c(e,t,n),a=i?i.range(e,+t+1):[];return r?a.reverse():a}function c(t,n,r){let i=Math.abs(n-t)/r,a=Mn(([,,e])=>e).right(o,i);if(a===o.length)return e.every(Zn(t/Cf,n/Cf,r));if(a===0)return gf.every(Math.max(Zn(t,n,r),1));let[s,c]=o[i/o[a-1][2]<o[a][2]/i?a-1:a];return s.every(c)}return[s,c]}const[$f,ep]=Qf(Zf,Yf,Vf,jf,Of,Ef),[tp,np]=Qf(Xf,Jf,Nf,kf,Df,Tf);function rp(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ip(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ap(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function op(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,s=e.months,c=e.shortMonths,l=dp(i),u=fp(i),d=dp(a),f=fp(a),p=dp(o),m=fp(o),h=dp(s),g=fp(s),_=dp(c),v=fp(c),y={a:k,A,b:ie,B:j,c:null,d:Np,e:Np,f:Rp,g:Yp,G:Zp,H:Pp,I:Fp,j:Ip,L:Lp,m:zp,M:Bp,p:ae,q:oe,Q:bm,s:xm,S:Vp,u:Hp,U:Up,V:Gp,w:Kp,W:qp,x:null,X:null,y:Jp,Y:Xp,Z:Qp,"%":ym},b={a:se,A:ce,b:M,B:le,c:null,d:$p,e:$p,f:im,g:hm,G:_m,H:em,I:tm,j:nm,L:rm,m:am,M:om,p:ue,q:de,Q:bm,s:xm,S:sm,u:cm,U:lm,V:dm,w:fm,W:pm,x:null,X:null,y:mm,Y:gm,Z:vm,"%":ym},x={a:E,A:ee,b:te,B:ne,c:re,d:Cp,e:Cp,f:kp,g:yp,G:vp,H:Tp,I:Tp,j:wp,L:Op,m:Sp,M:Ep,p:T,q:xp,Q:jp,s:Mp,S:Dp,u:mp,U:hp,V:gp,w:pp,W:_p,x:D,X:O,y:yp,Y:vp,Z:bp,"%":Ap};y.x=S(n,y),y.X=S(r,y),y.c=S(t,y),b.x=S(n,b),b.X=S(r,b),b.c=S(t,b);function S(e,t){return function(n){var r=[],i=-1,a=0,o=e.length,s,c,l;for(n instanceof Date||(n=new Date(+n));++i<o;)e.charCodeAt(i)===37&&(r.push(e.slice(a,i)),(c=sp[s=e.charAt(++i)])==null?c=s===`e`?` `:`0`:s=e.charAt(++i),(l=t[s])&&(s=l(n,c)),r.push(s),a=i+1);return r.push(e.slice(a,i)),r.join(``)}}function C(e,t){return function(n){var r=ap(1900,void 0,1),i=w(r,e,n+=``,0),a,o;if(i!=n.length)return null;if(`Q`in r)return new Date(r.Q);if(`s`in r)return new Date(r.s*1e3+(`L`in r?r.L:0));if(t&&!(`Z`in r)&&(r.Z=0),`p`in r&&(r.H=r.H%12+r.p*12),r.m===void 0&&(r.m=`q`in r?r.q:0),`V`in r){if(r.V<1||r.V>53)return null;`w`in r||(r.w=1),`Z`in r?(a=ip(ap(r.y,0,1)),o=a.getUTCDay(),a=o>4||o===0?Hf.ceil(a):Hf(a),a=Af.offset(a,(r.V-1)*7),r.y=a.getUTCFullYear(),r.m=a.getUTCMonth(),r.d=a.getUTCDate()+(r.w+6)%7):(a=rp(ap(r.y,0,1)),o=a.getDay(),a=o>4||o===0?Pf.ceil(a):Pf(a),a=kf.offset(a,(r.V-1)*7),r.y=a.getFullYear(),r.m=a.getMonth(),r.d=a.getDate()+(r.w+6)%7)}else (`W`in r||`U`in r)&&(`w`in r||(r.w=`u`in r?r.u%7:`W`in r?1:0),o=`Z`in r?ip(ap(r.y,0,1)).getUTCDay():rp(ap(r.y,0,1)).getDay(),r.m=0,r.d=`W`in r?(r.w+6)%7+r.W*7-(o+5)%7:r.w+r.U*7-(o+6)%7);return`Z`in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,ip(r)):rp(r)}}function w(e,t,n,r){for(var i=0,a=t.length,o=n.length,s,c;i<a;){if(r>=o)return-1;if(s=t.charCodeAt(i++),s===37){if(s=t.charAt(i++),c=x[s in sp?t.charAt(i++):s],!c||(r=c(e,n,r))<0)return-1}else if(s!=n.charCodeAt(r++))return-1}return r}function T(e,t,n){var r=l.exec(t.slice(n));return r?(e.p=u.get(r[0].toLowerCase()),n+r[0].length):-1}function E(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=m.get(r[0].toLowerCase()),n+r[0].length):-1}function ee(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=f.get(r[0].toLowerCase()),n+r[0].length):-1}function te(e,t,n){var r=_.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1}function ne(e,t,n){var r=h.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1}function re(e,n,r){return w(e,t,n,r)}function D(e,t,r){return w(e,n,t,r)}function O(e,t,n){return w(e,r,t,n)}function k(e){return o[e.getDay()]}function A(e){return a[e.getDay()]}function ie(e){return c[e.getMonth()]}function j(e){return s[e.getMonth()]}function ae(e){return i[+(e.getHours()>=12)]}function oe(e){return 1+~~(e.getMonth()/3)}function se(e){return o[e.getUTCDay()]}function ce(e){return a[e.getUTCDay()]}function M(e){return c[e.getUTCMonth()]}function le(e){return s[e.getUTCMonth()]}function ue(e){return i[+(e.getUTCHours()>=12)]}function de(e){return 1+~~(e.getUTCMonth()/3)}return{format:function(e){var t=S(e+=``,y);return t.toString=function(){return e},t},parse:function(e){var t=C(e+=``,!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=S(e+=``,b);return t.toString=function(){return e},t},utcParse:function(e){var t=C(e+=``,!0);return t.toString=function(){return e},t}}}var sp={"-":``,_:` `,0:`0`},J=/^\s*\d+/,cp=/^%/,lp=/[\\^$*+?|[\]().{}]/g;function Y(e,t,n){var r=e<0?`-`:``,i=(r?-e:e)+``,a=i.length;return r+(a<n?Array(n-a+1).join(t)+i:i)}function up(e){return e.replace(lp,`\\$&`)}function dp(e){return RegExp(`^(?:`+e.map(up).join(`|`)+`)`,`i`)}function fp(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function pp(e,t,n){var r=J.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function mp(e,t,n){var r=J.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function hp(e,t,n){var r=J.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function gp(e,t,n){var r=J.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function _p(e,t,n){var r=J.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function vp(e,t,n){var r=J.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function yp(e,t,n){var r=J.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function bp(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||`00`)),n+r[0].length):-1}function xp(e,t,n){var r=J.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Sp(e,t,n){var r=J.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Cp(e,t,n){var r=J.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function wp(e,t,n){var r=J.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Tp(e,t,n){var r=J.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Ep(e,t,n){var r=J.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Dp(e,t,n){var r=J.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Op(e,t,n){var r=J.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function kp(e,t,n){var r=J.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Ap(e,t,n){var r=cp.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function jp(e,t,n){var r=J.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Mp(e,t,n){var r=J.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Np(e,t){return Y(e.getDate(),t,2)}function Pp(e,t){return Y(e.getHours(),t,2)}function Fp(e,t){return Y(e.getHours()%12||12,t,2)}function Ip(e,t){return Y(1+kf.count(Xf(e),e),t,3)}function Lp(e,t){return Y(e.getMilliseconds(),t,3)}function Rp(e,t){return Lp(e,t)+`000`}function zp(e,t){return Y(e.getMonth()+1,t,2)}function Bp(e,t){return Y(e.getMinutes(),t,2)}function Vp(e,t){return Y(e.getSeconds(),t,2)}function Hp(e){var t=e.getDay();return t===0?7:t}function Up(e,t){return Y(Nf.count(Xf(e)-1,e),t,2)}function Wp(e){var t=e.getDay();return t>=4||t===0?Lf(e):Lf.ceil(e)}function Gp(e,t){return e=Wp(e),Y(Lf.count(Xf(e),e)+(Xf(e).getDay()===4),t,2)}function Kp(e){return e.getDay()}function qp(e,t){return Y(Pf.count(Xf(e)-1,e),t,2)}function Jp(e,t){return Y(e.getFullYear()%100,t,2)}function Yp(e,t){return e=Wp(e),Y(e.getFullYear()%100,t,2)}function Xp(e,t){return Y(e.getFullYear()%1e4,t,4)}function Zp(e,t){var n=e.getDay();return e=n>=4||n===0?Lf(e):Lf.ceil(e),Y(e.getFullYear()%1e4,t,4)}function Qp(e){var t=e.getTimezoneOffset();return(t>0?`-`:(t*=-1,`+`))+Y(t/60|0,`0`,2)+Y(t%60,`0`,2)}function $p(e,t){return Y(e.getUTCDate(),t,2)}function em(e,t){return Y(e.getUTCHours(),t,2)}function tm(e,t){return Y(e.getUTCHours()%12||12,t,2)}function nm(e,t){return Y(1+Af.count(Zf(e),e),t,3)}function rm(e,t){return Y(e.getUTCMilliseconds(),t,3)}function im(e,t){return rm(e,t)+`000`}function am(e,t){return Y(e.getUTCMonth()+1,t,2)}function om(e,t){return Y(e.getUTCMinutes(),t,2)}function sm(e,t){return Y(e.getUTCSeconds(),t,2)}function cm(e){var t=e.getUTCDay();return t===0?7:t}function lm(e,t){return Y(Vf.count(Zf(e)-1,e),t,2)}function um(e){var t=e.getUTCDay();return t>=4||t===0?Gf(e):Gf.ceil(e)}function dm(e,t){return e=um(e),Y(Gf.count(Zf(e),e)+(Zf(e).getUTCDay()===4),t,2)}function fm(e){return e.getUTCDay()}function pm(e,t){return Y(Hf.count(Zf(e)-1,e),t,2)}function mm(e,t){return Y(e.getUTCFullYear()%100,t,2)}function hm(e,t){return e=um(e),Y(e.getUTCFullYear()%100,t,2)}function gm(e,t){return Y(e.getUTCFullYear()%1e4,t,4)}function _m(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Gf(e):Gf.ceil(e),Y(e.getUTCFullYear()%1e4,t,4)}function vm(){return`+0000`}function ym(){return`%`}function bm(e){return+e}function xm(e){return Math.floor(e/1e3)}var Sm,Cm,wm,Tm,Em;Dm({dateTime:`%x, %X`,date:`%-m/%-d/%Y`,time:`%-I:%M:%S %p`,periods:[`AM`,`PM`],days:[`Sunday`,`Monday`,`Tuesday`,`Wednesday`,`Thursday`,`Friday`,`Saturday`],shortDays:[`Sun`,`Mon`,`Tue`,`Wed`,`Thu`,`Fri`,`Sat`],months:[`January`,`February`,`March`,`April`,`May`,`June`,`July`,`August`,`September`,`October`,`November`,`December`],shortMonths:[`Jan`,`Feb`,`Mar`,`Apr`,`May`,`Jun`,`Jul`,`Aug`,`Sep`,`Oct`,`Nov`,`Dec`]});function Dm(e){return Sm=op(e),Cm=Sm.format,wm=Sm.parse,Tm=Sm.utcFormat,Em=Sm.utcParse,Sm}function Om(e){return new Date(e)}function km(e){return e instanceof Date?+e:+new Date(+e)}function Am(e,t,n,r,i,a,o,s,c,l){var u=pd(),d=u.invert,f=u.domain,p=l(`.%L`),m=l(`:%S`),h=l(`%I:%M`),g=l(`%I %p`),_=l(`%a %d`),v=l(`%b %d`),y=l(`%B`),b=l(`%Y`);function x(e){return(c(e)<e?p:s(e)<e?m:o(e)<e?h:a(e)<e?g:r(e)<e?i(e)<e?_:v:n(e)<e?y:b)(e)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?f(Array.from(e,km)):f().map(Om)},u.ticks=function(t){var n=f();return e(n[0],n[n.length-1],t??10)},u.tickFormat=function(e,t){return t==null?x:l(t)},u.nice=function(e){var n=f();return(!e||typeof e.range!=`function`)&&(e=t(n[0],n[n.length-1],e??10)),e?f(Hd(n,e)):u},u.copy=function(){return dd(u,Am(e,t,n,r,i,a,o,s,c,l))},u}function jm(){return Xu.apply(Am(tp,np,Xf,Jf,Nf,kf,Df,Tf,wf,Cm).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Mm(){return Xu.apply(Am($f,ep,Zf,Yf,Vf,Af,Of,Ef,wf,Tm).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Nm(){var e=0,t=1,n,r,i,a,o=od,s=!1,c;function l(e){return e==null||isNaN(e=+e)?c:o(i===0?.5:(e=(a(e)-n)*i,s?Math.max(0,Math.min(1,e)):e))}l.domain=function(o){return arguments.length?([e,t]=o,n=a(e=+e),r=a(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(e){return arguments.length?(s=!!e,l):s},l.interpolator=function(e){return arguments.length?(o=e,l):o};function u(e){return function(t){var n,r;return arguments.length?([n,r]=t,o=e(n,r),l):[o(0),o(1)]}}return l.range=u(El),l.rangeRound=u(Dl),l.unknown=function(e){return arguments.length?(c=e,l):c},function(o){return a=o,n=o(e),r=o(t),i=n===r?0:1/(r-n),l}}function Pm(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Fm(){var e=zd(Nm()(od));return e.copy=function(){return Pm(e,Fm())},Zu.apply(e,arguments)}function Im(){var e=0,t=.5,n=1,r=1,i,a,o,s,c,l=od,u,d=!1,f;function p(e){return isNaN(e=+e)?f:(e=.5+((e=+u(e))-a)*(r*e<r*a?s:c),l(d?Math.max(0,Math.min(1,e)):e))}p.domain=function(l){return arguments.length?([e,t,n]=l,i=u(e=+e),a=u(t=+t),o=u(n=+n),s=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),r=a<i?-1:1,p):[e,t,n]},p.clamp=function(e){return arguments.length?(d=!!e,p):d},p.interpolator=function(e){return arguments.length?(l=e,p):l};function m(e){return function(t){var n,r,i;return arguments.length?([n,r,i]=t,l=Ll(e,[n,r,i]),p):[l(0),l(.5),l(1)]}}return p.range=m(El),p.rangeRound=m(Dl),p.unknown=function(e){return arguments.length?(f=e,p):f},function(l){return u=l,i=l(e),a=l(t),o=l(n),s=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),r=a<i?-1:1,p}}function Lm(){var e=zd(Im()(od));return e.copy=function(){return Pm(e,Lm())},Zu.apply(e,arguments)}const Rm={scaleLinear:Bd,scalePow:lf,scaleSqrt:uf,scaleLog:Qd,scaleSymlog:nf,scaleIdentity:Vd,scaleTime:jm,scaleUtc:Mm,scaleSequential:Fm,scaleDiverging:Lm,scaleQuantize:ff,scaleQuantile:df,scaleThreshold:pf,scaleOrdinal:$u,scaleBand:ed,scalePoint:nd};var X;(function(e){e.X=`x`,e.Y=`y`})(X||={});var zm;(function(e){e.West=`west`,e.East=`east`,e.North=`north`,e.South=`south`})(zm||={});const Bm=Object.assign(Object.assign({},Ps),{components:[],tooltip:void 0,crosshair:void 0,annotations:void 0,xAxis:void 0,yAxis:void 0,autoMargin:!0,xScale:void 0,xDomain:void 0,xDomainMinConstraint:void 0,xDomainMaxConstraint:void 0,xRange:void 0,yScale:void 0,yDomain:void 0,yDomainMinConstraint:void 0,yDomainMaxConstraint:void 0,yRange:void 0,yDirection:zm.North,preventEmptyDomain:null,scaleByDomain:!1,clipPathExtend:2});var Vm=class extends Fs{constructor(e,t,n){var r,i;super(e),this._defaultConfig=Bm,this.datamodel=new Yu,this.config=this._defaultConfig,this._clipPathId=Rs(),this._axisMargin={top:0,bottom:0,left:0,right:0},this._firstRender=!0,this._clipPath=this.svg.append(`clipPath`).attr(`id`,this._clipPathId),this._clipPath.append(`rect`);let a=`saturate`,o=window.location.href.replace(window.location.hash,``);this.svg.attr(`class`,U`
      --highlight-filter-id: url(${o}#${a}); // defining a css variable
    `),this._svgDefs.append(`filter`).attr(`id`,a).attr(`filterUnits`,`objectBoundingBox`).html(`<feColorMatrix type="saturate" in="SourceGraphic" values="1.35"/>`),t&&this.updateContainer(t,!0),n&&this.setData(n,!0),(this.config.xAxis||this.config.yAxis||(r=this.components)?.some(e=>e.datamodel.data))&&this.render(),(i=document.fonts)==null||i.ready.then(()=>{this._firstRender||this._renderAxes(0)})}get components(){return this.config.components}get width(){let e=this._getMargin();return wr(this.containerWidth-e.left-e.right,0,1/0)}get height(){let e=this._getMargin();return wr(this.containerHeight-e.top-e.bottom,0,1/0)}setData(e,t){var n,r,i,a,o;let{components:s,config:c}=this;if(!e)return;this.datamodel.data=e,s.forEach(t=>{t.setData(e)}),(n=c.crosshair)==null||n.setData(e),(r=c.xAxis)==null||r.setData(e),(i=c.yAxis)==null||i.setData(e);let l=!gr(this.datamodel.data,e);l&&((a=c.tooltip)==null||a.hide(),(o=c.crosshair)==null||o.hide()),t||this.render()}updateContainer(e,t){super.updateContainer(e),this._removeAllChildren(),this.setData(this.datamodel.data,!0),e.xAxis&&(this.config.xAxis.config.type=K.X,this.element.appendChild(e.xAxis.element)),e.yAxis&&(this.config.yAxis.config.type=K.Y,this.element.appendChild(e.yAxis.element));for(let e of this.components)this.element.appendChild(e.element);let n=e.tooltip;n&&(n.hasContainer()||n.setContainer(this._container),n.setComponents(this.components));let r=e.crosshair;r&&(r.setContainer(this.svg),r.tooltip=n,this.element.appendChild(r.element));let i=e.annotations;i&&this.element.appendChild(i.element),this.element.appendChild(this._clipPath.node()),this.element.appendChild(this._svgDefs.node()),this.element.appendChild(this._svgDefsExternal.node()),t||this.render()}updateComponents(e,t){let{config:n}=this;this.components.forEach((t,n)=>{let r=e[n];r&&t.setConfig(e[n])}),this._updateScales(...this.components,n.xAxis,n.yAxis,n.crosshair),t||this.render()}update(e,t,n){n&&(this.datamodel.data=n),e&&this.updateContainer(e,!0),t&&this.updateComponents(t,!0),this.render()}_preRender(){let{config:e}=this;super._preRender(),e.autoMargin&&this._setAutoMargin();let t=Cr([...this.components,e.xAxis,e.yAxis,e.crosshair,e.annotations]),n=this._getMargin();for(let e of t)e.setSize(this.width,this.height,this.containerWidth,this.containerHeight),e.setContainerMargin(n);this._updateScales(...this.components,e.xAxis,e.yAxis,e.crosshair)}_render(e){var t,n,r,i,a;let{config:o}=this;super._render();let s=this._getMargin();for(let t of this.components)t.g.attr(`transform`,`translate(${s.left},${s.top})`).style(`clip-path`,t.clippable?`url(#${this._clipPathId})`:null).style(`-webkit-clip-path`,t.clippable?`url(#${this._clipPathId})`:null),t.render(e);this._renderAxes(this._firstRender?0:e);let c=o.clipPathExtend;this._clipPath.select(`rect`).attr(`x`,-c).attr(`y`,-c).attr(`width`,this.width+2*c).attr(`height`,this.height+2*c),(t=o.tooltip)==null||t.update();let l=o.crosshair;if(l){let e=this.components.filter(e=>!e.stacked).map(e=>e.config.y),t=this.components.filter(e=>e.stacked).map(e=>e.config.y),i=(n=this.components.find(e=>e.config.baseline))?.config,a=i?.baseline;l.accessors={x:(r=this.components[0])?.config.x,y:_r(e),yStacked:_r(t),baseline:a},l.g.attr(`transform`,`translate(${s.left},${s.top})`).style(`clip-path`,`url(#${this._clipPathId})`).style(`-webkit-clip-path`,`url(#${this._clipPathId})`),l.render()}(i=o.annotations)==null||i.g.attr(`transform`,`translate(${s.left},${s.top})`),(a=o.annotations)==null||a.render(),this._firstRender=!1}_updateScales(...e){let t=Cr(e||this.components);this._setScales(...t),this._updateScalesDomain(...t),this._updateScalesRange(...t)}_setScales(...e){let{config:t}=this;e&&(t.xScale&&e.forEach(e=>e.setScale(X.X,t.xScale)),t.yScale&&e.forEach(e=>e.setScale(X.Y,t.yScale)))}_updateScalesDomain(...e){let{config:t}=this;if(!e)return;let n=e.filter(e=>!e.config.excludeFromDomainCalculation);Object.values(X).forEach(r=>{var i,a,o,s,c,l,u,d;let[f,p]=zn(rr(n.map(e=>e.getDataExtent(r,t.scaleByDomain)))),m=r===X.Y?t.yDomain:t.xDomain,h=r===X.Y?t.yDomainMinConstraint:t.xDomainMinConstraint,g=r===X.Y?t.yDomainMaxConstraint:t.xDomainMaxConstraint,_=(a=(i=m?.[0])??f)??0,v=(s=(o=m?.[1])??p)??1,y=[wr(_,(c=h?.[0])??-1/0,(l=h?.[1])??1/0),wr(v,(u=g?.[0])??-1/0,(d=g?.[1])??1/0)];if(y[0]===y[1]){let e=n.some(e=>{var t;return(t=e.datamodel.data)?.length>0});(t.preventEmptyDomain||t.preventEmptyDomain===null&&(!e||r===X.Y))&&(y[1]=y[0]+1)}e.forEach(e=>e.setScaleDomain(r,y))})}_updateScalesRange(...e){var t,n,r,i,a,o;let{config:s}=this;if(!e)return;let c=s.yDirection===zm.South,l=[(t=s.padding.left)??0,this.width-((n=s.padding.right)??0)],u=[this.height-((r=s.padding.bottom)??0),(i=s.padding.top)??0];c&&u.reverse();for(let t of e)t.setSize(this.width,this.height,this.containerWidth,this.containerHeight),t.setScaleRange(X.X,(a=s.xRange)??l),t.setScaleRange(X.Y,(o=s.yRange)??u);let d=e.map(e=>e.bleed).reduce((e,t)=>{for(let n of Object.keys(e)){let r=n;e[r]<t[r]&&(e[r]=t[r])}return e},{top:0,bottom:0,left:0,right:0});for(let t of e)t.setScaleRange(X.X,[l[0]+d.left,l[1]-d.right]),t.setScaleRange(X.Y,c?[u[0]+d.top,u[1]-d.bottom]:[u[0]-d.bottom,u[1]+d.top])}_renderAxes(e){let{config:{xAxis:t,yAxis:n}}=this,r=this._getMargin(),i=Cr([t,n]);i.forEach(t=>{let n=t.getOffset(r);t.g.attr(`transform`,`translate(${n.left},${n.top})`),t.render(e)})}_setAutoMargin(){let{config:{xAxis:e,yAxis:t}}=this,n=Cr([...this.components,e,t]);this._setScales(...n),this._updateScalesDomain(...n);let r=this._firstRender?2:1;for(let i=0;i<r;i+=1){let r={top:0,bottom:0,left:0,right:0};this._updateScalesRange(...n);let i=Cr([e,t]);i.forEach(e=>{e.preRender();let t=e.getRequiredMargin();r.top<t.top&&(r.top=t.top),r.bottom<t.bottom&&(r.bottom=t.bottom),r.left<t.left&&(r.left=t.left),r.right<t.right&&(r.right=t.right)}),this._axisMargin=r}}_getMargin(){let{config:{margin:e}}=this;return{top:e.top+this._axisMargin.top,bottom:e.bottom+this._axisMargin.bottom,left:e.left+this._axisMargin.left,right:e.right+this._axisMargin.right}}destroy(){let{components:e,config:{tooltip:t,crosshair:n,annotations:r,xAxis:i,yAxis:a}}=this;super.destroy();for(let t of e)t?.destroy();t?.destroy(),n?.destroy(),r?.destroy(),i?.destroy(),a?.destroy()}};const Hm={duration:600,events:{},attributes:{}};var Um=class{constructor(e=No.SVG){var t,n;this.type=No.SVG,this.datamodel=new Yu,this.sizing=Po.Fit,this.events={},this._defaultConfig=Hm,this._width=400,this._height=200,this._containerWidth=void 0,this._containerHeight=void 0,this._containerMargin={top:0,bottom:0,left:0,right:0},this._setUpComponentEventsThrottled=br(this._setUpComponentEvents,500),this._setCustomAttributesThrottled=br(this._setCustomAttributes,500),e===No.SVG?this.element=document.createElementNS(`http://www.w3.org/2000/svg`,`g`):this.element=document.createElement(`div`),this.uid=Rs(),this.g=Ao(this.element);let r=(n=(t=this.constructor)?.selectors)?.root;r&&this.g.attr(`class`,r)}setContainerMargin(e){this._containerMargin=e}setConfig(e){this.prevConfig=this.config,this.config=yr(this._defaultConfig,e)}setData(e){this.datamodel.data=e}setSize(e,t,n,r){isFinite(e)&&(this._width=e),isFinite(t)&&(this._height=t),isFinite(n)&&(this._containerWidth=n),isFinite(r)&&(this._containerHeight=r)}render(e=this.config.duration){this._render(e);let t=`animating`;if(e){this.g.attr(t,``);let n=this.g.transition(t).duration(e);n.on(`end interrupt`,()=>{this.g.attr(t,null)})}this._setUpComponentEventsThrottled(),this._setCustomAttributesThrottled()}get bleed(){return{top:0,bottom:0,left:0,right:0}}_render(e=this.config.duration){}_setCustomAttributes(){let e=this.config.attributes;Object.keys(e).forEach(t=>{Object.keys(e[t]).forEach(n=>{let r=this.g.selectAll(`.${t}`);r.attr(n,e[t][n])})})}_setUpComponentEvents(){this._bindEvents(this.events),this._bindEvents(this.config.events,`.user`)}_bindEvents(e=this.events,t=``){Object.keys(e).forEach(n=>{Object.keys(e[n]).forEach(r=>{let i=this.g.selectAll(`.${n}`);i.on(r+t,(t,a)=>{let o=i.nodes(),s=o.indexOf(t.currentTarget),c=e[n][r];return c?.(a,t,s,o)})})})}destroy(){var e;(e=this.g)==null||e.remove(),this.element=void 0}isDestroyed(){return!this.element}},Wm=class extends Yu{constructor(e){super(e)}get data(){var e;return(e=this._data)??[]}set data(e){Array.isArray(e)&&(this._data=e)}};const Gm=Object.assign(Object.assign({},Hm),{x:void 0,y:void 0,id:(e,t)=>{var n;return(n=e.id)??`${t}`},color:e=>e.color,xScale:void 0,yScale:void 0,excludeFromDomainCalculation:!1});var Km=class extends Um{constructor(){super(...arguments),this.datamodel=new Wm,this.clippable=!0,this.stacked=!1,this._defaultConfig=Gm,this._xScale=Rm.scaleLinear(),this._yScale=Rm.scaleLinear()}get xScale(){return this.config.xScale||this._xScale}get yScale(){return this.config.yScale||this._yScale}setConfig(e){var t,n;(t=this.config)?.xScale&&(e.xScale=this.config.xScale),(n=this.config)?.yScale&&(e.yScale=this.config.yScale),super.setConfig(e)}setScaleDomain(e,t){var n,r;e===X.X&&((n=this._xScale)==null||n.domain(t)),e===X.Y&&((r=this._yScale)==null||r.domain(t))}setScaleRange(e,t){var n,r;e===X.X&&((n=this._xScale)==null||n.range(t)),e===X.Y&&((r=this._yScale)==null||r.range(t))}setScale(e,t){t&&e===X.X&&(this._xScale=t),t&&e===X.Y&&(this._yScale=t)}getDataExtent(e,t){let{config:n,datamodel:r}=this;switch(e){case X.X:return this.getXDataExtent();case X.Y:return this.getYDataExtent(t);default:return Ar(r.data,n[e])}}getXDataExtent(){let{config:e,datamodel:t}=this;return Ar(t.data,e.x)}getYDataExtent(e){let{config:t,datamodel:n}=this,r=this.xScale.domain(),i=e?Mr(n.data,r,t.x,!0):n.data,a=dr(t.y)?t.y:[t.y];return Ar(i,...a)}},Z;(function(e){e.Top=`top`,e.Bottom=`bottom`,e.Left=`left`,e.Right=`right`,e.Center=`center`,e.Auto=`auto`})(Z||={});var qm;(function(e){e.Absolute=`absolute`,e.Fixed=`fixed`})(qm||={});var Jm;(function(e){e.Inside=`inside`,e.Outside=`outside`,e.Center=`center`})(Jm||={});var Ym;(function(e){e.Horizontal=`horizontal`,e.Vertical=`vertical`})(Ym||={});const Xm={components:[],container:void 0,followCursor:!0,allowHover:!1,horizontalPlacement:Z.Auto,horizontalShift:0,verticalPlacement:Z.Top,verticalShift:0,attributes:{},triggers:{},className:void 0,showDelay:void 0,hideDelay:void 0};var Zm={};Me(Zm,{hidden:()=>rh,nonInteractive:()=>ih,positionFixed:()=>th,root:()=>Qm,show:()=>nh,tooltip:()=>$m,variables:()=>eh});const Qm=U`
  label: tooltip;
  display: inline-block;
  left: 0;
  bottom: 0;
  min-width: max-content;
  position: absolute;
  opacity: 0;
  transition: opacity;
  transition-duration: var(--vis-tooltip-transition-duration);
  z-index: 999999;
  padding: var(--vis-tooltip-padding);
  color: var(--vis-tooltip-text-color);
  border-radius: var(--vis-tooltip-border-radius);
  box-shadow: var(--vis-tooltip-box-shadow);
  border: solid 1px var(--vis-tooltip-border-color);
  background-color: var(--vis-tooltip-background-color);
  backdrop-filter: var(--vis-tooltip-backdrop-filter);
`,$m=Qm,eh=kn`
  :root {
    --vis-tooltip-background-color: rgba(255, 255, 255, 0.95);
    --vis-tooltip-border-color: #e5e9f7;
    --vis-tooltip-text-color: #000;
    --vis-tooltip-shadow-color: rgba(172, 179, 184, 0.35);
    --vis-tooltip-backdrop-filter: none;
    --vis-tooltip-padding: 10px 15px;
    --vis-tooltip-border-radius: 5px;
    --vis-tooltip-transition-duration: 300ms;
    --vis-tooltip-box-shadow: none;

    --vis-dark-tooltip-background-color: rgba(30,30,30, 0.95);
    --vis-dark-tooltip-text-color: #e5e9f7;
    --vis-dark-tooltip-border-color: var(--vis-color-grey);
    --vis-dark-tooltip-shadow-color: rgba(0,0,0, 0.95);
  }

  body.theme-dark ${`.${Qm}`} {
    --vis-tooltip-background-color: var(--vis-dark-tooltip-background-color);
    --vis-tooltip-text-color: var(--vis-dark-tooltip-text-color);
    --vis-tooltip-border-color: var(--vis-dark-tooltip-border-color);
    --vis-tooltip-shadow-color: var(--vis-dark-tooltip-shadow-color);
  }

  body.theme-dark {
    --vis-tooltip-background-color: rgba(30,30,30, 0.95);
    --vis-tooltip-text-color: #e5e9f7;
    --vis-tooltip-border-color: var(--vis-color-grey);
    --vis-tooltip-shadow-color: rgba(0,0,0, 0.95);
  }
`,th=U`
  bottom: unset;
  position: fixed;
`,nh=U`
  opacity: 1;
`,rh=U`
  display: none;
`,ih=U`
  label: non-interactive;
  pointer-events: none;
  user-select: none;
`;var ah=class{constructor(e={}){this._defaultConfig=Xm,this.config=this._defaultConfig,this._setUpEventsThrottled=br(this._setUpEvents,500),this._setContainerPositionThrottled=br(this._setContainerPosition,500),this._isShown=!1,this.element=document.createElement(`div`),this.div=Ao(this.element).attr(`class`,Qm).classed(nh,!1).classed(rh,!0),this.setConfig(e),this.components=this.config.components,this._mutationObserver=new MutationObserver(()=>{this._isShown&&(!this.config.followCursor&&this._hoveredElement?this.placeByElement(this._hoveredElement):this._position&&this.place({x:this._position[0],y:this._position[1]}))}),this._mutationObserver.observe(this.div.node(),{childList:!0,subtree:!0})}setConfig(e){var t;this.prevConfig=this.config,this.config=yr(this._defaultConfig,e),this.prevConfig.horizontalPlacement!==this.config.horizontalPlacement&&this.overrideHorizontalPlacement(void 0),this.config.container&&this.config.container!==(t=this.prevConfig)?.container&&this.setContainer(this.config.container),this._setUpAttributes()}setContainer(e){var t;(t=this.element.parentNode)==null||t.removeChild(this.element),this._container=e,this._container.appendChild(this.element),this._setContainerPositionThrottled()}getContainer(){return this._container}hasContainer(){return!!this._container&&this._container.isConnected}setComponents(e){this.components=e}update(){this._container&&this._setUpEventsThrottled()}show(e,t){this.render(e),this.place(t)}_hide(){this.div.classed(nh,!1).on(`transitionend`,()=>{this.div.classed(rh,!this._isShown)}),this._isShown=!1}hide(){window.clearTimeout(this._showDelayTimeoutId),this.config.hideDelay?(window.clearTimeout(this._hideDelayTimeoutId),this._hideDelayTimeoutId=setTimeout(()=>this._hide(),this.config.hideDelay)):this._hide()}_display(){window.clearTimeout(this._hideDelayTimeoutId),this.div.classed(rh,!1).classed(nh,!0),this._isShown=!0}display(){this._isShown||(this.config.showDelay?(window.clearTimeout(this._showDelayTimeoutId),this._showDelayTimeoutId=setTimeout(()=>{this._display(),this.place({x:this._position[0],y:this._position[1]})},this.config.showDelay)):this._display())}place(e){if(this._position=[e.x,e.y],!this.hasContainer()){console.warn(`Unovis | Tooltip: Container was not set or is not initialized yet`);return}let{config:t}=this,n=this.element.offsetWidth,r=this.element.offsetHeight,i=this._overriddenHorizontalPlacement||(t.horizontalPlacement===Z.Auto?Z.Center:t.horizontalPlacement),a=t.verticalPlacement===Z.Auto?e.y-r<0?Z.Bottom:Z.Top:t.verticalPlacement,o=5,s=i===Z.Left?-n-o-t.horizontalShift:i===Z.Center?-n/2:o+t.horizontalShift,c=a===Z.Bottom?o+t.verticalShift:a===Z.Center?-r/2:-o-t.verticalShift-r,[l,u]=this._constraintPosToContainer(e.x+s,e.y+c,n,r);this._applyPosition(l,u,r)}placeByElement(e){let{config:t}=this;this._hoveredElement=e;let n=5,r=this.element.offsetWidth,i=this.element.offsetHeight,a=this.isContainerBody(),o=a?window.innerWidth:this._container.scrollWidth,s=e.getBoundingClientRect(),c=a?[s.x,s.y]:Mo({clientX:s.x,clientY:s.y,pageX:s.x,pageY:s.y},this._container),l=this._overriddenHorizontalPlacement||(t.horizontalPlacement===Z.Auto?c[0]-r<0?Z.Right:c[0]+r>o?Z.Left:Z.Center:t.horizontalPlacement),u=0;switch(l){case Z.Left:u=-r-n-t.horizontalShift;break;case Z.Right:u=s.width+n+t.horizontalShift;break;case Z.Center:default:u=(-r+s.width)/2;break}let d=t.verticalPlacement===Z.Auto?l===Z.Center?c[1]-i<0?Z.Bottom:Z.Top:Z.Center:t.verticalPlacement,f=-i;switch(d){case Z.Center:f+=(i+s.height)/2;break;case Z.Bottom:f+=i+s.height+n+t.verticalShift;break;case Z.Top:default:f+=-n-t.verticalShift;break}let[p,m]=this._constraintPosToContainer(c[0]+u,c[1]+f,r,i);this._applyPosition(p,m,i)}isContainerBody(){return this._container===document.body}overrideHorizontalPlacement(e){this._overriddenHorizontalPlacement=e}render(e){var t;let{config:n,prevConfig:r}=this;if(e instanceof HTMLElement){let t=this.div.select(`:first-child`).node();t!==e&&this.div.html(``).append(()=>e)}else e!==null&&this.div.html(e||``);this.div.classed((t=n.className)??``,!!n.className).classed(ih,!n.allowHover),r?.className&&r.className!==n.className&&this.div.classed(r.className,!1),this.display()}_applyPosition(e,t,n){let r=this.isContainerBody(),i=r?window.innerHeight:this._container.scrollHeight;this.div.classed(th,r).style(`top`,r?`${t}px`:`unset`).style(`bottom`,r?`unset`:`${i-t-n}px`).style(`left`,`${e}px`)}_constraintPosToContainer(e,t,n,r){let i=this.isContainerBody(),a=i?window.innerHeight:this._container.scrollHeight,o=i?window.innerWidth:this._container.scrollWidth,s=10,c=e>o-n-s,l=e<s,u=c?o-n-s:l?s:e,d=10,f=t>a-r-d,p=t<d,m=f?a-r-d:p?d:t;return[o<n?0:u,a<r?0:m]}_setContainerPosition(){var e;this._container!==document.body&&(e=getComputedStyle(this._container))?.position===`static`&&(this._container.style.position=`relative`)}_setUpEvents(){let{config:e}=this;this.components.forEach(e=>{let t=Ao(e.element);t.on(`mousemove.tooltip`,e=>{let{config:n}=this,r=e.composedPath&&e.composedPath()||e.path||[e.target];for(let i of Object.keys(n.triggers)){let a=n.triggers[i];if(!a)continue;let o=t.selectAll(`.${i}`).nodes();for(let s of r){if(s===t.node())break;if(s.classList.contains(i)){let t=o.indexOf(s),r=Ao(s).datum(),i=a(r,t,o),[c,l]=this.isContainerBody()?[e.clientX,e.clientY]:Mo(e,this._container);i===null?this.hide():(this.render(i),n.followCursor?this.place({x:c,y:l}):this.placeByElement(s)),e.stopPropagation();return}}}this._isShown&&this.hide()}).on(`mouseleave.tooltip`,e=>{e.stopPropagation(),this.hide()})}),e.allowHover?this.div.on(`mouseenter.tooltip`,this._display.bind(this)).on(`mouseleave.tooltip`,this.hide.bind(this)):this.div.on(`mouseenter.tooltip`,null).on(`mouseleave.tooltip`,null)}_setUpAttributes(){let e=this.config.attributes;e&&Object.keys(e).forEach(t=>{this.div.attr(t,e[t])})}destroy(){var e;this._mutationObserver.disconnect(),window.clearTimeout(this._hideDelayTimeoutId),window.clearTimeout(this._showDelayTimeoutId),(e=this.div)==null||e.remove()}};ah.selectors=Zm;function Q(e){return function(){return e}}const oh=1e-12,sh=Math.PI;sh/2,2*sh;const ch=Math.PI,lh=2*ch,uh=1e-6,dh=lh-uh;function fh(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function ph(e){let t=Math.floor(e);if(!(t>=0))throw Error(`invalid digits: ${e}`);if(t>15)return fh;let n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}var mh=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._=``,this._append=e==null?fh:ph(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,r){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(e,t,n,r,i,a){this._append`C${+e},${+t},${+n},${+r},${this._x1=+i},${this._y1=+a}`}arcTo(e,t,n,r,i){if(e=+e,t=+t,n=+n,r=+r,i=+i,i<0)throw Error(`negative radius: ${i}`);let a=this._x1,o=this._y1,s=n-e,c=r-t,l=a-e,u=o-t,d=l*l+u*u;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(d>uh)if(!(Math.abs(u*s-c*l)>uh)||!i)this._append`L${this._x1=e},${this._y1=t}`;else{let f=n-a,p=r-o,m=s*s+c*c,h=f*f+p*p,g=Math.sqrt(m),_=Math.sqrt(d),v=i*Math.tan((ch-Math.acos((m+d-h)/(2*g*_)))/2),y=v/_,b=v/g;Math.abs(y-1)>uh&&this._append`L${e+y*l},${t+y*u}`,this._append`A${i},${i},0,0,${+(u*f>l*p)},${this._x1=e+b*s},${this._y1=t+b*c}`}}arc(e,t,n,r,i,a){if(e=+e,t=+t,n=+n,a=!!a,n<0)throw Error(`negative radius: ${n}`);let o=n*Math.cos(r),s=n*Math.sin(r),c=e+o,l=t+s,u=1^a,d=a?r-i:i-r;this._x1===null?this._append`M${c},${l}`:(Math.abs(this._x1-c)>uh||Math.abs(this._y1-l)>uh)&&this._append`L${c},${l}`,n&&(d<0&&(d=d%lh+lh),d>dh?this._append`A${n},${n},0,1,${u},${e-o},${t-s}A${n},${n},0,1,${u},${this._x1=c},${this._y1=l}`:d>uh&&this._append`A${n},${n},0,${+(d>=ch)},${u},${this._x1=e+n*Math.cos(i)},${this._y1=t+n*Math.sin(i)}`)}rect(e,t,n,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}};function hh(){return new mh}hh.prototype=mh.prototype;function gh(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{let e=Math.floor(n);if(!(e>=0))throw RangeError(`invalid digits: ${n}`);t=e}return e},()=>new mh(t)}Array.prototype.slice;function _h(e){return typeof e==`object`&&`length`in e?e:Array.from(e)}function vh(e){this._context=e}vh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function yh(e){return new vh(e)}function bh(e){return e[0]}function xh(e){return e[1]}function Sh(e,t){var n=Q(!0),r=null,i=yh,a=null,o=gh(s);e=typeof e==`function`?e:e===void 0?bh:Q(e),t=typeof t==`function`?t:t===void 0?xh:Q(t);function s(s){var c,l=(s=_h(s)).length,u,d=!1,f;for(r??(a=i(f=o())),c=0;c<=l;++c)!(c<l&&n(u=s[c],c,s))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+e(u,c,s),+t(u,c,s));if(f)return a=null,f+``||null}return s.x=function(t){return arguments.length?(e=typeof t==`function`?t:Q(+t),s):e},s.y=function(e){return arguments.length?(t=typeof e==`function`?e:Q(+e),s):t},s.defined=function(e){return arguments.length?(n=typeof e==`function`?e:Q(!!e),s):n},s.curve=function(e){return arguments.length?(i=e,r!=null&&(a=i(r)),s):i},s.context=function(e){return arguments.length?(e==null?r=a=null:a=i(r=e),s):r},s}function Ch(e,t,n){var r=null,i=Q(!0),a=null,o=yh,s=null,c=gh(l);e=typeof e==`function`?e:e===void 0?bh:Q(+e),t=typeof t==`function`?t:Q(t===void 0?0:+t),n=typeof n==`function`?n:n===void 0?xh:Q(+n);function l(l){var u,d,f,p=(l=_h(l)).length,m,h=!1,g,_=Array(p),v=Array(p);for(a??(s=o(g=c())),u=0;u<=p;++u){if(!(u<p&&i(m=l[u],u,l))===h)if(h=!h)d=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=u-1;f>=d;--f)s.point(_[f],v[f]);s.lineEnd(),s.areaEnd()}h&&(_[u]=+e(m,u,l),v[u]=+t(m,u,l),s.point(r?+r(m,u,l):_[u],n?+n(m,u,l):v[u]))}if(g)return s=null,g+``||null}function u(){return Sh().defined(i).curve(o).context(a)}return l.x=function(t){return arguments.length?(e=typeof t==`function`?t:Q(+t),r=null,l):e},l.x0=function(t){return arguments.length?(e=typeof t==`function`?t:Q(+t),l):e},l.x1=function(e){return arguments.length?(r=e==null?null:typeof e==`function`?e:Q(+e),l):r},l.y=function(e){return arguments.length?(t=typeof e==`function`?e:Q(+e),n=null,l):t},l.y0=function(e){return arguments.length?(t=typeof e==`function`?e:Q(+e),l):t},l.y1=function(e){return arguments.length?(n=e==null?null:typeof e==`function`?e:Q(+e),l):n},l.lineX0=l.lineY0=function(){return u().x(e).y(t)},l.lineY1=function(){return u().x(e).y(n)},l.lineX1=function(){return u().x(r).y(t)},l.defined=function(e){return arguments.length?(i=typeof e==`function`?e:Q(!!e),l):i},l.curve=function(e){return arguments.length?(o=e,a!=null&&(s=o(a)),l):o},l.context=function(e){return arguments.length?(e==null?a=s=null:s=o(a=e),l):a},l}function wh(){}function Th(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Eh(e){this._context=e}Eh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Th(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Th(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Dh(e){return new Eh(e)}function Oh(e){this._context=e}Oh.prototype={areaStart:wh,areaEnd:wh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Th(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function kh(e){return new Oh(e)}function Ah(e){this._context=e}Ah.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Th(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function jh(e){return new Ah(e)}function Mh(e,t){this._basis=new Eh(e),this._beta=t}Mh.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],a=e[n]-r,o=t[n]-i,s=-1,c;++s<=n;)c=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(r+c*a),this._beta*t[s]+(1-this._beta)*(i+c*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var Nh=(function e(t){function n(e){return t===1?new Eh(e):new Mh(e,t)}return n.beta=function(t){return e(+t)},n})(.85);function Ph(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Fh(e,t){this._context=e,this._k=(1-t)/6}Fh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ph(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Ph(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Ih=(function e(t){function n(e){return new Fh(e,t)}return n.tension=function(t){return e(+t)},n})(0);function Lh(e,t){this._context=e,this._k=(1-t)/6}Lh.prototype={areaStart:wh,areaEnd:wh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Ph(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Rh=(function e(t){function n(e){return new Lh(e,t)}return n.tension=function(t){return e(+t)},n})(0);function zh(e,t){this._context=e,this._k=(1-t)/6}zh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ph(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Bh=(function e(t){function n(e){return new zh(e,t)}return n.tension=function(t){return e(+t)},n})(0);function Vh(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>oh){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>oh){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*l+e._x1*e._l23_2a-t*e._l12_2a)/u,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function Hh(e,t){this._context=e,this._alpha=t}Hh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=(n*n+r*r)**+this._alpha)}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Vh(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Uh=(function e(t){function n(e){return t?new Hh(e,t):new Fh(e,0)}return n.alpha=function(t){return e(+t)},n})(.5);function Wh(e,t){this._context=e,this._alpha=t}Wh.prototype={areaStart:wh,areaEnd:wh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=(n*n+r*r)**+this._alpha)}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Vh(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Gh=(function e(t){function n(e){return t?new Wh(e,t):new Lh(e,0)}return n.alpha=function(t){return e(+t)},n})(.5);function Kh(e,t){this._context=e,this._alpha=t}Kh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=(n*n+r*r)**+this._alpha)}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Vh(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var qh=(function e(t){function n(e){return t?new Kh(e,t):new zh(e,0)}return n.alpha=function(t){return e(+t)},n})(.5);function Jh(e){this._context=e}Jh.prototype={areaStart:wh,areaEnd:wh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Yh(e){return new Jh(e)}function Xh(e){return e<0?-1:1}function Zh(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(Xh(a)+Xh(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function Qh(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function $h(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,s=(a-r)/3;e._context.bezierCurveTo(r+s,i+s*t,a-s,o-s*n,a,o)}function eg(e){this._context=e}eg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:$h(this,this._t0,Qh(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,$h(this,Qh(this,n=Zh(this,e,t)),n);break;default:$h(this,this._t0,n=Zh(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function tg(e){this._context=new ng(e)}(tg.prototype=Object.create(eg.prototype)).point=function(e,t){eg.prototype.point.call(this,t,e)};function ng(e){this._context=e}ng.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function rg(e){return new eg(e)}function ig(e){return new tg(e)}function ag(e){this._context=e}ag.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=og(e),i=og(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function og(e){var t,n=e.length-1,r,i=Array(n),a=Array(n),o=Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function sg(e){return new ag(e)}function cg(e,t){this._context=e,this._t=t}cg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}this._x=e,this._y=t}};function lg(e){return new cg(e,.5)}function ug(e){return new cg(e,0)}function dg(e){return new cg(e,1)}function fg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t];t%2?fg(Object(n),!0).forEach(function(t){hg(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fg(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function mg(e){"@babel/helpers - typeof";return mg=typeof Symbol==`function`&&typeof Symbol.iterator==`symbol`?function(e){return typeof e}:function(e){return e&&typeof Symbol==`function`&&e.constructor===Symbol&&e!==Symbol.prototype?`symbol`:typeof e},mg(e)}function hg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gg(){return gg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gg.apply(this,arguments)}function _g(e,t){if(e){if(typeof e==`string`)return vg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n===`Object`&&e.constructor&&(n=e.constructor.name),n===`Map`||n===`Set`)return Array.from(e);if(n===`Arguments`||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vg(e,t)}}function vg(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function yg(e,t){var n=typeof Symbol<`u`&&e[Symbol.iterator]||e[`@@iterator`];if(!n){if(Array.isArray(e)||(n=_g(e))||t&&e&&typeof e.length==`number`){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{!a&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function bg(e,t){var n=[],r=[];function i(e,t){if(e.length===1)n.push(e[0]),r.push(e[0]);else{for(var a=Array(e.length-1),o=0;o<a.length;o++)o===0&&n.push(e[0]),o===a.length-1&&r.push(e[o+1]),a[o]=[(1-t)*e[o][0]+t*e[o+1][0],(1-t)*e[o][1]+t*e[o+1][1]];i(a,t)}}return e.length&&i(e,t),{left:n,right:r.reverse()}}function xg(e){var t={};return e.length===4&&(t.x2=e[2][0],t.y2=e[2][1]),e.length>=3&&(t.x1=e[1][0],t.y1=e[1][1]),t.x=e[e.length-1][0],t.y=e[e.length-1][1],e.length===4?t.type=`C`:e.length===3?t.type=`Q`:t.type=`L`,t}function Sg(e,t){t||=2;for(var n=[],r=e,i=1/t,a=0;a<t-1;a++){var o=i/(1-i*a),s=bg(r,o);n.push(s.left),r=s.right}return n.push(r),n}function Cg(e,t,n){var r=[[e.x,e.y]];return t.x1!=null&&r.push([t.x1,t.y1]),t.x2!=null&&r.push([t.x2,t.y2]),r.push([t.x,t.y]),Sg(r,n).map(xg)}var wg=/[MLCSTQAHVZmlcstqahv]|-?[\d.e+-]+/g,Tg={M:[`x`,`y`],L:[`x`,`y`],H:[`x`],V:[`y`],C:[`x1`,`y1`,`x2`,`y2`,`x`,`y`],S:[`x2`,`y2`,`x`,`y`],Q:[`x1`,`y1`,`x`,`y`],T:[`x`,`y`],A:[`rx`,`ry`,`xAxisRotation`,`largeArcFlag`,`sweepFlag`,`x`,`y`],Z:[]};Object.keys(Tg).forEach(function(e){Tg[e.toLowerCase()]=Tg[e]});function Eg(e,t){for(var n=Array(e),r=0;r<e;r++)n[r]=t;return n}function Dg(e){return`${e.type}${Tg[e.type].map(function(t){return e[t]}).join(`,`)}`}function Og(e,t){var n={x1:`x`,y1:`y`,x2:`x`,y2:`y`},r=[`xAxisRotation`,`largeArcFlag`,`sweepFlag`];if(e.type!==t.type&&t.type.toUpperCase()!==`M`){var i={};Object.keys(t).forEach(function(a){var o=t[a],s=e[a];s===void 0&&(r.includes(a)?s=o:(s===void 0&&n[a]&&(s=e[n[a]]),s===void 0&&(s=0))),i[a]=s}),i.type=t.type,e=i}return e}function kg(e,t,n){var r=[];if(t.type===`L`||t.type===`Q`||t.type===`C`)r=r.concat(Cg(e,t,n));else{var i=gg({},e);i.type===`M`&&(i.type=`L`),r=r.concat(Eg(n-1).map(function(){return i})),r.push(t)}return r}function Ag(e,t,n){var r=e.length-1,i=t.length-1,a=r/i,o=Eg(i).reduce(function(t,r,i){var o=Math.floor(a*i);if(n&&o<e.length-1&&n(e[o],e[o+1])){var s=a*i%1<.5;t[o]&&(s?o>0?--o:o<e.length-1&&(o+=1):o<e.length-1?o+=1:o>0&&--o)}return t[o]=(t[o]||0)+1,t},[]),s=o.reduce(function(t,n,r){if(r===e.length-1){var i=Eg(n,gg({},e[e.length-1]));return i[0].type===`M`&&i.forEach(function(e){e.type=`L`}),t.concat(i)}return t.concat(kg(e[r],e[r+1],n))},[]);return s.unshift(e[0]),s}function jg(e){for(var t=(e||``).match(wg)||[],n=[],r,i,a=0;a<t.length;++a)if(r=Tg[t[a]],r){i={type:t[a]};for(var o=0;o<r.length;++o)i[r[o]]=+t[a+o+1];a+=r.length,n.push(i)}return n}function Mg(e,t,n){var r=e==null?[]:e.slice(),i=t==null?[]:t.slice(),a=mg(n)===`object`?n:{excludeSegment:n,snapEndsToInput:!0},o=a.excludeSegment,s=a.snapEndsToInput;if(!r.length&&!i.length)return function(){return[]};var c=(r.length===0||r[r.length-1].type===`Z`)&&(i.length===0||i[i.length-1].type===`Z`);r.length>0&&r[r.length-1].type===`Z`&&r.pop(),i.length>0&&i[i.length-1].type===`Z`&&i.pop(),r.length?i.length||i.push(r[0]):r.push(i[0]);var l=Math.abs(i.length-r.length);l!==0&&(i.length>r.length?r=Ag(r,i,o):i.length<r.length&&(i=Ag(i,r,o))),r=r.map(function(e,t){return Og(e,i[t])});var u=r.map(function(e){return pg({},e)});return c&&(u.push({type:`Z`}),r.push({type:`Z`})),function(e){if(e===1&&s)return t??[];if(e===0)return r;for(var n=0;n<u.length;++n){var a=r[n],o=i[n],c=u[n],l=yg(Tg[c.type]),d;try{for(l.s();!(d=l.n()).done;){var f=d.value;c[f]=(1-e)*a[f]+e*o[f],(f===`largeArcFlag`||f===`sweepFlag`)&&(c[f]=Math.round(c[f]))}}catch(e){l.e(e)}finally{l.f()}}return u}}function Ng(e,t,n){var r=jg(e),i=jg(t),a=mg(n)===`object`?n:{excludeSegment:n,snapEndsToInput:!0},o=a.excludeSegment,s=a.snapEndsToInput;if(!r.length&&!i.length)return function(){return``};var c=Mg(r,i,{excludeSegment:o,snapEndsToInput:s});return function(e){if(e===1&&s)return t??``;var n=c(e),r=``,i=yg(n),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;r+=Dg(o)}}catch(e){i.e(e)}finally{i.f()}return r}}function Pg(e,t,n,r){if(Array.isArray(t)&&isFinite(n))return t[n%t.length];let i=Sr(e,t,n);return i||(cr(n)&&!r?`var(${Oc(n)})`:null)}var $;(function(e){e.Basis=`basis`,e.BasisClosed=`basisClosed`,e.BasisOpen=`basisOpen`,e.Bundle=`bundle`,e.Cardinal=`cardinal`,e.CardinalClosed=`cardinalClosed`,e.CardinalOpen=`cardinalOpen`,e.CatmullRom=`catmullRom`,e.CatmullRomClosed=`catmullRomClosed`,e.CatmullRomOpen=`catmullRomOpen`,e.Linear=`linear`,e.LinearClosed=`linearClosed`,e.MonotoneX=`monotoneX`,e.MonotoneY=`monotoneY`,e.Natural=`natural`,e.Step=`step`,e.StepAfter=`stepAfter`,e.StepBefore=`stepBefore`})($||={});const Fg={[$.Basis]:Dh,[$.BasisClosed]:kh,[$.BasisOpen]:jh,[$.Bundle]:Nh,[$.Cardinal]:Ih,[$.CardinalClosed]:Rh,[$.CardinalOpen]:Bh,[$.CatmullRom]:Uh,[$.CatmullRomClosed]:Gh,[$.CatmullRomOpen]:qh,[$.Linear]:yh,[$.LinearClosed]:Yh,[$.MonotoneX]:rg,[$.MonotoneY]:ig,[$.Natural]:sg,[$.Step]:lg,[$.StepAfter]:dg,[$.StepBefore]:ug},Ig=Object.assign(Object.assign({},Gm),{curveType:$.MonotoneX,lineWidth:2,lineDashArray:void 0,fallbackValue:void 0,highlightOnHover:!1,cursor:null,interpolateMissingData:!1});var Lg={};Me(Lg,{dim:()=>Ug,globalStyles:()=>Rg,interpolatedPath:()=>Wg,line:()=>Bg,linePath:()=>Vg,lineSelectionHelper:()=>Hg,root:()=>zg});const Rg=kn`
  :root {
    --vis-line-cursor: default;
    --vis-line-stroke-dasharray: none;
    --vis-line-stroke-dashoffset: 0;

    --vis-line-gapfill-stroke-dasharray: 2 3;
    --vis-line-gapfill-stroke-opacity: 0.8;
    --vis-line-gapfill-stroke-dashoffset: 0;
  }
`,zg=U`
  label: line-component;
`,Bg=U`
  label: line;
  transition: opacity 200ms;
  cursor: var(--vis-line-cursor);
`,Vg=U`
  label: linePath;
  fill: none;
  stroke-dasharray: var(--vis-line-stroke-dasharray);
  stroke-dashoffset: var(--vis-line-stroke-dashoffset);
`,Hg=U`
  label: lineSelectionHelper;
  fill: none;
  stroke: rgba(0, 0, 0, 0);
  stroke-width: 8px;
`,Ug=U`
  opacity: 0.2;
`,Wg=U`
  label: interpolated-path;
  fill: none;
  stroke-dasharray: var(--vis-line-gapfill-stroke-dasharray);
  stroke-dashoffset: var(--vis-line-gapfill-stroke-dashoffset);
  stroke-opacity: var(--vis-line-gapfill-stroke-opacity);
`;var Gg=class e extends Km{constructor(t){super(),this._defaultConfig=Ig,this.config=this._defaultConfig,this.curve=Fg[$.MonotoneX],this.events={[e.selectors.line]:{mouseover:this._highlight.bind(this),mouseleave:this._resetHighlight.bind(this)}},t&&this.setConfig(t)}get bleed(){let{config:{lineWidth:e}}=this,t=this.yScale.domain(),n=this.yScale.range()[0]>this.yScale.range()[1]?zm.North:zm.South,r=n===zm.South,i=e>3,a=e>=10;return{top:!a&&(!r&&t[1]===0||r&&t[0]===0)?0:e/2,bottom:!a&&(!r&&t[0]===0||r&&t[1]===0)?0:e/2,left:i?e/2:0,right:i?e/2:0}}_render(e){super._render(e);let{config:t,datamodel:{data:n}}=this,r=cr(e)?e:t.duration;this.curve=Fg[t.curveType],this.lineGen=Sh().x(e=>e.x).y(e=>e.y).defined(e=>e.defined).curve(this.curve);let i=dr(t.y)?t.y:[t.y],a=n.map((e,n)=>this.xScale(W(e,t.x,n))),o=i.map(e=>{let r=n.map((n,r)=>{let i=W(n,e,r),o=(cr(i)||i===null)&&isFinite(i)?i:t.fallbackValue,s=t.interpolateMissingData?(cr(i)||i===null)&&isFinite(i):isFinite(o);return{x:a[r],y:this.yScale(o??0),defined:s,value:o}}),i=r.reduce((e,t)=>t.defined||e,!1),o=!1,s=r.reduce((e,n,i)=>{!n.defined&&isFinite(t.fallbackValue)&&e.push(Object.assign(Object.assign({},n),{defined:!0})),!n.defined&&!o&&(o=!0);let a=i>0&&!r[i-1].defined||i<r.length-1&&!r[i+1].defined;return n.defined&&a&&(o||e.push(Object.assign(Object.assign({},n),{defined:!1})),e.push(n),o=!1),e},[]),c=i&&r.some(e=>e.value!==null);return{values:r,defined:i,gaps:s,visible:c}}),s=this.g.selectAll(`.${Bg}`).data(o),c=s.enter().append(`g`).attr(`class`,Bg);c.append(`path`).attr(`class`,Vg).attr(`stroke`,(e,r)=>Pg(n,t.color,r)).attr(`stroke-opacity`,0).attr(`stroke-width`,t.lineWidth),c.append(`path`).attr(`class`,Hg).attr(`d`,this._emptyPath()),c.append(`path`).attr(`class`,Wg).attr(`d`,this._emptyPath()).style(`opacity`,0);let l=c.merge(s);l.style(`cursor`,(e,r)=>Sr(n,t.cursor,r)),l.each((e,i,a)=>{var o;let s=Ao(a[i]),c=s.select(`.${Vg}`),l=s.select(`.${Hg}`),u=s.select(`.${Wg}`),d=e.visible,f=xr(n,t.lineDashArray,i),p=G(c,r).attr(`stroke`,Pg(n,t.color,i)).attr(`stroke-width`,t.lineWidth).attr(`stroke-opacity`,d?1:0).style(`stroke-dasharray`,(o=f?.join(` `))??null),m=e.values.some(e=>!e.defined),h=this.lineGen(e.values);if(r&&!m){let e=c.attr(`d`)||this._emptyPath(),t=h||this._emptyPath(),n=p;n.attrTween(`d`,()=>Ng(e,t))}else e.visible&&p.attr(`d`,h);l.attr(`d`,h).attr(`visibility`,d?null:`hidden`),m&&t.interpolateMissingData?G(u,r).attr(`d`,this.lineGen(e.gaps)).attr(`stroke`,Pg(n,t.color,i)).attr(`stroke-width`,t.lineWidth-1).style(`opacity`,1):u.transition().duration(r).style(`opacity`,0)}),G(s.exit(),r).style(`opacity`,0).remove()}_emptyPath(){let e=this.xScale.range(),t=this.yScale.range();return`M${e[0]},${t[0]} L${e[1]},${t[0]}`}_highlight(e){let{config:t}=this;t.highlightOnHover&&this.g.selectAll(`.${Bg}`).classed(Ug,t=>t!==e)}_resetHighlight(){let{config:e}=this;e.highlightOnHover&&this.g.selectAll(`.${Bg}`).classed(Ug,!1)}};Gg.selectors=Lg;function Kg({x:e,y:t,w:n,h:r,tl:i=!1,tr:a=!1,bl:o=!1,br:s=!1,r:c=0}){let l;l=`M${e+c},${t}h${n-2*c}`;let u=a?c:0,d=a?0:c;return l+=`a${u},${u} 0 0 1 ${u},${u}`,l+=`h${d}v${d}`,l+=`v${r-2*c}`,u=s?c:0,d=s?0:c,l+=`a${u},${u} 0 0 1 ${-u},${u}`,l+=`v${d}h${-d}`,l+=`h${2*c-n}`,u=o?c:0,d=o?0:c,l+=`a${u},${u} 0 0 1 ${-u},${-u}`,l+=`h${-d}v${-d}`,l+=`v${2*c-r}`,u=i?c:0,d=i?0:c,l+=`a${u},${u} 0 0 1 ${u},${-u}`,l+=`v${-d}h${d}`,l+=`z`,l}const qg=Object.assign(Object.assign({},Gm),{color:void 0,groupMaxWidth:void 0,groupWidth:void 0,dataStep:void 0,groupPadding:.05,barPadding:0,roundedCorners:2,barMinHeight:2,cursor:null,orientation:Ym.Vertical});var Jg={};Me(Jg,{bar:()=>Zg,barGroup:()=>Qg,barGroupExit:()=>$g,globalStyles:()=>Xg,root:()=>Yg});const Yg=U`
  label: grouped-bar-component;
`,Xg=kn`
  :root {
    --vis-grouped-bar-cursor: default;
    --vis-grouped-bar-fill-color: var(--vis-color-main);
    --vis-grouped-bar-stroke-color: none;
    --vis-grouped-bar-stroke-width: 0px;
    --vis-grouped-bar-hover-stroke-width: 1px;
    --vis-grouped-bar-hover-stroke-color: none;


    /* Dark Theme */
    --vis-dark-grouped-bar-stroke-color: none;
  }

  body.theme-dark ${`.${Yg}`} {
    --vis-grouped-bar-stroke-color: var(--vis-dark-grouped-bar-stroke-color);
  }
`,Zg=U`
  label: bar;
  fill: var(--vis-grouped-bar-fill-color);
  stroke: var(--vis-grouped-bar-stroke-color);
  stroke-width: var(--vis-grouped-bar-stroke-width);
  cursor: var(--vis-grouped-bar-cursor);

  &:hover {
    stroke-width: var(--vis-grouped-bar-hover-stroke-width);
    stroke: var(--vis-grouped-bar-hover-stroke-color);
  }
`,Qg=U`
  label: barGroup;
`,$g=U`
  label: barGroupExit;
`;var e_=class extends Km{constructor(e){super(),this._defaultConfig=qg,this.config=this._defaultConfig,this.getAccessors=()=>dr(this.config.y)?this.config.y:[this.config.y],this.events={},this._barData=[],e&&this.setConfig(e)}get bleed(){if(this._barData=this._getVisibleData(),this._barData.length===0)return{top:0,bottom:0,left:0,right:0};let e=!this.isVertical()&&this.dataScale.range()[0]>this.dataScale.range()[1],t=this.dataScale.domain(),n=this._getGroupWidth()/2,r=this._barData.map((e,t)=>W(e,this.config.x,t)),i=$n(r),a=Qn(r),o=this.dataScale(i),s=this.dataScale(a),c=this.dataScale.invert(o+(e?n:-n)),l=this.dataScale.invert(s+(e?-n:n)),u=c<=t[0]?this.dataScale(t[0])-this.dataScale(c):0,d=l>t[1]?this.dataScale(l)-this.dataScale(t[1]):0;return{top:this.isVertical()?0:e?-d:u,bottom:this.isVertical()?0:e?-u:d,left:this.isVertical()?u:0,right:this.isVertical()?d:0}}get dataScale(){return this.isVertical()?this.xScale:this.yScale}get valueScale(){return this.isVertical()?this.yScale:this.xScale}isVertical(){return this.config.orientation===Ym.Vertical}_render(e){let{config:t}=this,n=cr(e)?e:t.duration,r=this._getGroupWidth(),i=this.getAccessors(),a=[-r/2,r/2],o=ed().domain(ir(i.length)).range(a).paddingInner(t.barPadding).paddingOuter(t.barPadding),s=this.g.selectAll(`.${Qg}`).data(this._barData,(e,n)=>{var r;return`${(r=Sr(e,t.id,n))??n}`}),c=(e,n)=>{let r=this.dataScale(W(e,t.x,n)),i=this.isVertical()?r:0,a=this.isVertical()?0:r;return`translate(${i},${a})`},l=s.enter().append(`g`).attr(`class`,Qg).attr(`transform`,c).style(`opacity`,1),u=l.merge(s);G(u,n).attr(`transform`,c).style(`opacity`,1);let d=s.exit().attr(`class`,$g);G(d,n).style(`opacity`,0).remove(),G(d.selectAll(`.${Zg}`),n).attr(`transform`,(e,t,n)=>this.isVertical()?`translate(0,${this.yScale(0)}) scale(1,0)`:`translate(${this.xScale(0)},0) scale(0,1)`);let f=o.bandwidth(),p=u.selectAll(`.${Zg}`).data(e=>i.map(()=>e)),m=this._getValueAxisDirection(),h=p.enter().append(`path`).attr(`class`,Zg).attr(`d`,(e,t)=>{let n=o(t),r=this.valueScale(0),i=f,a=0;return this._getBarPath(n,r,i,a,!1,m)}).style(`fill`,(e,n)=>Pg(e,t.color,n)),g=h.merge(p);G(g,n).attr(`d`,(e,n)=>{let r=o(n),a=f,s=W(e,i[n]),c=s<0,l=c?this.valueScale(0):this.valueScale(s||0),u=Math.abs(this.valueScale(0)-this.valueScale(s))||0;if(u<t.barMinHeight){let e=m===zm.North?-1:1;l=this.valueScale(0)+e*t.barMinHeight,u=t.barMinHeight}return this._getBarPath(r,l,a,u,c,m)}).style(`fill`,(e,n)=>Pg(e,t.color,n)).style(`cursor`,(e,n)=>Sr(e,t.cursor,n)),G(p.exit(),n).remove()}_getValueAxisDirection(){return this.valueScale.range()[0]>this.valueScale.range()[1]?zm.North:zm.South}_getVisibleData(){let{config:e,datamodel:{data:t}}=this,n=this._getGroupWidth(),r=t.length<2?0:n/2,i=this.dataScale,a=Math.abs(i.invert(r)-i.invert(0)),o=t?.filter((t,n)=>{let r=W(t,e.x,n),o=i.domain(),s=+o[0],c=+o[1];return r>=s-a&&r<=c+a});return o}_getBarPath(e,t,n,r,i,a){let{config:o}=this,s=o.roundedCorners?cr(o.roundedCorners)?+o.roundedCorners:n/2:0,c=wr(s,0,Math.min(r,n)/2),l=a===zm.North,u=this.isVertical()&&i!==l,d=this.isVertical()&&i===l,f=!this.isVertical()&&i,p=!this.isVertical()&&!i;return Kg({x:this.isVertical()?e:t+(l?0:-r),y:this.isVertical()?t+(l?0:-r):e,w:this.isVertical()?n:r,h:this.isVertical()?r:n,tl:u||f,tr:u||p,bl:d||f,br:d||p,r:c})}_getGroupWidth(){let{config:e,datamodel:{data:t}}=this;if(hr(t))return 0;if(e.groupWidth)return $n([e.groupWidth,e.groupMaxWidth]);let n=this.dataScale.bandwidth,r=this.dataScale.domain?this.dataScale.domain():[],i=n?r.length:r[1]-r[0],a=1+i/e.dataStep||!n&&t.filter((t,n)=>{let i=W(t,e.x,n);return i>=r[0]&&i<=r[1]}).length||t.length;!n&&a>=2&&(a+=1);let o=a<2?1:1-e.groupPadding,s=o*(this.isVertical()?this._width:this._height)/a;return $n([s,e.groupMaxWidth])}getValueScaleExtent(e){let{datamodel:t}=this,n=this.getAccessors(),r=e?this._getVisibleData():t.data,i=Or(r,...n),a=kr(r,...n);return[i>0?0:i,a<0?0:a]}getDataScaleExtent(){let{config:e,datamodel:t}=this;return Ar(t.data,e.x)}getYDataExtent(e){return this.isVertical()?this.getValueScaleExtent(e):this.getDataScaleExtent()}getXDataExtent(){return this.isVertical()?this.getDataScaleExtent():this.getValueScaleExtent(!1)}};e_.selectors=Jg;function t_(e){return e}var n_=1,r_=2,i_=3,a_=4,o_=1e-6;function s_(e){return`translate(`+e+`,0)`}function c_(e){return`translate(0,`+e+`)`}function l_(e){return t=>+e(t)}function u_(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function d_(){return!this.__axis}function f_(e,t){var n=[],r=null,i=null,a=6,o=6,s=3,c=typeof window<`u`&&window.devicePixelRatio>1?0:.5,l=e===n_||e===a_?-1:1,u=e===a_||e===r_?`x`:`y`,d=e===n_||e===i_?s_:c_;function f(f){var p=r??(t.ticks?t.ticks.apply(t,n):t.domain()),m=i??(t.tickFormat?t.tickFormat.apply(t,n):t_),h=Math.max(a,0)+s,g=t.range(),_=+g[0]+c,v=+g[g.length-1]+c,y=(t.bandwidth?u_:l_)(t.copy(),c),b=f.selection?f.selection():f,x=b.selectAll(`.domain`).data([null]),S=b.selectAll(`.tick`).data(p,t).order(),C=S.exit(),w=S.enter().append(`g`).attr(`class`,`tick`),T=S.select(`line`),E=S.select(`text`);x=x.merge(x.enter().insert(`path`,`.tick`).attr(`class`,`domain`).attr(`stroke`,`currentColor`)),S=S.merge(w),T=T.merge(w.append(`line`).attr(`stroke`,`currentColor`).attr(u+`2`,l*a)),E=E.merge(w.append(`text`).attr(`fill`,`currentColor`).attr(u,l*h).attr(`dy`,e===n_?`0em`:e===i_?`0.71em`:`0.32em`)),f!==b&&(x=x.transition(f),S=S.transition(f),T=T.transition(f),E=E.transition(f),C=C.transition(f).attr(`opacity`,o_).attr(`transform`,function(e){return isFinite(e=y(e))?d(e+c):this.getAttribute(`transform`)}),w.attr(`opacity`,o_).attr(`transform`,function(e){var t=this.parentNode.__axis;return d((t&&isFinite(t=t(e))?t:y(e))+c)})),C.remove(),x.attr(`d`,e===a_||e===r_?o?`M`+l*o+`,`+_+`H`+c+`V`+v+`H`+l*o:`M`+c+`,`+_+`V`+v:o?`M`+_+`,`+l*o+`V`+c+`H`+v+`V`+l*o:`M`+_+`,`+c+`H`+v),S.attr(`opacity`,1).attr(`transform`,function(e){return d(y(e)+c)}),T.attr(u+`2`,l*a),E.attr(u,l*h).text(m),b.filter(d_).attr(`fill`,`none`).attr(`font-size`,10).attr(`font-family`,`sans-serif`).attr(`text-anchor`,e===r_?`start`:e===a_?`end`:`middle`),b.each(function(){this.__axis=y})}return f.scale=function(e){return arguments.length?(t=e,f):t},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(e){return arguments.length?(n=e==null?[]:Array.from(e),f):n.slice()},f.tickValues=function(e){return arguments.length?(r=e==null?null:Array.from(e),f):r&&r.slice()},f.tickFormat=function(e){return arguments.length?(i=e,f):i},f.tickSize=function(e){return arguments.length?(a=o=+e,f):a},f.tickSizeInner=function(e){return arguments.length?(a=+e,f):a},f.tickSizeOuter=function(e){return arguments.length?(o=+e,f):o},f.tickPadding=function(e){return arguments.length?(s=+e,f):s},f.offset=function(e){return arguments.length?(c=+e,f):c},f}function p_(e){return f_(n_,e)}function m_(e){return f_(r_,e)}function h_(e){return f_(i_,e)}function g_(e){return f_(a_,e)}var __;(function(e){e.Start=`start`,e.Middle=`middle`,e.End=`end`})(__||={});var v_;(function(e){e.Top=`top`,e.Middle=`middle`,e.Bottom=`bottom`})(v_||={});var y_;(function(e){e.Wrap=`wrap`,e.Trim=`trim`})(y_||={});var b_;(function(e){e.Left=`left`,e.Center=`center`,e.Right=`right`})(b_||={});var x_=je(((exports,t)=>{(function(e){if(typeof n!=`function`){var n=function(e){return e};n.nonNative=!0}let r=n(`plaintext`),i=n(`html`),a=n(`comment`),o=/<(\w*)>/g,s=/<\/?([^\s\/>]+)/;function c(e,t,n){e||=``,t||=[],n||=``;let r=u(t,n);return d(e,r)}function l(e,t){e||=[],t||=``;let n=u(e,t);return function(e){return d(e||``,n)}}c.init_streaming_mode=l;function u(e,t){return e=f(e),{allowable_tags:e,tag_replacement:t,state:r,tag_buffer:``,depth:0,in_quote_char:``}}function d(e,t){if(typeof e!=`string`)throw TypeError(`'html' parameter must be a string`);let n=t.allowable_tags,o=t.tag_replacement,s=t.state,c=t.tag_buffer,l=t.depth,u=t.in_quote_char,d=``;for(let t=0,f=e.length;t<f;t++){let f=e[t];if(s===r)switch(f){case`<`:s=i,c+=f;break;default:d+=f;break}else if(s===i)switch(f){case`<`:if(u)break;l++;break;case`>`:if(u)break;if(l){l--;break}u=``,s=r,c+=`>`,n.has(p(c))?d+=c:d+=o,c=``;break;case`"`:case`'`:f===u?u=``:u||=f,c+=f;break;case`-`:c===`<!-`&&(s=a),c+=f;break;case` `:case`
`:if(c===`<`){s=r,d+=`< `,c=``;break}c+=f;break;default:c+=f;break}else if(s===a)switch(f){case`>`:c.slice(-2)==`--`&&(s=r),c=``;break;default:c+=f;break}}return t.state=s,t.tag_buffer=c,t.depth=l,t.in_quote_char=u,d}function f(e){let t=new Set;if(typeof e==`string`){let n;for(;n=o.exec(e);)t.add(n[1])}else !n.nonNative&&typeof e[n.iterator]==`function`?t=new Set(e):typeof e.forEach==`function`&&e.forEach(t.add,t);return t}function p(e){let t=s.exec(e);return t?t[1].toLowerCase():null}typeof define==`function`&&define.amd?define(function(){return c}):typeof t==`object`&&t.exports?t.exports=c:e.striptags=c})(exports)}));function S_(e){switch(e){case b_.Center:return`middle`;case b_.Right:return`end`;case b_.Left:default:return`start`}}var C_=Ne(x_());const w_=e=>{switch(e){case b_.Left:return`start`;case b_.Right:return`end`;case b_.Center:return`middle`;default:return null}};function T_(e){return e.replace(/-([a-z])/g,(e,t)=>t.toUpperCase())}function E_(e){var t;return(t=e.match(/[A-Z]{2,}(?=[A-Z][a-z0-9]*|\b)|[A-Z]?[a-z0-9]*|[A-Z]|[0-9]+/g))?.filter(Boolean).map(e=>e.toLowerCase()).join(`-`)}function D_(e){return e.replace(/['"]/g,`&#39;`).replace(/\u0000/g,`\\0`).replace(/\n/g,`\\n`).replace(/\r/g,`\\r`).replace(/\v/g,`\\v`).replace(/\t/g,`\\t`).replace(/\f/g,`\\f`)}function O_(e,t=15){return e?e.length>t?`…${e.substr(e.length-t,t)}`:e:``}function k_(e,t=15){if(!e)return``;let n=Math.floor((t-3)/2);return e.length>t?`${e.substr(0,n)}…${e.substr(-n,n)}`:e}function A_(e,t=15){return e?e.length>t?`${e.substr(0,t)}…`:e:``}function j_(e,t=15,n=__.Middle){if(!e)return``;let r=A_(e,t);return n===__.Start?r=O_(e,t):n===__.Middle&&(r=k_(e,t)),r}function M_(e,t=[` `]){let n=[e];for(let e=0;e<t.length;e++){let r=t[e];n.forEach((e,t)=>{let i=e.split(r),a=i.map((e,t)=>`${e}${t===i.length-1?``:r}`);n[t]=a}),n=_r(n)}return n}function N_(e,t,n=[` `,`-`,`.`,`,`]){let r=e.text();if(!r)return;let i=dr(n)?n:[n],a=M_(r,i),o=parseFloat(e.attr(`x`))||0;e.text(``);let s=e.append(`tspan`).attr(`x`,o),c=`${a[0]}`;s.text(c),a.forEach((n,r)=>{if(r===0)return;let i=`${c}${n}`;s.text(i);let a=s.node().getComputedTextLength();a>t?(s.text(c.trim()),s=e.append(`tspan`).attr(`x`,o).attr(`dy`,`1.2em`).text(n),c=n):c+=n})}function P_(e,t,n,r,i,a){var o;t===void 0&&(t=50),n===void 0&&(n=__.Middle),r===void 0&&(r=!0),i===void 0&&(i=+(o=window.getComputedStyle(e.node()))?.fontSize||0),a===void 0&&(a=Hc());let s=e.text()||``,c=s.length,l=r?i*c*a:e.node().getComputedTextLength(),u=1.1,d=Math.ceil(c*t/(u*l));return d<c?(e.text(j_(s,d,n)),!0):!1}function F_(e,t,n=Hc()){return e.length*t*n||0}function I_(e,t,n){let r=`http://www.w3.org/2000/svg`,i=document.createElementNS(r,`svg`),a=document.createElementNS(r,`text`);a.textContent=e,a.setAttribute(`font-size`,`${n}`),a.setAttribute(`font-family`,t),i.appendChild(a),document.body.appendChild(i);let o=a.getComputedTextLength();return document.body.removeChild(i),o}function L_(e,t=void 0,n=!0,r=zc,i=!1){var a,o,s;let c=`${e.text}`;if(!c)return[];let l=(a=e.fontSize)??Vc.fontSize,u=(o=e.fontFamily)??Vc.fontFamily,d=(s=e.fontWidthToHeightRatio)??Vc.fontWidthToHeightRatio,f=Array.isArray(r)?r:[r],p=c.split(`
`);return p.map(e=>{let r=[];if(!t)return[e];let a=M_(e,f),o=``;for(let e=0;e<a.length;e+=1){let s=n?F_(o+a[e],l,d):I_(o+a[e],u,l);s<t||e===0?o+=a[e]:(r.push(o.trim()),o=a[e]);let c=2;if(i)for(;o.trim().length>c;){let e=n?F_(o,l,d):I_(o,u,l);if(e>t){let e=o.trim().length-c;for(;e>0;){let i=`${o.substring(0,e)}${Bc}`,a=n?F_(i,l,d):I_(i,u,l);if(a<=t||e===1){r.push(i.trim()),o=o.substring(e);break}e--}}else break}}return o&&r.push(o.trim()),r}).flat()}function R_(e,t=void 0,n=void 0,r=!0,i=zc,a=!1){let o=Array.isArray(e)?e.map(e=>yr(Vc,e)):[yr(Vc,e)],s=o.map(e=>L_(e,t,r,i,a)),c=o[0],l=-c.fontSize*(c.lineHeight-1),u=[];return o.forEach((e,i)=>{var a;let o=s[i],c=i>0?u[i-1]:void 0,d=c?c.marginBottom:0,f=e.marginTop,p=Math.max(d,f);l+=p;let m=e.fontSize*e.lineHeight,h=0;for(let i=0;i<o.length;i+=1){let a=o[i];l+=m;let s=`${a} …`,c=r?F_(s,e.fontSize,e.fontWidthToHeightRatio):I_(s,e.fontFamily,e.fontSize);if(h=Math.max(c,h),n&&l+m>n&&i!==o.length-1){let e=a.charAt(a.length-1);e===Bc&&(a=a.substr(0,o[i].length-1)),c<t?o[i]=s:o[i]=`${o[i].substr(0,o[i].length-2)}…`,o=o.slice(0,i+1);break}}u.push(Object.assign(Object.assign({},e),{_lines:o,_estimatedHeight:l-(c?._estimatedHeight||0),_maxWidth:Math.max(h,(a=c?._maxWidth)??0)}))}),u}function z_(e,t=0,n){return e.map((r,i)=>{let a=i>0?e[i-1]:void 0,o=a?a.marginBottom/a.fontSize:0,s=r.marginTop/r.fontSize,c=Math.max(o,s),l={fontSize:r.fontSize,fontFamily:r.fontFamily,fontWeight:r.fontWeight,fill:r.color,y:i===0&&n},u=Object.entries(l).filter(([e,t])=>t).map(([e,t])=>`${E_(e)}="${D_(t.toString())}"`).join(` `);return`<tspan xmlns="http://www.w3.org/2000/svg" ${u}>${r._lines.map((e,n)=>{let a;return a=i===0&&n===0?.8+c:n===0?c+r.lineHeight:r.lineHeight,`<tspan x="${t}" dy="${a}em">${e.length?e:`\xA0`}</tspan>`}).join(``)}</tspan>`})}function B_(e){return ar(e,e=>e._estimatedHeight)}const V_=[`text`,`tspan`,`textPath`,`altGlyph`,`altGlyphDef`,`altGlyphItem`,`glyphRef`,`textRef`,`textArea`];function H_(e,t,n,r){var i,a;let o=R_(t,n.width,void 0,n.fastMode,n.separator,n.wordBreak),s=(i=n.x)??+e.getAttribute(`x`),c=(a=n.y)??+e.getAttribute(`y`),l=s??0,u=c??0;if(n.textAlign&&e.setAttribute(`text-anchor`,S_(n.textAlign)),n.verticalAlign&&n.verticalAlign!==v_.Top){let e=B_(o),t=n.verticalAlign===v_.Middle?-e/2:n.verticalAlign===v_.Bottom?-e:0;u+=t}if(n.textRotationAngle?e.setAttribute(`transform`,`rotate(${n.textRotationAngle===0||n.textRotationAngle?n.textRotationAngle:0} ${l} ${u})`):e.removeAttribute(`transform`),!r){let t=new DOMParser;e.textContent=``,o.forEach(n=>{let r=z_([n],l,u).join(``),i=(0,C_.default)(r,V_),a=t.parseFromString(i,`image/svg+xml`).firstChild;e.appendChild(a)})}}const U_=Object.assign(Object.assign({},Gm),{position:void 0,type:void 0,label:void 0,labelFontSize:null,labelTextFitMode:y_.Wrap,labelTextTrimType:__.Middle,gridLine:!0,tickLine:!0,domainLine:!0,numTicks:void 0,minMaxTicksOnly:!1,minMaxTicksOnlyWhenWidthIsLess:250,minMaxTicksOnlyShowGridLines:!1,tickTextWidth:void 0,tickTextSeparator:void 0,tickTextForceWordBreak:!1,tickTextTrimType:__.Middle,tickTextFitMode:y_.Wrap,tickTextFontSize:null,tickTextAlign:void 0,tickTextColor:null,tickTextAngle:void 0,labelMargin:8,labelColor:null,tickFormat:void 0,tickValues:void 0,fullSize:!0,tickPadding:8,tickTextHideOverlapping:void 0});function W_(e,t){let n=`--vis-`,r=Object.entries(e);return Object.fromEntries(r.map(([e])=>[T_(e.replace(t??n,``)),e]))}function G_(e,t){kn({":root":e,[`body.theme-dark .${t}`]:Object.keys(e).filter(e=>e.includes(`--vis-dark`)).map(e=>({[e.replace(`--vis-dark`,`--vis`)]:`var(${e})`}))})}var K_={};Me(K_,{axis:()=>Q_,cssVarDefaults:()=>J_,grid:()=>$_,hideDomain:()=>Z_,hideTickLine:()=>X_,label:()=>nv,root:()=>q_,tick:()=>ev,tickLabel:()=>rv,tickLabelHideable:()=>iv,tickTextExiting:()=>tv,variables:()=>Y_});const q_=U`
  label: axis-component;
`,J_={"--vis-axis-tick-color":`#e8e9ef`,"--vis-axis-grid-color":`#e8e9ef`,"--vis-axis-grid-line-width":`1px`,"--vis-axis-grid-line-dasharray":`none`,"--vis-axis-label-font-size":`14px`,"--vis-axis-label-color":`#6c778c`,"--vis-axis-label-weight":`500`,"--vis-axis-tick-label-color":`#6c778c`,"--vis-axis-tick-label-font-size":`12px`,"--vis-axis-tick-label-weight":`500`,"--vis-axis-tick-label-cursor":`default`,"--vis-axis-tick-label-text-decoration":`none`,"--vis-axis-tick-line-width":`1px`,"--vis-axis-tick-label-hide-transition":`opacity 400ms ease-in-out`,"--vis-dark-axis-tick-color":`#6c778c`,"--vis-dark-axis-tick-label-color":`#e8e9ef`,"--vis-dark-axis-grid-color":`#6c778c`,"--vis-dark-axis-label-color":`#fefefe`},Y_=W_(J_);G_(J_,q_);const X_=U`
  label: hide-tick-line;
`,Z_=U`
  label: hide-domain;
`,Q_=U`
  label: axis;

  user-select: none;

  .domain {
    stroke: var(--vis-axis-domain-color, var(--vis-axis-tick-color));
    stroke-width: var(--vis-axis-domain-line-width, var(--vis-axis-grid-line-width));
    stroke-dasharray: var(--vis-axis-domain-line-dasharray, var(--vis-axis-grid-line-dasharray));
  }

  &${`.${X_}`} {
    .tick > line {
      opacity: 0;
    }
  }

  &${`.${Z_}`} {
    .domain {
      opacity: 0;
    }
  }
`,$_=U`
  label: grid;

  .domain {
    opacity: 0;
  }

  line {
    stroke: var(--vis-axis-grid-color);
    stroke-width: var(--vis-axis-grid-line-width);
    stroke-dasharray: var(--vis-axis-grid-line-dasharray);
  }
`,ev=U`
  label: tick;

  stroke: none;
  font-size: var(--vis-axis-tick-label-font-size);
  font-weight: var(--vis-axis-tick-label-weight);

  line {
    stroke: var(--vis-axis-tick-color);
    stroke-width: var(--vis-axis-tick-line-width);
  }

  text {
    fill: var(--vis-axis-tick-label-color);
    cursor: var(--vis-axis-tick-label-cursor);
    font-family: var(--vis-axis-font-family, var(--vis-font-family));
    text-decoration: var(--vis-axis-tick-label-text-decoration);
    stroke: none;
  }
`,tv=U`
  label: tick-text-exiting;
`,nv=U`
  label: label;
  fill: var(--vis-axis-label-color);
  font-size: var(--vis-axis-label-font-size);
  font-weight: var(--vis-axis-label-weight);
  font-family: var(--vis-axis-font-family, var(--vis-font-family));
  text-anchor: middle;
`,rv=U`
  label: tick-label;
`,iv=U`
  label: tick-label-hideable;
  opacity: 0;
  transition: var(--vis-axis-tick-label-hide-transition);
`;var av=class extends Km{constructor(e){super(),this._defaultConfig=U_,this.config=this._defaultConfig,this._defaultNumTicks=3,this.events={},e&&this.setConfig(e),this.axisGroup=this.g.append(`g`),this.gridGroup=this.g.append(`g`).attr(`class`,$_)}preRender(){let{config:e}=this,t=this.g.append(`g`).attr(`opacity`,0);this._renderAxis(t,0),this._axisRawBBox=t.node().getBBox(),e.tickTextAlign&&this._alignTickLabels(),this._renderAxisLabel(t),this._axisSizeBBox=this._getAxisSize(t),this._requiredMargin=this._getRequiredMargin(this._axisSizeBBox),t.remove()}getPosition(){let{config:{type:e,position:t}}=this;return t??(e===K.X?Z.Bottom:Z.Left)}_getAxisSize(e){let t=e.node().getBBox();return t}_getRequiredMargin(e=this._axisSizeBBox){let{config:{type:t,position:n}}=this;switch(t){case K.X:{let t=1,r=this._axisSizeBBox.x+this._axisSizeBBox.width,i=this._axisSizeBBox.x<0?Math.abs(this._axisSizeBBox.x):0,a=r-this._width>t?r-this._width:0;switch(n){case Z.Top:return{top:e.height,left:i,right:a};case Z.Bottom:default:return{bottom:e.height,left:i,right:a}}}case K.Y:{let t=e.height>this._height?(e.height-this._height)/2:0,r=t,i=t;switch(n){case Z.Right:return{right:e.width,top:r,bottom:i};case Z.Left:default:return{left:e.width,top:r,bottom:i}}}}}getRequiredMargin(){return this._requiredMargin}getOffset(e){let{config:{type:t,position:n}}=this;switch(t){case K.X:switch(n){case Z.Top:return{top:e.top,left:e.left};case Z.Bottom:default:return{top:e.top+this._height,left:e.left}}case K.Y:switch(n){case Z.Right:return{top:e.top,left:e.left+this._width};case Z.Left:default:return{top:e.top,left:e.left}}}}_render(e=this.config.duration,t=this.axisGroup){let{config:n}=this;if(this._renderAxis(t,e),this._renderAxisLabel(t),n.gridLine){let t=this._buildGrid();this.gridGroup.selectAll(`*`).interrupt(),G(this.gridGroup,e).call(t).style(`opacity`,1)}else G(this.gridGroup,e).style(`opacity`,0);n.tickTextAlign&&this._alignTickLabels(),this._resolveTickLabelOverlap(t)}_buildAxis(){let{config:{type:e,position:t,tickPadding:n}}=this,r=this._getNumTicks();switch(e){case K.X:switch(t){case Z.Top:return p_(this.xScale).ticks(r).tickPadding(n);case Z.Bottom:default:return h_(this.xScale).ticks(r).tickPadding(n)}case K.Y:switch(t){case Z.Right:return m_(this.yScale).ticks(r).tickPadding(n);case Z.Left:default:return g_(this.yScale).ticks(r).tickPadding(n)}}}_buildGrid(){let{config:e}=this,t;switch(e.type){case K.X:switch(e.position){case Z.Top:t=p_(this.xScale);break;case Z.Bottom:default:t=h_(this.xScale);break}t.tickSize(-this._height);break;case K.Y:switch(e.position){case Z.Right:t=m_(this.yScale);break;case Z.Left:default:t=g_(this.yScale);break}t.tickSize(-this._width)}t.tickSizeOuter(0).tickFormat(()=>``);let n=this._getNumTicks()*2,r=t.scale(),i=r.domain(),a=()=>{if(!e.minMaxTicksOnlyShowGridLines)return i;let t=r.ticks(n);if(t.length<2)return i;let a=t[1]-+t[0],o=i[1],s=o-+t[t.length-1];return s>a/2?[...t,o]:t},o=e.tickValues?this._getConfiguredTickValues():this._shouldRenderMinMaxTicksOnly()?a():r.ticks(n);return t.tickValues(o),t}_renderAxis(e=this.axisGroup,t=this.config.duration){let{config:n}=this,r=this._buildAxis(),i=r.scale(),a=n.tickValues?this._getConfiguredTickValues():this._shouldRenderMinMaxTicksOnly()?i.domain():i.ticks(this._getNumTicks()),o=a.length;r.tickValues(a),e.selectAll(`*`).interrupt();let s=G(e,t).call(r);s.on(`end`,()=>{this._resolveTickLabelOverlap(e)});let c=e.selectAll(`g.tick`);c.classed(ev,!0).style(`font-size`,n.tickTextFontSize);let l=e.selectAll(`g.tick > text`).filter(e=>a.some(t=>gr(e,t))).classed(rv,!0).classed(iv,!!n.tickTextHideOverlapping).style(`fill`,n.tickTextColor);if(e.selectAll(`g.tick > text`).filter(e=>!a.some(t=>gr(e,t))).classed(tv,!0),l.nodes().forEach(e=>rl(e)),l.each((e,t,r)=>{var i,s;let c=(s=(i=n.tickFormat)?.call(n,e,t,a))??`${e}`,l=r[t],u=n.tickTextWidth||(n.type===K.X?this._containerWidth/(o+1):this._containerWidth/5),d=getComputedStyle(l),f=Number.parseFloat(d.fontSize),p=d.fontFamily,m={verticalAlign:n.type===K.X?v_.Top:v_.Middle,width:u,textRotationAngle:n.tickTextAngle,separator:n.tickTextSeparator,wordBreak:n.tickTextForceWordBreak};if(n.tickTextFitMode===y_.Trim){let e=Ao(l).text(c);P_(e,u,n.tickTextTrimType,!0,f,.58),c=Ao(l).text()}let h={text:c,fontFamily:p,fontSize:f};H_(l,h,m)}),e.classed(Q_,!0).classed(X_,!n.tickLine).classed(Z_,!n.domainLine),n.fullSize){let n=this._getFullDomainPath(0);G(e.select(`.domain`),t).attr(`d`,n)}}_resolveTickLabelOverlap(e=this.axisGroup){let{config:t}=this,n=e.selectAll(`g.tick > text:not(.${tv})`);if(!t.tickTextHideOverlapping){n.style(`opacity`,null);return}cancelAnimationFrame(this._collideTickLabelsAnimFrameId),this._collideTickLabelsAnimFrameId=requestAnimationFrame(()=>{this._collideTickLabels(n)})}_collideTickLabels(e){e.each((e,t,n)=>{let r=n[t];r._visible=!0});let t=3;for(let n=0;n<t;n+=1)e.each((e,t,n)=>{let r=n[t],i=r._visible;if(!i)return;let a=r.getBoundingClientRect();for(let e=t+1;e<n.length;e+=1){if(t===e)continue;let r=n[e],i=r._visible;if(i){let e=r.getBoundingClientRect(),t=Bs(a,e,-5);if(t){r._visible=!1;break}}}});e.each((e,t,n)=>{let r=n[t];Ao(r).style(`opacity`,r._visible?1:0)})}_getNumTicks(){let{config:{type:e,numTicks:t}}=this;if(t)return t;if(e===K.X){let e=this.xScale.range(),t=e[1]-e[0];return Math.floor(t/175)}if(e===K.Y){let e=this.yScale.range(),t=Math.abs(e[0]-e[1]);return t**.85/25}return this._defaultNumTicks}_getConfiguredTickValues(){let{config:e}=this,t=e.type===K.X?this.xScale:this.yScale,n=t?.domain();return e.tickValues?e.tickValues.filter(e=>e>=n[0]&&e<=n[1]):null}_shouldRenderMinMaxTicksOnly(){let{config:e}=this;return e.minMaxTicksOnly||e.type===K.X&&this._width<e.minMaxTicksOnlyWhenWidthIsLess}_getFullDomainPath(e=0){let{config:{type:t}}=this;switch(t){case K.X:return`M0.5, ${e} V0.5 H${this._width+.5} V${e}`;case K.Y:return`M${-e}, ${this._height+.5} H0.5 V0.5 H${-e}`}}_renderAxisLabel(e=this.axisGroup){var t;let{type:n,label:r,labelMargin:i,labelFontSize:a,labelTextFitMode:o}=this.config;if(e.selectAll(`.${nv}`).remove(),!r)return;let s=this.getPosition(),{width:c,height:l}=(t=this._axisRawBBox)??e.node().getBBox(),u=n===K.Y?-90:0,d=e.append(`text`).attr(`class`,nv).attr(`dy`,`${this._getLabelDY()}em`).style(`font-size`,a).style(`fill`,this.config.labelColor);d.text(r);let f=!1;if(o===y_.Wrap){let e=n===K.Y?this._height:this._width,t=d.node().getComputedTextLength();t>e&&(N_(d,e),f=!0)}let p=c,m=l;if(o===y_.Wrap){let e=d.node().getBBox();p=e.width,m=e.height}else{let e=n===K.X?p:m,t=getComputedStyle(d.node()),r=Number.parseFloat(t.fontSize);P_(d,e,this.config.labelTextTrimType,!0,r);let i=d.node().getBBox();p=i.width,m=i.height}let h=n===K.X?this._width/2:n===K.Y&&o===y_.Wrap&&f?s===Z.Left?-c-m/2-10:c:(-1)**(s===Z.Left)*c,g=n===K.Y?this._height/2:n===K.X&&o===y_.Wrap?s===Z.Top?-l-m/2:l:(-1)**(s===Z.Top)*l,_=n===K.X?0:(-1)**(s===Z.Left)*i,v=n===K.X?(-1)**(s===Z.Top)*i:0;d.attr(`transform`,`translate(${h+_},${g+v}) rotate(${u})`)}_getLabelDY(){let{type:e,position:t}=this.config;switch(e){case K.X:switch(t){case Z.Top:return 0;case Z.Bottom:default:return .75}case K.Y:switch(t){case Z.Right:return .75;case Z.Left:default:return-.25}}}_alignTickLabels(){let{config:{type:e,tickTextAlign:t,tickTextAngle:n,position:r}}=this,i=this.g.selectAll(`g.tick > text`),a=w_(t),o=e===K.X?0:this._getYTickTextTranslate(t,r),s=n?`translate(${o},0) rotate(${n})`:`translate(${o},0)`;i.attr(`transform`,s).attr(`text-anchor`,a)}_getYTickTextTranslate(e,t=Z.Left){var n,r,i,a;let o=this.config.tickPadding+1,s=((a=(r=(n=this._axisRawBBox)?.width)??(i=this.axisGroup.node())?.getBBox().width)??0)-o;switch(e){case b_.Left:return t===Z.Left?s*-1:0;case b_.Right:return t===Z.Left?0:s;case b_.Center:return t===Z.Left?s*-.5:s*.5;default:return 0}}};av.selectors=K_;const ov=Object.assign(Object.assign({},Gm),{yStacked:void 0,baseline:null,duration:100,tooltip:void 0,template:(e,t,n,r)=>``,hideWhenFarFromPointer:!0,hideWhenFarFromPointerDistance:100,snapToData:!0,getCircles:void 0,color:void 0,strokeColor:void 0,strokeWidth:void 0,onCrosshairMove:void 0,forceShowAt:void 0,skipRangeCheck:!1});var sv={};Me(sv,{circle:()=>dv,globalStyles:()=>cv,line:()=>uv,root:()=>lv});const cv=kn`
  :root {
    --vis-crosshair-line-stroke-color: #888;
    --vis-crosshair-line-stroke-width: 1px;
    --vis-crosshair-line-stroke-opacity: 1;
    --vis-crosshair-circle-stroke-color: #fff;
    --vis-crosshair-circle-stroke-width: 1px;
    --vis-crosshair-circle-stroke-opacity: 0.75;
  }
`,lv=U`
  label: crosshair-component;
`,uv=U`
  stroke: var(--vis-crosshair-line-stroke-color);
  stroke-width: var(--vis-crosshair-line-stroke-width);
  stroke-opacity: var(--vis-crosshair-line-stroke-opacity);
  pointer-events: none;
`,dv=U`
  stroke: var(--vis-crosshair-circle-stroke-color);
  stroke-width: var(--vis-crosshair-circle-stroke-width);
  stroke-opacity: var(--vis-crosshair-circle-stroke-opacity);
  pointer-events: none;
`;var fv=class extends Km{constructor(e){super(),this.clippable=!0,this._defaultConfig=ov,this.config=this._defaultConfig,this._xPx=void 0,this._yPx=void 0,this._mouseEvent=void 0,this._animFrameId=null,this._accessors={x:void 0,y:void 0,yStacked:void 0,baseline:void 0},e&&this.setConfig(e),this.g.style(`opacity`,0),this.line=this.g.append(`line`).attr(`class`,uv)}set accessors(e){this._accessors=e}get accessors(){var e;let{config:t}=this,n=!!(t.x||t.y||t.yStacked),r=n?t.x:this._accessors.x,i=n?t.y:this._accessors.y,a=i?dr(i)?i:[i]:void 0,o=n?t.yStacked:this._accessors.yStacked,s=(e=t.baseline)??this._accessors.baseline;return{x:r,y:a,yStacked:o,baseline:s}}_isContainerInViewport(){var e;if(!(e=this.container)?.node())return!1;let t=this.container.node().getBoundingClientRect(),n=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight,i=Math.max(0,Math.min(t.right,n)-Math.max(t.left,0)),a=Math.max(0,Math.min(t.bottom,r)-Math.max(t.top,0)),o=t.width*t.height,s=i*a;return o>0&&s/o>=.35}setContainer(e){this.container!==e&&(this.container=e,this.container.on(`mousemove.crosshair`,this._onMouseMove.bind(this)),this.container.on(`mouseout.crosshair`,this._onMouseOut.bind(this)),this.container.on(`wheel.crosshair`,this._onWheel.bind(this)))}_render(e){var t,n,r,i,a;let{config:o,datamodel:s}=this,c=cr(e)?e:o.duration,l=o.forceShowAt!==void 0,u=l?this.xScale(o.forceShowAt):this._xPx,d=this.xScale.invert(u),f=(t=s.data)?.length&&this.accessors.x?s.data.indexOf(jr(s.data,d,this.accessors.x,sr.Left)):void 0,p,m;o.snapToData&&(!this.accessors.y&&!this.accessors.yStacked&&(n=s.data)?.length&&console.warn(`Unovis | Crosshair: Y accessors have not been configured. Please check if they're present in the configuration object`),!(r=s.data)?.length&&this._mouseEvent&&console.warn(`Unovis | Crosshair: No data to snap to. Make sure the data has been passed to the container or to the crosshair itself`),p=jr(s.data,d,this.accessors.x),m=s.data.indexOf(p));let h=this.xScale.range(),g=this.yScale.range(),_=o.snapToData&&p?wr(Math.round(this.xScale(W(p,this.accessors.x,m))),0,this._width):wr(u,h[0],h[1]),v=u>=h[0]&&u<=h[1],y=this._yPx>=Math.min(g[0],g[1])&&this._yPx<=Math.max(g[0],g[1]),b=o.skipRangeCheck?!!this._xPx:this._xPx?v&&y:v;o.hideWhenFarFromPointer&&Math.abs(_-+u)>=o.hideWhenFarFromPointerDistance&&(b=!1);let x=(i=o.tooltip)??this.tooltip;if(b&&x&&this._isContainerInViewport()){let e=x.getContainer()||this.container.node(),t=x.isContainerBody();if(l){let e=this.container.node().getBoundingClientRect(),n=(t?u+e.left:u)+this._containerMargin.left,r=this._height/2+(t?e.top:0),i=[n,r];this._showTooltip(p,d,i,f)}else if(this._mouseEvent){let n=t?[this._mouseEvent.clientX,this._mouseEvent.clientY]:Mo(this._mouseEvent,e);this._showTooltip(p,d,n,f)}}else this._hideTooltip();if(this._mouseEvent&&((a=o.onCrosshairMove)==null||a.call(o,b?this.xScale.invert(this._xPx):void 0,p,m,this._mouseEvent),this._mouseEvent=void 0),G(this.g,c).style(`opacity`,b?1:0),!isFinite(u))return;this.line.attr(`y1`,0).attr(`y2`,this._height),G(this.line,c,Wu).attr(`x1`,_).attr(`x2`,_);let S=lr(o.getCircles)?o.getCircles(d,s.data,this.yScale,f):this.getCircleData(p,m),C=this.g.selectAll(`circle`).data(S,(e,t)=>{var n;return(n=e.id)??t}),w=C.enter().append(`circle`).attr(`class`,dv).attr(`r`,0).attr(`cx`,_).attr(`cy`,e=>e.y).style(`fill`,e=>e.color).style(`stroke`,e=>e.strokeColor).style(`stroke-width`,e=>e.strokeWidth);G(w.merge(C),c,Wu).attr(`cx`,_).attr(`cy`,e=>e.y).attr(`r`,4).style(`opacity`,e=>e.opacity).style(`fill`,e=>e.color).style(`stroke`,e=>e.strokeColor).style(`stroke-width`,e=>e.strokeWidth),C.exit().remove()}hide(e){window.cancelAnimationFrame(this._animFrameId),this._animFrameId=window.requestAnimationFrame(()=>{var t,n;this._xPx=void 0,this._yPx=void 0,this._mouseEvent=void 0,(n=(t=this.config).onCrosshairMove)==null||n.call(t,void 0,void 0,void 0,e),this._render()})}_onMouseMove(e){var t;let{datamodel:n,element:r}=this;!this.accessors.x&&(t=n.data)?.length&&console.warn(`Unovis | Crosshair: X accessor function has not been configured. Please check if it's present in the configuration object`);let[i,a]=Mo(e,r);this._xPx=i,this._yPx=a,this._mouseEvent=e,window.cancelAnimationFrame(this._animFrameId),this._animFrameId=window.requestAnimationFrame(()=>{this._render()})}_onMouseOut(e){var t;(!e||!(t=this.container)?.node().contains(e.relatedTarget))&&this.hide(e)}_onWheel(e){this.hide(e)}_showTooltip(e,t,n,r){var i;let{config:a,datamodel:o}=this,s=(i=a.tooltip)??this.tooltip;if(!s||!n)return;let[c,l]=n,u=a.template(e,t,o.data,r);if(s.config.followCursor=!0,!s.config.horizontalPlacement||s.config.horizontalPlacement===Z.Auto){let e=s.isContainerBody()?c-this.container.node().getBoundingClientRect().left:c;s.overrideHorizontalPlacement(e>this._containerWidth/2?Z.Left:Z.Right)}u&&s.show(u,{x:c,y:l})}_hideTooltip(){var e;let{config:t}=this,n=(e=t.tooltip)??this.tooltip;n?.hide()}getYDataExtent(){return[void 0,void 0]}getCircleData(e,t){var n,r;let{config:i}=this;if(i.snapToData&&e){let a=(n=this.accessors.y)??[],o=(r=this.accessors.yStacked)??[],s=W(e,this.accessors.baseline,t)||0,c=Er(e,t,...o).map((t,n)=>({y:this.yScale(t+s),opacity:cr(W(e,o[n],n))?1:0,color:Pg(e,i.color,n),strokeColor:i.strokeColor?Pg(e,i.strokeColor,n):void 0,strokeWidth:i.strokeWidth?W(e,i.strokeWidth,n):void 0})),l=a.map((n,r)=>{let a=W(e,n,t);return{y:this.yScale(a),opacity:cr(a)?1:0,color:Pg(e,i.color,c.length+r),strokeColor:i.strokeColor?Pg(e,i.strokeColor,r):void 0,strokeWidth:i.strokeWidth?W(e,i.strokeWidth,r):void 0}});return c.concat(l)}return[]}};fv.selectors=sv;const pv=Object.assign(Object.assign({},Gm),{color:void 0,curveType:$.MonotoneX,baseline:()=>0,opacity:1,cursor:null,minHeight1Px:!1,minHeight:void 0});var mv={};Me(mv,{area:()=>_v,globalStyles:()=>gv,root:()=>hv});const hv=U`
  label: area-component;
`,gv=kn`
  :root {
    --vis-area-cursor: default;
    --vis-area-fill-opacity: 1;
    --vis-area-stroke-color: none;
    --vis-area-stroke-width: 0px;
    --vis-area-stroke-dasharray: none;
    --vis-area-stroke-opacity: 1;
    --vis-area-hover-fill-opacity: none;
    --vis-area-hover-stroke-width: none;

    /* Dark Theme */
    --vis-dark-area-stroke-color: none;
  }

  body.theme-dark ${`.${hv}`} {
    --vis-area-stroke-color: var(--vis-dark-area-stroke-color);
  }

`,_v=U`
  label: area;
  cursor: var(--vis-area-cursor);
  fill-opacity: var(--vis-area-fill-opacity);
  stroke-width: var(--vis-area-stroke-width);
  stroke-dasharray: var(--vis-area-stroke-dasharray);
  stroke: var(--vis-area-stroke-color);
  stroke-opacity: var(--vis-area-stroke-opacity);

  &:hover {
    fill-opacity: var(--vis-area-hover-fill-opacity);
    stroke-width: var(--vis-area-hover-stroke-width);
  }
`;var vv=class e extends Km{constructor(t){super(),this._defaultConfig=pv,this.config=this._defaultConfig,this.stacked=!0,this.events={[e.selectors.area]:{}},t&&this.setConfig(t),this.stacked=Array.isArray(this.config.y)}_render(e){super._render(e);let{config:t,datamodel:{data:n}}=this,r=cr(e)?e:t.duration,i=Fg[t.curveType];this._areaGen=Ch().x(e=>e.x).y0(e=>e.y0).y1(e=>e.y1).curve(i);let a=dr(t.y)?t.y:[t.y],o=n.map((e,n)=>this.xScale(W(e,t.x,n))),s=Dr(n,t.baseline,a,this._prevNegative);this._prevNegative=s.map(e=>!!e.isMostlyNegative);let c=[],l=s.map(e=>e.map((e,n)=>{var r,i;let a=o[n],s=this.yScale(e[0]),l=this.yScale(e[1]),u=l>s,d=c[n]||0,f=u?s+d:s-d,p=u?l+d:l-d,m=0;return(t.minHeight||t.minHeight1Px)&&Math.abs(p-f)<((r=t.minHeight)??1)&&(m=((i=t.minHeight)??1)-Math.abs(p-f),c[n]=d+m),{x:a,y0:f,y1:u?p+m:p-m}})),u=l.length-1,d=l.reverse(),f=this.g.selectAll(`.${_v}`).data(d),p=f.enter().append(`path`).attr(`class`,_v).attr(`d`,e=>this._areaGen(e)||this._emptyPath()).style(`opacity`,0).style(`fill`,(e,r)=>Pg(n,t.color,u-r)),m=G(p.merge(f),r).style(`opacity`,(e,r)=>{let i=e.some(e=>e.y0-e.y1!==0);return i?W(n,t.opacity,u-r):0}).style(`fill`,(e,r)=>Pg(n,t.color,u-r)).style(`cursor`,(e,r)=>Sr(n,t.cursor,u-r));if(r){let e=m;e.attrTween(`d`,(e,t,n)=>{let r=Ao(n[t]).attr(`d`),i=this._areaGen(e)||this._emptyPath();return Ng(r,i)})}else m.attr(`d`,e=>this._areaGen(e)||this._emptyPath());G(f.exit(),r).style(`opacity`,0).remove()}getYDataExtent(e){let{config:t,datamodel:n}=this,r=dr(t.y)?t.y:[t.y],i=this.xScale.domain(),a=e?Mr(n.data,i,t.x,!0):n.data;return Tr(a,t.baseline,...r)}_emptyPath(){let e=this.xScale.range(),t=this.yScale.domain(),n=this.yScale((t[0]+t[1])/2),r=n;return this._areaGen([{y0:n,y1:r,x:e[0]},{y0:n,y1:r,x:e[1]}])}};vv.selectors=mv;const yv=Symbol(`componentAccessorKey`),bv=Symbol(`tooltipAccessorKey`),xv=Symbol(`crosshairAccessorKey`),Sv=Symbol(`axisAccessorKey`),Cv=Symbol(`annotationsAccessorKey`);function wv(e,t){return gr(e,t)}function Tv(e){let t=ie(),n=t.attrs;return P(()=>{let r={},i=t?.vnode.props??{};return Object.keys(i).forEach(t=>{r[Oe(t)]=e[Oe(t)]}),{...r,...n}})}const Ev=A({__name:`index`,props:{components:{},xScale:{type:[Object,Function]},xDomain:{},xDomainMinConstraint:{},xDomainMaxConstraint:{},xRange:{},yScale:{type:[Object,Function]},yDomain:{},yDomainMinConstraint:{},yDomainMaxConstraint:{},yRange:{},yDirection:{},xAxis:{},yAxis:{},autoMargin:{type:Boolean},tooltip:{},crosshair:{},preventEmptyDomain:{type:[Boolean,null]},scaleByDomain:{type:Boolean},annotations:{},clipPathExtend:{},duration:{},margin:{},padding:{},sizing:{},width:{},height:{},svgDefs:{},ariaLabel:{},data:{}},setup(e,{expose:t}){let n=e,{data:r}=De(n),i=Tv(n),a=I(),o=Te({components:[],annotations:void 0,crosshair:void 0,tooltip:void 0,xAxis:void 0,yAxis:void 0}),s=I();return pe(r,()=>{a.value&&a.value.setData(r.value,!0)}),me(()=>{var e;o.components.map(e=>e.config),(e=a.value)==null||e.updateContainer({...Ee(i.value),...Ee(o)})}),se(()=>{s.value&&(a.value=new Vm(s.value,{...Ee(o)},r.value))}),ce(()=>{var e;return(e=a.value)?.destroy()}),le(yv,{data:r,update:e=>o.components=[...o.components,e],destroy:()=>{var e;return o.components=(e=o.components)?.filter(e=>!e.isDestroyed())}}),le(Sv,{data:r,update:e=>o[`${e.config.type}Axis`]=e,destroy:e=>{o[`${e}Axis`]=void 0}}),le(xv,{data:r,update:e=>o.crosshair=e,destroy:()=>{o.crosshair=void 0}}),le(bv,{data:r,update:e=>o.tooltip=e,destroy:()=>{o.tooltip=void 0}}),le(Cv,{data:r,update:e=>o.annotations=e,destroy:()=>{o.annotations=void 0}}),t({component:a}),(e,t)=>(M(),D(`div`,{"data-vis-xy-container":``,ref_key:`elRef`,ref:s,class:`unovis-xy-container`},[de(e.$slots,`default`)],512))}}),Dv={"data-vis-component":``};vv.selectors;const Ov=A({__name:`index`,props:{color:{},curveType:{},baseline:{},opacity:{},cursor:{},minHeight1Px:{type:Boolean},minHeight:{},x:{},y:{},id:{type:Function},xScale:{type:[Object,Function]},yScale:{type:[Object,Function]},excludeFromDomainCalculation:{type:Boolean},duration:{},events:{},attributes:{},data:{}},setup(e,{expose:t}){let n=ae(yv),r=e,i=P(()=>n.data.value??r.data),a=Tv(r),o=I();return se(()=>{oe(()=>{var e;o.value=new vv(a.value),(e=o.value)==null||e.setData(i.value),n.update(o.value)})}),ce(()=>{var e;(e=o.value)==null||e.destroy(),n.destroy()}),pe(a,(e,t)=>{var n;wv(e,t)||(n=o.value)==null||n.setConfig(a.value)}),pe(i,()=>{var e;(e=o.value)==null||e.setData(i.value)}),t({component:o}),(e,t)=>(M(),D(`div`,Dv))}}),kv={"data-vis-axis":``};av.selectors;const Av=A({__name:`index`,props:{position:{},type:{},fullSize:{type:Boolean},label:{},labelFontSize:{},labelMargin:{},labelTextFitMode:{},labelTextTrimType:{},labelColor:{},gridLine:{type:Boolean},tickLine:{type:Boolean},domainLine:{type:Boolean},minMaxTicksOnly:{type:Boolean},minMaxTicksOnlyShowGridLines:{type:Boolean},minMaxTicksOnlyWhenWidthIsLess:{},tickFormat:{type:Function},tickValues:{},numTicks:{},tickTextFitMode:{},tickTextWidth:{},tickTextSeparator:{},tickTextForceWordBreak:{type:Boolean},tickTextTrimType:{},tickTextFontSize:{},tickTextAlign:{},tickTextColor:{},tickTextAngle:{},tickTextHideOverlapping:{type:Boolean},tickPadding:{},x:{},y:{},id:{type:Function},color:{},xScale:{type:[Object,Function]},yScale:{type:[Object,Function]},excludeFromDomainCalculation:{type:Boolean},duration:{},events:{},attributes:{},data:{}},setup(e,{expose:t}){let n=ae(Sv),r=e,i=P(()=>n.data.value??r.data),a=Tv(r),o=I();return se(()=>{oe(()=>{var e;o.value=new av(a.value),(e=o.value)==null||e.setData(i.value),n.update(o.value)})}),ce(()=>{var e;(e=o.value)==null||e.destroy(),n.destroy(r.type)}),pe(a,(e,t)=>{var n;wv(e,t)||(n=o.value)==null||n.setConfig(a.value)}),pe(i,()=>{var e;(e=o.value)==null||e.setData(i.value)}),t({component:o}),(e,t)=>(M(),D(`div`,kv))}}),jv={"data-vis-crosshair":``};fv.selectors;const Mv=A({__name:`index`,props:{data:{}},setup(e,{expose:t}){let n=ae(xv),r=e,i=P(()=>n.data.value??r.data),a=Tv(r),o=I();return se(()=>{oe(()=>{var e;o.value=new fv(a.value),(e=o.value)==null||e.setData(i.value),n.update(o.value)})}),ce(()=>{var e;(e=o.value)==null||e.destroy(),n.destroy()}),pe(a,(e,t)=>{var n;wv(e,t)||(n=o.value)==null||n.setConfig(a.value)}),pe(i,()=>{var e;(e=o.value)==null||e.setData(i.value)}),t({component:o}),(e,t)=>(M(),D(`div`,jv))}}),Nv={"data-vis-component":``};e_.selectors;const Pv=A({__name:`index`,props:{color:{},groupWidth:{},groupMaxWidth:{},dataStep:{},groupPadding:{},barPadding:{},roundedCorners:{type:[Number,Boolean]},barMinHeight:{},cursor:{},orientation:{},x:{},y:{},id:{type:Function},xScale:{type:[Object,Function]},yScale:{type:[Object,Function]},excludeFromDomainCalculation:{type:Boolean},duration:{},events:{},attributes:{},data:{}},setup(e,{expose:t}){let n=ae(yv),r=e,i=P(()=>n.data.value??r.data),a=Tv(r),o=I();return se(()=>{oe(()=>{var e;o.value=new e_(a.value),(e=o.value)==null||e.setData(i.value),n.update(o.value)})}),ce(()=>{var e;(e=o.value)==null||e.destroy(),n.destroy()}),pe(a,(e,t)=>{var n;wv(e,t)||(n=o.value)==null||n.setConfig(a.value)}),pe(i,()=>{var e;(e=o.value)==null||e.setData(i.value)}),t({component:o}),(e,t)=>(M(),D(`div`,Nv))}}),Fv={"data-vis-component":``};Gg.selectors;const Iv=A({__name:`index`,props:{color:{},curveType:{},lineWidth:{},lineDashArray:{},fallbackValue:{},highlightOnHover:{type:Boolean},cursor:{},interpolateMissingData:{type:Boolean},x:{},y:{},id:{type:Function},xScale:{type:[Object,Function]},yScale:{type:[Object,Function]},excludeFromDomainCalculation:{type:Boolean},duration:{},events:{},attributes:{},data:{}},setup(e,{expose:t}){let n=ae(yv),r=e,i=P(()=>n.data.value??r.data),a=Tv(r),o=I();return se(()=>{oe(()=>{var e;o.value=new Gg(a.value),(e=o.value)==null||e.setData(i.value),n.update(o.value)})}),ce(()=>{var e;(e=o.value)==null||e.destroy(),n.destroy()}),pe(a,(e,t)=>{var n;wv(e,t)||(n=o.value)==null||n.setConfig(a.value)}),pe(i,()=>{var e;(e=o.value)==null||e.setData(i.value)}),t({component:o}),(e,t)=>(M(),D(`div`,Fv))}}),Lv={"data-vis-tooltip":``};ah.selectors;const Rv=A({__name:`index`,props:{components:{},container:{},followCursor:{type:Boolean},allowHover:{type:Boolean},horizontalPlacement:{},horizontalShift:{},verticalPlacement:{},verticalShift:{},triggers:{},attributes:{},className:{},hideDelay:{},showDelay:{},data:{}},setup(e,{expose:t}){let n=ae(bv),r=Tv(e),i=I();return se(()=>{oe(()=>{i.value=new ah(r.value),n.update(i.value)})}),ce(()=>{var e;(e=i.value)==null||e.destroy(),n.destroy()}),pe(r,(e,t)=>{var n;wv(e,t)||(n=i.value)==null||n.setConfig(r.value)}),t({component:i}),(e,t)=>(M(),D(`div`,Lv))}});var zv=A({__name:`ChartStyle`,props:{id:{}},setup(e){let{config:t}=ny(),n=P(()=>Object.entries(t.value).filter(([,e])=>e.theme||e.color));return(t,r)=>n.value.length?(M(),ne(L(E),{key:0,as:`style`},{default:N(()=>[O(R(Object.entries(L(ty)).map(([t,r])=>`
${r} [data-chart=${e.id}] {
${n.value.map(([e,n])=>{let r=n.theme?.[t]||n.color;return r?`  --color-${e}: ${r};`:null}).join(`
`)}
}
`).join(`
`)),1)]),_:1})):re(``,!0)}}),Bv=zv;const Vv=[`data-chart`];var Hv=A({__name:`ChartContainer`,props:{id:{},class:{},config:{},cursor:{type:Boolean}},setup(e){let t=e,{config:n}=De(t),r=o(),i=P(()=>`chart-${t.id||r.replace(/:/g,``)}`);return ry({id:r,config:n}),(a,o)=>(M(),D(`div`,{"data-slot":`chart`,"data-chart":i.value,class:ke(L(_e)(`[&_.tick_text]:!fill-muted-foreground [&_.tick_line]:!stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border flex flex-col aspect-video justify-center text-xs [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-hidden [&_.recharts-sector]:outline-hidden [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-surface]:outline-hidden [&_[data-vis-xy-container]]:h-full [&_[data-vis-single-container]]:h-full h-full [&_[data-vis-xy-container]]:w-full [&_[data-vis-single-container]]:w-full w-full `,t.class)),style:Ae({"--vis-tooltip-padding":`0px`,"--vis-tooltip-background-color":`transparent`,"--vis-tooltip-border-color":`transparent`,"--vis-tooltip-text-color":`none`,"--vis-tooltip-shadow-color":`none`,"--vis-tooltip-backdrop-filter":`none`,"--vis-crosshair-circle-stroke-color":`#0000`,"--vis-crosshair-line-stroke-width":e.cursor?`1px`:`0px`,"--vis-font-family":`var(--font-sans)`})},[de(a.$slots,`default`,{id:L(r),config:L(n)}),k(Bv,{id:i.value},null,8,[`id`])],14,Vv))}}),Uv=Hv;const Wv={key:0,class:`font-medium`},Gv={class:`grid gap-1.5`},Kv={class:`grid gap-1.5`},qv={key:0,class:`font-medium`},Jv={class:`text-muted-foreground`},Yv={key:0,class:`text-foreground font-mono font-medium tabular-nums`};var Xv=A({__name:`ChartTooltipContent`,props:{hideLabel:{type:Boolean},hideIndicator:{type:Boolean},indicator:{default:`dot`},nameKey:{},labelKey:{},labelFormatter:{},payload:{default:()=>({})},config:{default:()=>({})},class:{},color:{},x:{}},setup(e){let t=e,n=P(()=>Object.entries(t.payload).map(([e,n])=>{let r=t.config[e],i=t.config[e]?.color??t.payload.fill;return{key:e,value:n,itemConfig:r,indicatorColor:i}}).filter(e=>e.itemConfig)),r=P(()=>Object.keys(t.payload).length===1&&t.indicator!==`dot`),i=P(()=>t.hideLabel?null:t.labelFormatter&&t.x!==void 0?t.labelFormatter(t.x):t.labelKey?t.config[t.labelKey]?.label||t.payload[t.labelKey]:t.x);return(a,o)=>(M(),D(`div`,{class:ke(L(_e)(`border-border/50 bg-background grid min-w-[8rem] items-start gap-1.5 rounded-lg border px-2.5 py-1.5 text-xs shadow-xl`,t.class))},[de(a.$slots,`default`,{},()=>[!r.value&&i.value?(M(),D(`div`,Wv,R(i.value),1)):re(``,!0),F(`div`,Gv,[(M(!0),D(we,null,ue(n.value,({value:t,itemConfig:n,indicatorColor:a,key:o})=>(M(),D(`div`,{key:o,class:ke(L(_e)(`[&>svg]:text-muted-foreground flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5`,e.indicator===`dot`&&`items-center`))},[n?.icon?(M(),ne(fe(n.icon),{key:0})):e.hideIndicator?re(``,!0):(M(),D(`div`,{key:1,class:ke(L(_e)(`shrink-0 rounded-[2px] border-(--color-border) bg-(--color-bg)`,{"h-2.5 w-2.5":e.indicator===`dot`,"w-1":e.indicator===`line`,"w-0 border-[1.5px] border-dashed bg-transparent":e.indicator===`dashed`,"my-0.5":r.value&&e.indicator===`dashed`})),style:Ae({"--color-bg":a,"--color-border":a})},null,6)),F(`div`,{class:ke(L(_e)(`flex flex-1 justify-between leading-none`,r.value?`items-end`:`items-center`))},[F(`div`,Kv,[r.value?(M(),D(`div`,qv,R(i.value),1)):re(``,!0),F(`span`,Jv,R(n?.label||t),1)]),t?(M(),D(`span`,Yv,R(t.toLocaleString()),1)):re(``,!0)],2)],2))),128))])])],2))}}),Zv=Xv;const Qv=new Map;function $v(e){return JSON.stringify(e,Object.keys(e).sort())}function ey(e,t,n){if(!ze)return;let r=o();return(i,a)=>{let o=`data`in i?i.data:i,s=`${r}-${$v(o)}`,c=Qv.get(s);if(c)return c;let l=j(t,{...n,payload:o,config:e,x:a}),u=document.createElement(`div`);return Ce(l,u),Qv.set(s,u.innerHTML),u.innerHTML}}const ty={light:``,dark:`.dark`},[ny,ry]=he(`Chart`),iy={class:`animate-fade-in-up`},ay={class:`mb-8`},oy={class:`mb-4 text-lg font-semibold text-foreground`},sy={class:`flex items-center justify-center space-x-2`},cy={class:`flex items-center justify-between`},ly={class:`font-semibold text-lg`},uy={class:`grid gap-4 sm:grid-cols-2 mb-8`},dy={class:`text-sm font-medium text-white/80`},fy={class:`mt-2 text-2xl sm:text-3xl font-bold text-white`},py={class:`text-sm font-medium text-white/80`},my={class:`mt-2 text-2xl sm:text-3xl font-bold text-white`},hy={key:1,class:`h-[200px] flex items-center justify-center`},gy={class:`text-muted-foreground`},_y={class:`flex w-full items-start gap-2 text-sm`},vy={class:`grid gap-2`},yy={class:`flex items-center gap-2 leading-none font-medium`},by={class:`text-muted-foreground flex items-center gap-2 leading-none`},xy={key:1,class:`h-[200px] flex items-center justify-center`},Sy={class:`text-muted-foreground`},Cy={class:`flex gap-2 font-medium leading-none`},wy={class:`leading-none text-muted-foreground`},Ty={class:`flex flex-1 flex-col justify-center gap-1 px-6 py-5 sm:py-6`},Ey={key:0,class:`flex`},Dy=[`data-active`,`onClick`],Oy={class:`text-muted-foreground text-xs`},ky={class:`text-lg leading-none font-bold sm:text-3xl`},Ay={key:1,class:`h-[250px] flex items-center justify-center`},jy={class:`text-muted-foreground`},My={class:`space-y-3`},Ny={class:`flex items-center justify-between`},Py={class:`flex items-center space-x-3`},Fy={class:`font-medium`},Iy={class:`text-right`},Ly={class:`font-semibold`},Ry={class:`text-sm text-muted-foreground`},zy={class:`w-full bg-muted rounded-full h-2.5`},By={key:0,class:`text-center py-8`},Vy={class:`text-muted-foreground`},Hy={key:1},Uy={class:`space-y-4`},Wy={class:`flex items-center justify-between`},Gy={class:`flex items-center space-x-3`},Ky={class:`font-medium`},qy={key:0,class:`text-xs bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400 px-2 py-1 rounded-full`},Jy={class:`text-right`},Yy={class:`font-semibold`},Xy={class:`text-sm text-muted-foreground`},Zy={class:`w-full bg-muted rounded-full h-2.5`},Qy={class:`mt-6 pt-4 border-t`},$y={key:0},eb={key:1},tb={key:0,class:`mt-4 p-4 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950/20 dark:to-indigo-950/20 rounded-lg border border-blue-200 dark:border-blue-800`},nb={class:`text-center space-y-3`},rb={class:`bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm`},ib={class:`text-2xl font-bold text-gray-900 dark:text-gray-100`},ab={class:`flex items-center justify-center gap-3 text-base`},ob={class:`font-medium text-gray-700 dark:text-gray-300`},sb={class:`font-bold text-2xl text-blue-600 dark:text-blue-400`},cb={class:`font-medium text-gray-700 dark:text-gray-300`},lb={class:`text-xs text-gray-500 dark:text-gray-400 pt-2 border-t border-blue-200 dark:border-blue-800`};var ub=A({__name:`ChartView`,props:{scope:{default:`personal`}},setup(e){let t=e,{t:n}=ge(),r=Fe(),i=Ie(),{categoryLabels:o}=r,{isInCouple:c}=i,l=P(()=>t.scope===`personal`?r.personalExpenses:r.familyExpenses),u=I(!1),d=I(`month`),f=I(new Date),p=e=>{d.value=e},m=P(()=>d.value===`month`?f.value.toLocaleDateString(`zh-TW`,{year:`numeric`,month:`long`}):`${f.value.getFullYear()} ${n(`stats.year`)}`),h=P(()=>{let e=d.value===`month`?f.value.toISOString().slice(0,7):f.value.getFullYear().toString(),t=l.value.filter(t=>(d.value,t.date.startsWith(e))),n={};return t.forEach(e=>{let t=e.amount;n[e.category]||(n[e.category]={total:0,count:0}),n[e.category].total+=t,n[e.category].count+=1}),Object.fromEntries(Object.entries(n).sort(([,e],[,t])=>t.total-e.total))}),g=P(()=>Object.values(h.value).reduce((e,t)=>e+t.total,0)),_=P(()=>{let e=d.value===`month`?f.value.toISOString().slice(0,7):f.value.getFullYear().toString();return l.value.filter(t=>(d.value,t.date.startsWith(e))).length}),v=e=>{let t=new Date(f.value);d.value===`month`?t.setMonth(t.getMonth()+e):t.setFullYear(t.getFullYear()+e),f.value=t},y=e=>g.value>0?Math.round(e/g.value*100):0,b=P(()=>{let e={food:{label:o.food||`餐飲`,color:`var(--chart-1)`},pet:{label:o.pet||`寵物`,color:`var(--chart-2)`},shopping:{label:o.shopping||`購物`,color:`var(--chart-3)`},transport:{label:o.transport||`交通`,color:`var(--chart-4)`},home:{label:o.home||`居家`,color:`var(--chart-5)`},other:{label:o.other||`其他`,color:`var(--muted-foreground)`}};return e}),x=e=>b.value[e]?.color||`var(--muted-foreground)`,S=P(()=>{let e=Object.keys(h.value),t={};return e.forEach((e,n)=>{t[e]={label:o[e]||e,color:`var(--chart-${n+1})`}}),t}),C=P(()=>{let e=Object.keys(h.value);return e.map((e,t)=>`
        <linearGradient id="fill${e}" x1="0" y1="0" x2="0" y2="1">
            <stop offset="5%" stop-color="var(--chart-${t+1})" stop-opacity="0.8"/>
            <stop offset="95%" stop-color="var(--chart-${t+1})" stop-opacity="0.1"/>
        </linearGradient>
    `).join(``)}),w=P(()=>{let e=Object.keys(h.value);return e.map(e=>`url(#fill${e})`)}),T=P(()=>{let e=Object.keys(h.value);return e.map((e,t)=>`var(--chart-${t+1})`)}),E=P(()=>{let e=Object.keys(h.value);return e.map(e=>t=>t[e])}),ee=P(()=>{let e=d.value===`month`?f.value.toISOString().slice(0,7):f.value.getFullYear().toString(),t=Object.keys(h.value);if(t.length===0)return[];if(d.value===`month`){let r=[],i=f.value.getFullYear(),a=f.value.getMonth(),o=new Date(i,a+1,0).getDate();for(let i=0;i<Math.ceil(o/7);i++){let a=i*7+1,s=Math.min((i+1)*7,o),c={index:i,label:`${a}-${s}${n(`stats.day`)}`};t.forEach(e=>{c[e]=0}),l.value.forEach(n=>{if(n.date.startsWith(e)){let e=n.date.split(`-`)[2];if(e){let r=parseInt(e);r>=a&&r<=s&&t.includes(n.category)&&(c[n.category]=(c[n.category]||0)+n.amount)}}}),r.push(c)}return r}else{let e=[],n=f.value.getFullYear();for(let r=0;r<12;r++){let i=`${n}-${String(r+1).padStart(2,`0`)}`,a={index:r,label:`${r+1}月`};t.forEach(e=>{a[e]=0}),l.value.forEach(e=>{e.date.startsWith(i)&&t.includes(e.category)&&(a[e.category]=(a[e.category]||0)+e.amount)}),e.push(a)}return e}}),te=P(()=>{let e=Object.entries(h.value),t={};return e.forEach(([e],n)=>{t[e]={label:o[e]||e,color:`var(--chart-${n+1})`}}),t}),A=P(()=>Object.entries(h.value).map(([e,t],n)=>({index:n,category:e,label:o[e]||e,amount:t.total}))),ie=I(``),j=P(()=>{let e=Object.keys(h.value);return e.slice(0,2)}),ae=P(()=>{let e=j.value,t={};return e.forEach((e,n)=>{t[e]={label:o[e]||e,color:`var(--chart-${n+1})`}}),t}),oe=P(()=>{let e={};return j.value.forEach(t=>{e[t]=h.value[t]?.total||0}),e});pe(j,e=>{(!ie.value||!e.includes(ie.value))&&(ie.value=e[0]||``)},{immediate:!0});let se=P(()=>{if(d.value!==`month`)return[];let e=j.value;if(e.length===0)return[];let t=f.value.getFullYear(),n=f.value.getMonth(),r=new Date(t,n+1,0).getDate(),i=f.value.toISOString().slice(0,7),a=[];for(let i=1;i<=r;i++){let r=new Date(t,n,i),o={date:r};e.forEach(e=>{o[e]=0}),a.push(o)}return l.value.forEach(t=>{if(t.date.startsWith(i)&&e.includes(t.category)){let e=t.date.split(`-`)[2];if(e){let n=parseInt(e),r=n-1;a[r]&&(a[r][t.category]=(a[r][t.category]||0)+t.amount)}}}),a}),ce=e=>{let t=[`#3b82f6`,`#ef4444`],n=de.value;if(!n)return t[0];let r=Object.keys(n),i=r.indexOf(e);return t[i]||t[0]},le=e=>{let t=de.value;if(!t)return!1;let n=t[e];if(!n)return!1;let r=Object.values(t),i=Math.max(...r.map(e=>e.amount));return n.amount===i},de=P(()=>{if(!c||t.scope!==`family`)return null;let e=d.value===`month`?f.value.toISOString().slice(0,7):f.value.getFullYear().toString(),n=l.value.filter(t=>(d.value,t.date.startsWith(e))),r={};n.forEach(e=>{let t=e.user_id,n=e.user||{id:t,display_name:null,avatar_url:null};r[t]||(r[t]={total:0,count:0,user:n}),r[t].total+=e.amount,r[t].count+=1});let i=Object.keys(r);if(i.length===0)return null;let a=Object.values(r).reduce((e,t)=>e+t.total,0);if(a===0)return null;let o={};return i.forEach(e=>{let t=r[e];t&&(o[e]={percentage:Math.round(t.total/a*100),amount:t.total,user:t.user})}),o}),fe=P(()=>{let e=de.value;if(!e)return null;let t=Object.keys(e);if(t.length!==2)return null;let[n,r]=t;if(!n||!r)return null;let i=e[n],a=e[r];if(!i||!a)return null;let o=Math.abs(i.amount-a.amount),s=Math.round(o/2),c=i.amount>a.amount?a:i,l=i.amount>a.amount?i:a;return{difference:o,halfDifference:s,payer:c,receiver:l}}),me=()=>{u.value=!u.value};return(t,r)=>(M(),D(`div`,iy,[F(`div`,ay,[F(`h2`,oy,R(L(n)(`stats.chartAnalysis`)),1),k(L(s),{class:`relative overflow-hidden border-0 shadow-lg mb-4`},{default:N(()=>[k(L(Ue),{class:`p-4`},{default:N(()=>[F(`div`,sy,[k(L(Be),{variant:`outline`,size:`sm`,class:ke(d.value===`month`?`bg-primary text-primary-foreground hover:bg-primary/90 dark:bg-primary/20 dark:text-primary dark:border-primary dark:hover:bg-primary/30`:`dark:hover:bg-accent dark:hover:text-accent-foreground`),onClick:r[0]||=e=>p(`month`)},{default:N(()=>[O(R(L(n)(`stats.byMonth`)),1)]),_:1},8,[`class`]),k(L(Be),{variant:`outline`,size:`sm`,class:ke(d.value===`year`?`bg-primary text-primary-foreground hover:bg-primary/90 dark:bg-primary/20 dark:text-primary dark:border-primary dark:hover:bg-primary/30`:`dark:hover:bg-accent dark:hover:text-accent-foreground`),onClick:r[1]||=e=>p(`year`)},{default:N(()=>[O(R(L(n)(`stats.byYear`)),1)]),_:1},8,[`class`])])]),_:1})]),_:1}),k(L(s),{class:`relative overflow-hidden border-0 shadow-lg`},{default:N(()=>[k(L(Ue),{class:`p-4`},{default:N(()=>[F(`div`,cy,[k(L(Be),{variant:`outline`,size:`sm`,onClick:r[2]||=e=>v(-1)},{default:N(()=>[k(L(Se),{class:`h-4 w-4`})]),_:1}),F(`h3`,ly,R(m.value),1),k(L(Be),{variant:`outline`,size:`sm`,onClick:r[3]||=e=>v(1)},{default:N(()=>[k(L(xe),{class:`h-4 w-4`})]),_:1})])]),_:1})]),_:1})]),F(`div`,uy,[k(L(s),{class:`relative overflow-hidden border-0 shadow-lg animate-slide-in-left hover:shadow-xl transition-all duration-300`},{default:N(()=>[r[4]||=F(`div`,{class:`absolute inset-0 bg-gradient-to-br from-brand-primary to-brand-primary/80`},null,-1),k(L(Ue),{class:`relative p-4 sm:p-6`},{default:N(()=>[F(`p`,dy,R(L(n)(`stats.totalExpense`)),1),F(`p`,fy,`NT$ `+R(g.value.toLocaleString()),1)]),_:1})]),_:1}),k(L(s),{class:`relative overflow-hidden border-0 shadow-lg animate-slide-in-right hover:shadow-xl transition-all duration-300`},{default:N(()=>[r[5]||=F(`div`,{class:`absolute inset-0 bg-gradient-to-br from-brand-primary/60 to-brand-primary`},null,-1),k(L(Ue),{class:`relative p-4 sm:p-6`},{default:N(()=>[F(`p`,py,R(L(n)(`stats.transactionCount`)),1),F(`p`,my,R(_.value)+` `+R(L(n)(`stats.count`)),1)]),_:1})]),_:1})]),k(L(s),{class:`relative overflow-hidden border-0 shadow-lg mb-6 animate-fade-in-up`},{default:N(()=>[k(L(fi),null,{default:N(()=>[k(L(mi),{class:`text-lg`},{default:N(()=>[O(R(L(n)(`stats.expenseDistribution`)),1)]),_:1}),k(L(ci),null,{default:N(()=>[O(R(m.value)+` `+R(L(n)(`stats.categoryPercentage`)),1)]),_:1})]),_:1}),k(L(Ue),null,{default:N(()=>[ee.value.length>0?(M(),ne(L(Uv),{key:0,config:S.value},{default:N(()=>[k(L(Ev),{data:ee.value,"svg-defs":C.value},{default:N(()=>[k(L(Ov),{x:e=>e.index,y:E.value,color:(e,t)=>w.value[t],opacity:.4},null,8,[`x`,`y`,`color`]),k(L(Iv),{x:e=>e.index,y:E.value,color:(e,t)=>T.value[t],"line-width":1},null,8,[`x`,`y`,`color`]),k(L(Av),{type:`x`,"tick-line":!1,"domain-line":!1,"grid-line":!1,"num-ticks":Math.min(ee.value.length,6),"tick-format":e=>ee.value[e]?.label||``},null,8,[`num-ticks`,`tick-format`]),k(L(Av),{type:`y`,"num-ticks":3,"tick-line":!1,"domain-line":!1,"tick-format":()=>``}),k(L(Rv)),k(L(Mv),{template:L(ey)(S.value,L(Zv),{labelKey:`label`}),color:(e,t)=>T.value[t%T.value.length]},null,8,[`template`,`color`])]),_:1},8,[`data`,`svg-defs`])]),_:1},8,[`config`])):(M(),D(`div`,hy,[F(`p`,gy,R(L(n)(`stats.noData`)),1)]))]),_:1}),k(L(ui),null,{default:N(()=>[F(`div`,_y,[F(`div`,vy,[F(`div`,yy,[O(R(L(n)(`stats.totalExpense`))+`: NT$ `+R(g.value.toLocaleString())+` `,1),k(L(a),{class:`h-4 w-4`})]),F(`div`,by,R(m.value),1)])])]),_:1})]),_:1}),k(L(s),{class:`relative overflow-hidden border-0 shadow-lg mb-6 animate-fade-in-up`},{default:N(()=>[k(L(fi),null,{default:N(()=>[k(L(mi),{class:`text-lg`},{default:N(()=>[O(R(L(n)(`stats.expenseRanking`)),1)]),_:1}),k(L(ci),null,{default:N(()=>[O(R(L(n)(`stats.categoryAmountComparison`)),1)]),_:1})]),_:1}),k(L(Ue),null,{default:N(()=>[A.value.length>0?(M(),ne(L(Uv),{key:0,config:te.value},{default:N(()=>[k(L(Ev),{data:A.value},{default:N(()=>[k(L(Pv),{x:e=>e.index,y:e=>e.amount,color:e=>te.value[e.category]?.color,"rounded-corners":5,orientation:L(Ym).Horizontal},null,8,[`x`,`y`,`color`,`orientation`]),k(L(Av),{type:`y`,"tick-line":!1,"domain-line":!1,"grid-line":!1,"num-ticks":A.value.length,"tick-format":e=>A.value.find(t=>t.index===e)?.label||``,"tick-values":A.value.map(e=>e.index)},null,8,[`num-ticks`,`tick-format`,`tick-values`]),k(L(Rv)),k(L(Mv),{template:L(ey)(te.value,L(Zv),{hideLabel:!0}),color:`#0000`},null,8,[`template`])]),_:1},8,[`data`])]),_:1},8,[`config`])):(M(),D(`div`,xy,[F(`p`,Sy,R(L(n)(`stats.noData`)),1)]))]),_:1}),k(L(ui),{class:`flex-col items-start gap-2 text-sm`},{default:N(()=>[F(`div`,Cy,[O(R(L(n)(`stats.totalExpense`))+`: NT$ `+R(g.value.toLocaleString())+` `,1),k(L(a),{class:`h-4 w-4`})]),F(`div`,wy,R(m.value),1)]),_:1})]),_:1}),d.value===`month`?(M(),ne(L(s),{key:0,class:`relative overflow-hidden border-0 shadow-lg mb-6 animate-fade-in-up py-4 sm:py-0`},{default:N(()=>[k(L(fi),{class:`flex flex-col items-stretch border-b !p-0 sm:flex-row`},{default:N(()=>[F(`div`,Ty,[k(L(mi),{class:`text-lg`},{default:N(()=>[O(R(L(n)(`stats.dailyTrend`)),1)]),_:1}),k(L(ci),null,{default:N(()=>[O(R(m.value)+` `+R(L(n)(`stats.dailyChangePattern`)),1)]),_:1})]),Object.keys(h.value).length>0?(M(),D(`div`,Ey,[(M(!0),D(we,null,ue(j.value,e=>(M(),D(`button`,{key:e,"data-active":ie.value===e,class:`data-[active=true]:bg-muted/50 flex flex-1 flex-col justify-center gap-1 border-t px-6 py-4 text-left even:border-l sm:border-t-0 sm:border-l sm:px-8 sm:py-6`,onClick:t=>ie.value=e},[F(`span`,Oy,R(ae.value[e]?.label),1),F(`span`,ky,R(oe.value[e]?.toLocaleString()||0),1)],8,Dy))),128))])):re(``,!0)]),_:1}),k(L(Ue),{class:`px-2 sm:p-6`},{default:N(()=>[se.value.length>0?(M(),ne(L(Uv),{key:0,config:ae.value,class:`aspect-auto h-[250px] w-full`,cursor:``},{default:N(()=>[k(L(Ev),{data:se.value,margin:{left:-24},"y-domain":[0,void 0]},{default:N(()=>[k(L(Pv),{x:e=>e.date,y:e=>e[ie.value],color:ae.value[ie.value]?.color,"bar-padding":.1,"rounded-corners":!1},null,8,[`x`,`y`,`color`]),k(L(Av),{type:`x`,"tick-line":!1,"domain-line":!1,"grid-line":!1,"tick-format":e=>{let t=new Date(e);return`${t.getMonth()+1}/${t.getDate()}`}},null,8,[`tick-format`]),k(L(Av),{type:`y`,"num-ticks":3,"tick-line":!1,"domain-line":!1}),k(L(Rv)),k(L(Mv),{template:L(ey)(ae.value,L(Zv),{labelFormatter(e){let t=new Date(e);return`${t.getMonth()+1}/${t.getDate()}`}}),color:`#0000`},null,8,[`template`])]),_:1},8,[`data`])]),_:1},8,[`config`])):(M(),D(`div`,Ay,[F(`p`,jy,R(L(n)(`stats.noData`)),1)]))]),_:1})]),_:1})):re(``,!0),k(L(s),{class:`relative overflow-hidden border-0 shadow-lg animate-fade-in-up`},{default:N(()=>[k(L(fi),{class:`pb-3`},{default:N(()=>[k(L(mi),{class:`text-lg`},{default:N(()=>[O(R(L(n)(`stats.detailedStats`)),1)]),_:1})]),_:1}),k(L(Ue),{class:`pt-0`},{default:N(()=>[F(`div`,My,[(M(!0),D(we,null,ue(h.value,(e,t)=>(M(),D(`div`,{key:t,class:`space-y-2`},[F(`div`,Ny,[F(`div`,Py,[F(`div`,{class:`w-4 h-4 rounded-full`,style:Ae({backgroundColor:x(String(t))})},null,4),F(`span`,Fy,R(L(o)[t]),1)]),F(`div`,Iy,[F(`p`,Ly,`NT$ `+R(e.total.toLocaleString()),1),F(`p`,Ry,R(e.count)+` `+R(L(n)(`stats.count`))+` (`+R(y(e.total))+`%) `,1)])]),F(`div`,zy,[F(`div`,{class:`h-2.5 rounded-full transition-all duration-300`,style:Ae({width:`${y(e.total)}%`,backgroundColor:x(String(t))})},null,4)])]))),128))])]),_:1})]),_:1}),L(c)&&e.scope===`family`?(M(),ne(L(s),{key:1,class:`relative overflow-hidden border-0 shadow-lg mt-6 animate-fade-in-up`},{default:N(()=>[k(L(fi),{class:`pb-3`},{default:N(()=>[k(L(mi),{class:`text-lg`},{default:N(()=>[...r[6]||=[O(`消費比例分析`,-1)]]),_:1}),k(L(ci),null,{default:N(()=>[...r[7]||=[O(` 情侶間的消費分配情況 `,-1)]]),_:1})]),_:1}),k(L(Ue),{class:`pt-0`},{default:N(()=>[de.value?(M(),D(`div`,Hy,[F(`div`,Uy,[(M(!0),D(we,null,ue(de.value,(e,t)=>(M(),D(`div`,{key:t,class:`space-y-2`},[F(`div`,Wy,[F(`div`,Gy,[F(`div`,{class:`w-4 h-4 rounded-full`,style:Ae({backgroundColor:ce(t)})},null,4),F(`span`,Ky,R(e.user?.display_name||`未知使用者`),1),le(t)?(M(),D(`span`,qy,` 花費最多 `)):re(``,!0)]),F(`div`,Jy,[F(`p`,Yy,`NT$ `+R(e.amount.toLocaleString()),1),F(`p`,Xy,R(e.percentage)+`% `,1)])]),F(`div`,Zy,[F(`div`,{class:`h-2.5 rounded-full transition-all duration-300`,style:Ae({width:`${e.percentage}%`,backgroundColor:ce(t)})},null,4)])]))),128))]),F(`div`,Qy,[k(L(Be),{onClick:me,variant:`outline`,class:`w-full`},{default:N(()=>[u.value?(M(),D(`span`,eb,`隱藏結算金額`)):(M(),D(`span`,$y,`查看結算金額`))]),_:1})]),u.value&&fe.value?(M(),D(`div`,tb,[F(`div`,nb,[r[11]||=F(`div`,{class:`flex items-center justify-center gap-2`},[F(`svg`,{xmlns:`http://www.w3.org/2000/svg`,class:`h-5 w-5 text-blue-600 dark:text-blue-400`,viewBox:`0 0 20 20`,fill:`currentColor`},[F(`path`,{d:`M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z`}),F(`path`,{"fill-rule":`evenodd`,d:`M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z`,"clip-rule":`evenodd`})]),F(`h3`,{class:`text-lg font-semibold text-blue-900 dark:text-blue-100`},`結算資訊`)],-1),F(`div`,rb,[r[8]||=F(`p`,{class:`text-sm text-gray-600 dark:text-gray-400 mb-2`},`消費差額`,-1),F(`p`,ib,`NT$ `+R(fe.value.difference.toLocaleString()),1)]),F(`div`,ab,[F(`span`,ob,R(fe.value.payer.user?.display_name),1),r[9]||=F(`span`,{class:`text-gray-500 dark:text-gray-400`},`需支付`,-1),F(`span`,sb,`NT$ `+R(fe.value.halfDifference.toLocaleString()),1),r[10]||=F(`span`,{class:`text-gray-500 dark:text-gray-400`},`給`,-1),F(`span`,cb,R(fe.value.receiver.user?.display_name),1)]),F(`p`,lb,` 結算後雙方各自負擔 NT$ `+R((fe.value.difference/2+Math.min(fe.value.payer.amount,fe.value.receiver.amount)).toLocaleString()),1)])])):re(``,!0)])):(M(),D(`div`,By,[F(`p`,Vy,R(m.value)+` 暫無消費比例資料`,1)]))]),_:1})]),_:1})):re(``,!0)]))}}),db=Pe(ub,[[`__scopeId`,`data-v-d3c8c7d1`]]);const fb={class:`min-h-screen bg-background`},pb={class:`px-4 pb-24`},mb={class:`mt-6`},hb={class:`mt-4`};var gb=A({__name:`Statistics`,setup(e){let{t}=ge(),n=Fe(),r=Ie(),{isInCouple:i}=Le(r),a=I(`personal`);return We({onRefresh:async()=>{try{await Promise.all([n.fetchExpenses(),r.fetchUserProfile()]),ve.success(`資料已更新`)}catch(e){console.error(`刷新失敗:`,e),ve.error(`刷新失敗，請稍後重試`)}}}),(e,n)=>(M(),D(`div`,fb,[k(c,{title:L(t)(`stats.title`)},null,8,[`title`]),F(`main`,pb,[F(`div`,mb,[k(L(_),{modelValue:a.value,"onUpdate:modelValue":n[0]||=e=>a.value=e,class:`w-full`},{default:N(()=>[k(L(h),{class:`grid w-full grid-cols-2`},{default:N(()=>[k(L(m),{value:`personal`,class:`flex items-center gap-2`},{default:N(()=>[k(L(ye),{class:`h-4 w-4`}),O(` `+R(L(t)(`stats.personalStats`)),1)]),_:1}),k(L(m),{value:`family`,disabled:!L(i),class:ke([`flex items-center gap-2`,{"opacity-50 cursor-not-allowed":!L(i)}])},{default:N(()=>[k(L(be),{class:`h-4 w-4`}),O(` `+R(L(t)(`stats.familyStats`)),1)]),_:1},8,[`disabled`,`class`])]),_:1})]),_:1},8,[`modelValue`])]),F(`div`,hb,[k(L(_),{"default-value":`calendar`,class:`w-full`},{default:N(()=>[k(L(h),{class:`grid w-full grid-cols-2`},{default:N(()=>[k(L(m),{value:`calendar`},{default:N(()=>[O(R(L(t)(`stats.calendarView`)),1)]),_:1}),k(L(m),{value:`chart`},{default:N(()=>[O(R(L(t)(`stats.chartAnalysis`)),1)]),_:1})]),_:1}),k(L(g),{value:`calendar`,class:`mt-6`},{default:N(()=>[k(Oi,{scope:a.value},null,8,[`scope`])]),_:1}),k(L(g),{value:`chart`,class:`mt-6`},{default:N(()=>[k(db,{scope:a.value},null,8,[`scope`])]),_:1})]),_:1})])])]))}}),_b=gb;export{_b as default};