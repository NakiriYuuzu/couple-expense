import{c as e}from"./TopBar-DUw4tseo.js";import{E as t,F as n,I as r,J as i,M as a,N as o,P as s,a$ as c,aI as l,aO as u,aP as d,aY as f,aZ as p,a_ as m,ao as h,az as g,b0 as _,b3 as v,b4 as y,ba as b,bc as x,bd as S,be as C,bh as ee,bi as w,bm as T,br as E,bu as te,bv as D,bw as O,bz as k}from"./index-DaV3G9Q-.js";const ne=`rovingFocusGroup.onEntryFocus`,re={bubbles:!1,cancelable:!0},ie={ArrowLeft:`prev`,ArrowUp:`prev`,ArrowRight:`next`,ArrowDown:`next`,PageUp:`first`,Home:`first`,PageDown:`last`,End:`last`};function ae(e,t){return t===`rtl`?e===`ArrowLeft`?`ArrowRight`:e===`ArrowRight`?`ArrowLeft`:e:e}function oe(e,t,n){let r=ae(e.key,n);if(!(t===`vertical`&&[`ArrowLeft`,`ArrowRight`].includes(r))&&!(t===`horizontal`&&[`ArrowUp`,`ArrowDown`].includes(r)))return ie[r]}function A(e,t=!1){let n=u();for(let r of e)if(r===n||(r.focus({preventScroll:t}),u()!==n))return}function j(e,t){return e.map((n,r)=>e[(t+r)%e.length])}const[M,N]=d(`RovingFocusGroup`);var P=y({__name:`RovingFocusGroup`,props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:[`entryFocus`,`update:currentTabStopId`],setup(t,{expose:n,emit:r}){let i=t,a=r,{loop:o,orientation:s,dir:c}=te(i),u=g(c),d=l(i,`currentTabStopId`,a,{defaultValue:i.defaultCurrentTabStopId,passive:i.currentTabStopId===void 0}),f=E(!1),p=E(!1),_=E(0),{getItems:y,CollectionSlot:b}=e({isProvider:!0});function x(e){let t=!p.value;if(e.currentTarget&&e.target===e.currentTarget&&t&&!f.value){let t=new CustomEvent(ne,re);if(e.currentTarget.dispatchEvent(t),a(`entryFocus`,t),!t.defaultPrevented){let e=y().map(e=>e.ref).filter(e=>e.dataset.disabled!==``),t=e.find(e=>e.getAttribute(`data-active`)===``),n=e.find(e=>e.id===d.value),r=[t,n,...e].filter(Boolean);A(r,i.preventScrollOnEntryFocus)}}p.value=!1}function S(){setTimeout(()=>{p.value=!1},1)}return n({getItems:y}),N({loop:o,dir:u,orientation:s,currentTabStopId:d,onItemFocus:e=>{d.value=e},onItemShiftTab:()=>{f.value=!0},onFocusableItemAdd:()=>{_.value++},onFocusableItemRemove:()=>{_.value--}}),(e,t)=>(C(),m(D(b),null,{default:T(()=>[v(D(h),{tabindex:f.value||_.value===0?-1:0,"data-orientation":D(s),as:e.as,"as-child":e.asChild,dir:D(u),style:{outline:`none`},onMousedown:t[0]||=e=>p.value=!0,onMouseup:S,onFocus:x,onBlur:t[1]||=e=>f.value=!1},{default:T(()=>[ee(e.$slots,`default`)]),_:3},8,[`tabindex`,`data-orientation`,`as`,`as-child`,`dir`])]),_:3}))}}),F=P;const I=s(`bus`,[[`path`,{d:`M8 6v6`,key:`18i7km`}],[`path`,{d:`M15 6v6`,key:`1sg6z9`}],[`path`,{d:`M2 12h19.6`,key:`de5uta`}],[`path`,{d:`M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3`,key:`1wwztk`}],[`circle`,{cx:`7`,cy:`18`,r:`2`,key:`19iecd`}],[`path`,{d:`M9 18h5`,key:`lrx6i`}],[`circle`,{cx:`16`,cy:`18`,r:`2`,key:`1v4tcr`}]]),L={class:`flex items-center justify-between`},R={class:`flex items-center gap-3`},z={class:`flex-1`},B={class:`text-[13px] font-normal text-card-foreground`},V={key:0,class:`text-[11px] text-muted-foreground mt-0.5`},H={class:`text-[13px] font-normal text-expense`};var U=y({__name:`ExpenseItem`,props:{id:{},title:{},amount:{},category:{},icon:{},user:{},showUser:{type:Boolean}},emits:[`click`],setup(e,{emit:s}){let l=e,u=s,d=()=>{u(`click`,l)},h={restaurant:t,heart:a,shopping:n,transport:o,home:i,package:r},g={restaurant:{background:`bg-brand-accent`,color:`text-brand-primary`},heart:{background:`bg-brand-accent`,color:`text-brand-primary`},shopping:{background:`bg-brand-accent`,color:`text-brand-primary`},transport:{background:`bg-brand-accent`,color:`text-brand-primary`},home:{background:`bg-brand-accent`,color:`text-brand-primary`},package:{background:`bg-brand-accent`,color:`text-brand-primary`}},v=f(()=>h[l.icon]||n),y=f(()=>{let e=g[l.icon];return e?.background||`bg-brand-accent`}),b=f(()=>{let e=g[l.icon];return e?.color||`text-brand-primary`});return(e,t)=>(C(),_(`div`,{class:`bg-card rounded-[10px] p-3 shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer`,onClick:d},[p(`div`,L,[p(`div`,R,[p(`div`,{class:O([`flex h-5 w-5 items-center justify-center rounded-[4px]`,y.value])},[(C(),m(w(v.value),{class:O([`h-3 w-3`,b.value])},null,8,[`class`]))],2),p(`div`,z,[p(`p`,B,k(e.title),1),e.showUser&&e.user?(C(),_(`p`,V,k(e.user.display_name||`未知使用者`),1)):c(``,!0)])]),p(`p`,H,k(e.amount),1)])]))}}),W=U,G={pullStartY:null,pullMoveY:null,handlers:[],styleEl:null,events:null,dist:0,state:`pending`,timeout:null,distResisted:0,supportsPassive:!1,supportsPointerEvents:typeof window<`u`&&!!window.PointerEvent};try{window.addEventListener(`test`,null,{get passive(){G.supportsPassive=!0}})}catch{}function K(e){if(!e.ptrElement){var t=document.createElement(`div`);e.mainElement===document.body?document.body.insertBefore(t,document.body.firstChild):e.mainElement.parentNode.insertBefore(t,e.mainElement),t.classList.add(e.classPrefix+`ptr`),t.innerHTML=e.getMarkup().replace(/__PREFIX__/g,e.classPrefix),e.ptrElement=t,typeof e.onInit==`function`&&e.onInit(e),G.styleEl||(G.styleEl=document.createElement(`style`),G.styleEl.setAttribute(`id`,`pull-to-refresh-js-style`),document.head.appendChild(G.styleEl)),G.styleEl.textContent=e.getStyles().replace(/__PREFIX__/g,e.classPrefix).replace(/\s+/g,` `)}return e}function se(e){e.ptrElement&&(e.ptrElement.classList.remove(e.classPrefix+`refresh`),e.ptrElement.style[e.cssProp]=`0px`,setTimeout(function(){e.ptrElement&&e.ptrElement.parentNode&&(e.ptrElement.parentNode.removeChild(e.ptrElement),e.ptrElement=null),G.state=`pending`},e.refreshTimeout))}function ce(e){var t=e.ptrElement.querySelector(`.`+e.classPrefix+`icon`),n=e.ptrElement.querySelector(`.`+e.classPrefix+`text`);t&&(G.state===`refreshing`?t.innerHTML=e.iconRefreshing:t.innerHTML=e.iconArrow),n&&(G.state===`releasing`&&(n.innerHTML=e.instructionsReleaseToRefresh),(G.state===`pulling`||G.state===`pending`)&&(n.innerHTML=e.instructionsPullToRefresh),G.state===`refreshing`&&(n.innerHTML=e.instructionsRefreshing))}var q={setupDOM:K,onReset:se,update:ce},J,Y=function(e){return G.pointerEventsEnabled&&G.supportsPointerEvents?e.screenY:e.touches[0].screenY},X=(function(){var e;function t(t){var n=G.handlers.filter(function(e){return e.contains(t.target)})[0];G.enable=!!n,n&&G.state===`pending`&&(e=q.setupDOM(n),n.shouldPullToRefresh()&&(G.pullStartY=Y(t)),clearTimeout(G.timeout),q.update(n))}function n(t){if(e&&e.ptrElement&&G.enable){if(G.pullStartY?G.pullMoveY=Y(t):e.shouldPullToRefresh()&&(G.pullStartY=Y(t)),G.state===`refreshing`){t.cancelable&&e.shouldPullToRefresh()&&G.pullStartY<G.pullMoveY&&t.preventDefault();return}G.state===`pending`&&(e.ptrElement.classList.add(e.classPrefix+`pull`),G.state=`pulling`,q.update(e)),G.pullStartY&&G.pullMoveY&&(G.dist=G.pullMoveY-G.pullStartY),G.distExtra=G.dist-e.distIgnore,G.distExtra>0&&(t.cancelable&&t.preventDefault(),e.ptrElement.style[e.cssProp]=G.distResisted+`px`,G.distResisted=e.resistanceFunction(G.distExtra/e.distThreshold)*Math.min(e.distMax,G.distExtra),G.state===`pulling`&&G.distResisted>e.distThreshold&&(e.ptrElement.classList.add(e.classPrefix+`release`),G.state=`releasing`,q.update(e)),G.state===`releasing`&&G.distResisted<e.distThreshold&&(e.ptrElement.classList.remove(e.classPrefix+`release`),G.state=`pulling`,q.update(e)))}}function r(){if(e&&e.ptrElement&&G.enable){if(clearTimeout(J),J=setTimeout(function(){e&&e.ptrElement&&G.state===`pending`&&q.onReset(e)},500),G.state===`releasing`&&G.distResisted>e.distThreshold)G.state=`refreshing`,e.ptrElement.style[e.cssProp]=e.distReload+`px`,e.ptrElement.classList.add(e.classPrefix+`refresh`),G.timeout=setTimeout(function(){var t=e.onRefresh(function(){return q.onReset(e)});t&&typeof t.then==`function`&&t.then(function(){return q.onReset(e)}),!t&&!e.onRefresh.length&&q.onReset(e)},e.refreshTimeout);else{if(G.state===`refreshing`)return;e.ptrElement.style[e.cssProp]=`0px`,G.state=`pending`}q.update(e),e.ptrElement.classList.remove(e.classPrefix+`release`),e.ptrElement.classList.remove(e.classPrefix+`pull`),G.pullStartY=G.pullMoveY=null,G.dist=G.distResisted=0}}function i(){e&&e.mainElement.classList.toggle(e.classPrefix+`top`,e.shouldPullToRefresh())}var a=G.supportsPassive?{passive:G.passive||!1}:void 0;return G.pointerEventsEnabled&&G.supportsPointerEvents?(window.addEventListener(`pointerup`,r),window.addEventListener(`pointerdown`,t),window.addEventListener(`pointermove`,n,a)):(window.addEventListener(`touchend`,r),window.addEventListener(`touchstart`,t),window.addEventListener(`touchmove`,n,a)),window.addEventListener(`scroll`,i),{onTouchEnd:r,onTouchStart:t,onTouchMove:n,onScroll:i,destroy:function(){G.pointerEventsEnabled&&G.supportsPointerEvents?(window.removeEventListener(`pointerdown`,t),window.removeEventListener(`pointerup`,r),window.removeEventListener(`pointermove`,n,a)):(window.removeEventListener(`touchstart`,t),window.removeEventListener(`touchend`,r),window.removeEventListener(`touchmove`,n,a)),window.removeEventListener(`scroll`,i)}}}),le=`
<div class="__PREFIX__box">
  <div class="__PREFIX__content">
    <div class="__PREFIX__icon"></div>
    <div class="__PREFIX__text"></div>
  </div>
</div>
`,ue=`
.__PREFIX__ptr {
  box-shadow: inset 0 -3px 5px rgba(0, 0, 0, 0.12);
  pointer-events: none;
  font-size: 0.85em;
  font-weight: bold;
  top: 0;
  height: 0;
  transition: height 0.3s, min-height 0.3s;
  text-align: center;
  width: 100%;
  overflow: hidden;
  display: flex;
  align-items: flex-end;
  align-content: stretch;
}

.__PREFIX__box {
  padding: 10px;
  flex-basis: 100%;
}

.__PREFIX__pull {
  transition: none;
}

.__PREFIX__text {
  margin-top: .33em;
  color: rgba(0, 0, 0, 0.3);
}

.__PREFIX__icon {
  color: rgba(0, 0, 0, 0.3);
  transition: transform .3s;
}

/*
When at the top of the page, disable vertical overscroll so passive touch
listeners can take over.
*/
.__PREFIX__top {
  touch-action: pan-x pan-down pinch-zoom;
}

.__PREFIX__release .__PREFIX__icon {
  transform: rotate(180deg);
}
`,Z={distThreshold:60,distMax:80,distReload:50,distIgnore:0,mainElement:`body`,triggerElement:`body`,ptrElement:`.ptr`,classPrefix:`ptr--`,cssProp:`min-height`,iconArrow:`&#8675;`,iconRefreshing:`&hellip;`,instructionsPullToRefresh:`Pull down to refresh`,instructionsReleaseToRefresh:`Release to refresh`,instructionsRefreshing:`Refreshing`,refreshTimeout:500,getMarkup:function(){return le},getStyles:function(){return ue},onInit:function(){},onRefresh:function(){return location.reload()},resistanceFunction:function(e){return Math.min(1,e/2.5)},shouldPullToRefresh:function(){return!window.scrollY}},Q=[`mainElement`,`ptrElement`,`triggerElement`],$=(function(e){var t={};return Object.keys(Z).forEach(function(n){t[n]=e[n]||Z[n]}),t.refreshTimeout=typeof e.refreshTimeout==`number`?e.refreshTimeout:Z.refreshTimeout,Q.forEach(function(e){typeof t[e]==`string`&&(t[e]=document.querySelector(t[e]))}),G.events||=X(),t.contains=function(e){return t.triggerElement.contains(e)},t.destroy=function(){clearTimeout(G.timeout);var e=G.handlers.indexOf(t);G.handlers.splice(e,1)},t}),de={setPassiveMode:function(e){G.passive=e},setPointerEventsMode:function(e){G.pointerEventsEnabled=e},destroyAll:function(){G.events&&(G.events.destroy(),G.events=null),G.handlers.forEach(function(e){e.destroy()})},init:function(e){e===void 0&&(e={});var t=$(e);return G.handlers.push(t),t},_:{setupHandler:$,setupEvents:X,setupDOM:q.setupDOM,onReset:q.onReset,update:q.update}},fe=de;function pe(e){let{onRefresh:t,selector:n,disabled:r=!1,mainElement:i}=e,a=null;return x(async()=>{if(r)return;await b();let e=`body`;if(i)e=i;else if(n){let t=document.querySelector(n);t&&(e=n)}a=fe.init({mainElement:e,onRefresh:async()=>{try{await t()}catch(e){console.error(`Refresh failed:`,e)}},distThreshold:60,distMax:80,distReload:50,distIgnore:10,resistanceFunction:e=>Math.min(1,e/2.5),iconArrow:`&#8675;`,iconRefreshing:`&hellip;`,instructionsPullToRefresh:`下拉刷新`,instructionsReleaseToRefresh:`鬆開刷新`,instructionsRefreshing:`正在刷新...`,shouldPullToRefresh:function(){let t=document.querySelector(e);return e===`body`||!t?window.scrollY===0:t.scrollTop===0},getMarkup:function(){return`                <div class="__PREFIX__box" style="pointer-events: none;">                    <div class="__PREFIX__content">                        <div class="__PREFIX__icon"></div>                        <div class="__PREFIX__text"></div>                    </div>                </div>`},classPrefix:`ptr--`,cssProp:`min-height`,getStyles:function(){return`                .__PREFIX__ptr {                    pointer-events: none;                    font-size: 0.85em;                    font-weight: bold;                    top: 0;                    height: 0;                    transition: height 0.3s, min-height 0.3s;                    text-align: center;                    width: 100%;                    overflow: hidden;                    display: flex;                    align-items: flex-end;                    align-content: stretch;                }                .__PREFIX__box {                    padding: 10px;                    flex-basis: 100%;                }                .__PREFIX__pull {                    transition: none;                }                .__PREFIX__text {                    margin-top: .33em;                    color: var(--brand-primary);                }                .__PREFIX__icon {                    color: var(--brand-primary);                    transition: transform .3s;                }                .__PREFIX__top {                    touch-action: pan-y;                }                .__PREFIX__release .__PREFIX__icon {                    transform: rotate(180deg);                }                `}})}),S(()=>{a&&(a.destroy(),a=null)}),{destroy:()=>{a&&(a.destroy(),a=null)}}}export{pe as b,W as c,I as d,F as e,M as f,A as g,oe as h,j as i};