import{b as e,c as t,d as n,e as r,f as i}from"./SelectValue-Bo5Shl6q.js";import{c as a}from"./VisuallyHidden-BPF3JLnY.js";import{b as o}from"./TopBar-DUw4tseo.js";import{b as s}from"./VisuallyHiddenInput-CcuwT87J.js";import{b as c}from"./Label-CwhSjOJt.js";import{b as l,c as u,d}from"./badge-DKtIHcPq.js";import{b as f,c as p,d as ee,e as te,f as ne,g as m}from"./DialogTitle-Ck2Dyjf6.js";import{A as re,B as h,C as g,D as ie,K as _,P as v,Q as y,R as b,a$ as x,aI as S,aP as C,aQ as w,aS as ae,aT as T,aU as E,aV as D,aW as O,aY as k,aZ as A,a_ as j,ao as M,au as N,aw as P,b as oe,b0 as F,b2 as I,b3 as L,b4 as R,b5 as se,b9 as z,ba as ce,bc as B,be as V,bg as H,bh as U,bm as W,br as G,bu as K,bv as q,bw as J,bx as Y,bz as X,d as Z,e as le,f as ue,g as de,h as fe,i as pe,j as me,s as he,y as ge,z as _e}from"./index-DaV3G9Q-.js";import{b as Q}from"./Card-BpQYwhaM.js";import{b as ve}from"./CardContent-00AvZF2e.js";import{b as ye}from"./DialogFooter-CkrDA5yQ.js";var be=R({__name:`BaseSeparator`,props:{orientation:{type:String,required:!1,default:`horizontal`},decorative:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){let t=e,n=[`horizontal`,`vertical`];function r(e){return n.includes(e)}let i=k(()=>r(t.orientation)?t.orientation:`horizontal`),a=k(()=>i.value===`vertical`?t.orientation:void 0),o=k(()=>t.decorative?{role:`none`}:{"aria-orientation":a.value,role:`separator`});return(e,t)=>(V(),j(q(M),z({as:e.as,"as-child":e.asChild,"data-orientation":i.value},o.value),{default:W(()=>[U(e.$slots,`default`)]),_:3},16,[`as`,`as-child`,`data-orientation`]))}}),xe=be,Se=R({__name:`Separator`,props:{orientation:{type:String,required:!1,default:`horizontal`},decorative:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){let t=e;return(e,n)=>(V(),j(xe,Y(se(t)),{default:W(()=>[U(e.$slots,`default`)]),_:3},16))}}),Ce=Se;const[we,Te]=C(`SwitchRoot`);var Ee=R({__name:`SwitchRoot`,props:{defaultValue:{type:Boolean,required:!1},modelValue:{type:[Boolean,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},value:{type:String,required:!1,default:`on`},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`button`},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:[`update:modelValue`],setup(e,{emit:t}){let n=e,r=t,{disabled:i}=K(n),o=S(n,`modelValue`,r,{defaultValue:n.defaultValue,passive:n.modelValue===void 0});function c(){i.value||(o.value=!o.value)}let{forwardRef:l,currentElement:u}=P(),d=a(u),f=k(()=>n.id&&u.value?document.querySelector(`[for="${n.id}"]`)?.innerText:void 0);return Te({modelValue:o,toggleCheck:c,disabled:i}),(e,t)=>(V(),j(q(M),z(e.$attrs,{id:e.id,ref:q(l),role:`switch`,type:e.as===`button`?`button`:void 0,value:e.value,"aria-label":e.$attrs[`aria-label`]||f.value,"aria-checked":q(o),"aria-required":e.required,"data-state":q(o)?`checked`:`unchecked`,"data-disabled":q(i)?``:void 0,"as-child":e.asChild,as:e.as,disabled:q(i),onClick:c,onKeydown:E(D(c,[`prevent`]),[`enter`])}),{default:W(()=>[U(e.$slots,`default`,{modelValue:q(o)}),q(d)&&e.name?(V(),j(q(s),{key:0,type:`checkbox`,name:e.name,disabled:q(i),required:e.required,value:e.value,checked:!!q(o)},null,8,[`name`,`disabled`,`required`,`value`,`checked`])):x(`v-if`,!0)]),_:3},16,[`id`,`type`,`value`,`aria-label`,`aria-checked`,`aria-required`,`data-state`,`data-disabled`,`as-child`,`as`,`disabled`,`onKeydown`]))}}),De=Ee,Oe=R({__name:`SwitchThumb`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`span`}},setup(e){let t=we();return P(),(e,n)=>(V(),j(q(M),{"data-state":q(t).modelValue?.value?`checked`:`unchecked`,"data-disabled":q(t).disabled.value?``:void 0,"as-child":e.asChild,as:e.as},{default:W(()=>[U(e.$slots,`default`)]),_:3},8,[`data-state`,`data-disabled`,`as-child`,`as`]))}}),ke=Oe;const Ae=v(`bell`,[[`path`,{d:`M10.268 21a2 2 0 0 0 3.464 0`,key:`vwvbt9`}],[`path`,{d:`M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326`,key:`11g9vi`}]]),je=v(`languages`,[[`path`,{d:`m5 8 6 6`,key:`1wu5hv`}],[`path`,{d:`m4 14 6-6 2-3`,key:`1k1g8d`}],[`path`,{d:`M2 5h12`,key:`or177f`}],[`path`,{d:`M7 2h1`,key:`1t2jsx`}],[`path`,{d:`m22 22-5-10-5 10`,key:`don7ne`}],[`path`,{d:`M14 18h6`,key:`1m8k6r`}]]),Me=v(`moon`,[[`path`,{d:`M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401`,key:`kfwtm`}]]),Ne=v(`sun`,[[`circle`,{cx:`12`,cy:`12`,r:`4`,key:`4exip2`}],[`path`,{d:`M12 2v2`,key:`tus03m`}],[`path`,{d:`M12 20v2`,key:`1lh1kg`}],[`path`,{d:`m4.93 4.93 1.41 1.41`,key:`149t6j`}],[`path`,{d:`m17.66 17.66 1.41 1.41`,key:`ptbguv`}],[`path`,{d:`M2 12h2`,key:`1t8f8n`}],[`path`,{d:`M20 12h2`,key:`1q8mjw`}],[`path`,{d:`m6.34 17.66-1.41 1.41`,key:`1m8zz5`}],[`path`,{d:`m19.07 4.93-1.41 1.41`,key:`1shlcs`}]]),Pe=v(`user-cog`,[[`path`,{d:`M10 15H6a4 4 0 0 0-4 4v2`,key:`1nfge6`}],[`path`,{d:`m14.305 16.53.923-.382`,key:`1itpsq`}],[`path`,{d:`m15.228 13.852-.923-.383`,key:`eplpkm`}],[`path`,{d:`m16.852 12.228-.383-.923`,key:`13v3q0`}],[`path`,{d:`m16.852 17.772-.383.924`,key:`1i8mnm`}],[`path`,{d:`m19.148 12.228.383-.923`,key:`1q8j1v`}],[`path`,{d:`m19.53 18.696-.382-.924`,key:`vk1qj3`}],[`path`,{d:`m20.772 13.852.924-.383`,key:`n880s0`}],[`path`,{d:`m20.772 16.148.924.383`,key:`1g6xey`}],[`circle`,{cx:`18`,cy:`15`,r:`3`,key:`gjjjvw`}],[`circle`,{cx:`9`,cy:`7`,r:`4`,key:`nufk8`}]]);var Fe=R({__name:`Switch`,props:{defaultValue:{type:Boolean},modelValue:{type:[Boolean,null]},disabled:{type:Boolean},id:{},value:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:[`update:modelValue`],setup(e,{emit:t}){let n=e,r=t,i=h(n,`class`),a=N(i,r);return(e,t)=>(V(),j(q(De),z({"data-slot":`switch`},q(a),{class:q(b)(`peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50`,n.class)}),{default:W(()=>[L(q(ke),{"data-slot":`switch-thumb`,class:J(q(b)(`bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0`))},{default:W(()=>[U(e.$slots,`thumb`)]),_:3},8,[`class`])]),_:3},16,[`class`]))}}),$=Fe,Ie=R({__name:`ThemeToggle`,setup(e){let t=Z(),{isDark:n,toggleDark:r}=t;return(e,t)=>(V(),j(q(y),{variant:`outline`,size:`icon`,onClick:t[0]||=e=>q(r)(),class:`relative`},{default:W(()=>[L(q(Ne),{class:`h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0`}),L(q(Me),{class:`absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100`}),t[1]||=A(`span`,{class:`sr-only`},`切換主題`,-1)]),_:1,__:[1]}))}}),Le=Ie,Re=R({__name:`Separator`,props:{orientation:{default:`horizontal`},decorative:{type:Boolean,default:!0},asChild:{type:Boolean},as:{},class:{}},setup(e){let t=e,n=h(t,`class`);return(e,r)=>(V(),j(q(Ce),z({"data-slot":`separator-root`},q(n),{class:q(b)(`bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px`,t.class)}),null,16,[`class`]))}}),ze=Re,Be=R({__name:`Alert`,props:{class:{},variant:{}},setup(e){let t=e;return(e,n)=>(V(),F(`div`,{"data-slot":`alert`,class:J(q(b)(q(Ke)({variant:e.variant}),t.class)),role:`alert`},[U(e.$slots,`default`)],2))}}),Ve=Be,He=R({__name:`AlertDescription`,props:{class:{}},setup(e){let t=e;return(e,n)=>(V(),F(`div`,{"data-slot":`alert-description`,class:J(q(b)(`text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed`,t.class))},[U(e.$slots,`default`)],2))}}),Ue=He,We=R({__name:`AlertTitle`,props:{class:{}},setup(e){let t=e;return(e,n)=>(V(),F(`div`,{"data-slot":`alert-title`,class:J(q(b)(`col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight`,t.class))},[U(e.$slots,`default`)],2))}}),Ge=We;const Ke=w(`relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current`,{variants:{variant:{default:`bg-card text-card-foreground`,destructive:`text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90`}},defaultVariants:{variant:`default`}}),qe={class:`space-y-6`},Je={class:`space-y-4`},Ye={class:`flex items-center justify-between`},Xe={class:`space-y-1`},Ze={class:`text-sm text-muted-foreground`},Qe={class:`flex items-center space-x-2`},$e={key:0,class:`space-y-4`},et={class:`space-y-4`},tt={class:`flex items-center justify-between`},nt={class:`space-y-1`},rt={class:`flex items-center justify-between`},it={class:`space-y-1`},at={class:`flex items-center justify-between`},ot={class:`space-y-1`},st={class:`flex items-center justify-between`},ct={class:`space-y-1`},lt={class:`flex items-center justify-between`},ut={class:`space-y-1`},dt={class:`flex items-center justify-between`},ft={class:`space-y-1`},pt={class:`flex items-center justify-between`},mt={class:`space-y-1`},ht={key:1,class:`space-y-4`},gt={class:`flex items-center justify-between`},_t={class:`space-x-2`},vt={class:`max-h-60 overflow-y-auto`},yt={class:`flex-1 space-y-1`},bt={class:`flex items-center space-x-2`},xt={class:`font-medium text-sm`},St={class:`text-sm text-muted-foreground`},Ct={class:`text-xs text-muted-foreground`};var wt=R({__name:`NotificationSettings`,setup(e){let t=pe(),n=G({...t.settings}),r=k(()=>{switch(t.permissionStatus){case`granted`:return`已授權推播通知權限`;case`denied`:return`推播通知權限被拒絕`;case`default`:return`尚未授權推播通知權限`;default:return`未知權限狀態`}}),i=k(()=>{switch(t.permissionStatus){case`granted`:return`default`;case`denied`:return`destructive`;case`default`:return`secondary`;default:return`outline`}}),a=k(()=>{switch(t.permissionStatus){case`granted`:return`已授權`;case`denied`:return`被拒絕`;case`default`:return`未授權`;default:return`未知`}}),o=async()=>{let e=await t.requestPermission();if(e)try{t.setupDailyNotifications(),t.setupWeeklyNotifications(),T.success(`推播通知已啟用！每日總結和週報已設定完成。`)}catch(e){console.error(`設定通知排程失敗:`,e),T.success(`推播通知已啟用！`)}},s=async()=>{await t.testNotification(),T.success(`測試通知已發送！`)},u=async(e,r)=>{await t.updateSettings({[e]:r}),n.value[e]=r},f=e=>new Intl.DateTimeFormat(`zh-TW`,{month:`short`,day:`numeric`,hour:`2-digit`,minute:`2-digit`}).format(new Date(e));return B(async()=>{if(await t.initialize(),t.hasPermission)try{t.setupDailyNotifications(),t.setupWeeklyNotifications(),setInterval(async()=>{await t.validateAndUpdateToken()},3600*1e3)}catch(e){console.error(`設定通知排程失敗:`,e)}n.value={...t.settings}}),(e,p)=>(V(),F(`div`,qe,[A(`div`,Je,[p[10]||=A(`h3`,{class:`text-lg font-semibold`},`推播通知設定`,-1),L(q(Q),null,{default:W(()=>[L(q(ve),{class:`pt-6`},{default:W(()=>[A(`div`,Ye,[A(`div`,Xe,[p[7]||=A(`p`,{class:`font-medium`},`通知權限`,-1),A(`p`,Ze,X(r.value),1)]),A(`div`,Qe,[L(q(l),{variant:i.value},{default:W(()=>[I(X(a.value),1)]),_:1},8,[`variant`]),q(t).canRequestPermission?(V(),j(q(y),{key:0,onClick:o,loading:q(t).isLoading,size:`sm`},{default:W(()=>p[8]||=[I(` 啟用通知 `,-1)]),_:1,__:[8]},8,[`loading`])):q(t).hasPermission?(V(),j(q(y),{key:1,onClick:s,variant:`outline`,size:`sm`},{default:W(()=>p[9]||=[I(` 測試通知 `,-1)]),_:1,__:[9]})):x(``,!0)])])]),_:1})]),_:1})]),q(t).hasPermission?(V(),F(`div`,$e,[p[25]||=A(`h4`,{class:`font-medium`},`通知類型`,-1),A(`div`,et,[A(`div`,tt,[A(`div`,nt,[L(q(c),{class:`font-medium`},{default:W(()=>p[11]||=[I(`啟用推播通知`,-1)]),_:1,__:[11]}),p[12]||=A(`p`,{class:`text-sm text-muted-foreground`},` 接收所有推播通知 `,-1)]),L(q($),{"model-value":n.value.enabled,"onUpdate:modelValue":p[0]||=e=>u(`enabled`,e)},null,8,[`model-value`])]),L(q(ze)),A(`div`,{class:J([`space-y-4`,{"opacity-50":!n.value.enabled}])},[A(`div`,rt,[A(`div`,it,[L(q(c),{class:`font-medium`},{default:W(()=>p[13]||=[I(`支出提醒`,-1)]),_:1,__:[13]}),p[14]||=A(`p`,{class:`text-sm text-muted-foreground`},` 重要支出和預算提醒 `,-1)]),L(q($),{"model-value":n.value.expenseReminders,"onUpdate:modelValue":p[1]||=e=>u(`expenseReminders`,e),disabled:!n.value.enabled},null,8,[`model-value`,`disabled`])]),A(`div`,at,[A(`div`,ot,[L(q(c),{class:`font-medium`},{default:W(()=>p[15]||=[I(`每日總結`,-1)]),_:1,__:[15]}),p[16]||=A(`p`,{class:`text-sm text-muted-foreground`},` 每日支出總結報告 `,-1)]),L(q($),{"model-value":n.value.dailySummary,"onUpdate:modelValue":p[2]||=e=>u(`dailySummary`,e),disabled:!n.value.enabled},null,8,[`model-value`,`disabled`])]),A(`div`,st,[A(`div`,ct,[L(q(c),{class:`font-medium`},{default:W(()=>p[17]||=[I(`週報`,-1)]),_:1,__:[17]}),p[18]||=A(`p`,{class:`text-sm text-muted-foreground`},` 每週支出分析報告 `,-1)]),L(q($),{"model-value":n.value.weeklyReport,"onUpdate:modelValue":p[3]||=e=>u(`weeklyReport`,e),disabled:!n.value.enabled},null,8,[`model-value`,`disabled`])]),A(`div`,lt,[A(`div`,ut,[L(q(c),{class:`font-medium`},{default:W(()=>p[19]||=[I(`預算警告`,-1)]),_:1,__:[19]}),p[20]||=A(`p`,{class:`text-sm text-muted-foreground`},` 預算超支提醒 `,-1)]),L(q($),{"model-value":n.value.budgetAlerts,"onUpdate:modelValue":p[4]||=e=>u(`budgetAlerts`,e),disabled:!n.value.enabled},null,8,[`model-value`,`disabled`])]),L(q(ze)),A(`div`,dt,[A(`div`,ft,[L(q(c),{class:`font-medium`},{default:W(()=>p[21]||=[I(`聲音提醒`,-1)]),_:1,__:[21]}),p[22]||=A(`p`,{class:`text-sm text-muted-foreground`},` 通知時播放聲音 `,-1)]),L(q($),{"model-value":n.value.soundEnabled,"onUpdate:modelValue":p[5]||=e=>u(`soundEnabled`,e),disabled:!n.value.enabled},null,8,[`model-value`,`disabled`])]),A(`div`,pt,[A(`div`,mt,[L(q(c),{class:`font-medium`},{default:W(()=>p[23]||=[I(`震動提醒`,-1)]),_:1,__:[23]}),p[24]||=A(`p`,{class:`text-sm text-muted-foreground`},` 通知時震動（限手機） `,-1)]),L(q($),{"model-value":n.value.vibrationEnabled,"onUpdate:modelValue":p[6]||=e=>u(`vibrationEnabled`,e),disabled:!n.value.enabled},null,8,[`model-value`,`disabled`])])],2)])])):x(``,!0),q(t).hasPermission&&q(t).history.length>0?(V(),F(`div`,ht,[A(`div`,gt,[p[28]||=A(`h4`,{class:`font-medium`},`通知歷史`,-1),A(`div`,_t,[q(t).unreadCount>0?(V(),j(q(y),{key:0,onClick:q(t).markAllAsRead,variant:`outline`,size:`sm`},{default:W(()=>p[26]||=[I(` 全部標為已讀 `,-1)]),_:1,__:[26]},8,[`onClick`])):x(``,!0),L(q(y),{onClick:q(t).clearHistory,variant:`outline`,size:`sm`},{default:W(()=>p[27]||=[I(` 清除歷史 `,-1)]),_:1,__:[27]},8,[`onClick`])])]),L(q(Q),null,{default:W(()=>[L(q(ve),{class:`p-0`},{default:W(()=>[A(`div`,vt,[(V(!0),F(O,null,H(q(t).history.slice(0,10),e=>(V(),F(`div`,{key:e.id,class:J([`flex items-start p-4 border-b last:border-b-0`,{"bg-muted/30":!e.read}])},[A(`div`,yt,[A(`div`,bt,[A(`p`,xt,X(e.title),1),e.read?x(``,!0):(V(),j(q(l),{key:0,variant:`secondary`,class:`text-xs`},{default:W(()=>p[29]||=[I(` 新 `,-1)]),_:1,__:[29]}))]),A(`p`,St,X(e.body),1),A(`p`,Ct,X(f(e.timestamp)),1)]),L(q(y),{onClick:n=>q(t).deleteNotification(e.id),variant:`ghost`,size:`sm`,class:`text-muted-foreground hover:text-destructive`},{default:W(()=>[L(q(m),{class:`h-4 w-4`})]),_:2},1032,[`onClick`])],2))),128))])]),_:1})]),_:1})])):x(``,!0),q(t).isSupported?q(t).isBlocked?(V(),j(q(Ve),{key:3,variant:`destructive`},{default:W(()=>[L(q(d),{class:`h-4 w-4`}),L(q(Ge),null,{default:W(()=>p[32]||=[I(`通知權限被封鎖`,-1)]),_:1,__:[32]}),L(q(Ue),null,{default:W(()=>p[33]||=[I(` 推播通知權限已被封鎖。請到瀏覽器設定中手動開啟此網站的通知權限。 `,-1)]),_:1,__:[33]})]),_:1})):x(``,!0):(V(),j(q(Ve),{key:2,variant:`destructive`},{default:W(()=>[L(q(d),{class:`h-4 w-4`}),L(q(Ge),null,{default:W(()=>p[30]||=[I(`不支援推播通知`,-1)]),_:1,__:[30]}),L(q(Ue),null,{default:W(()=>p[31]||=[I(` 您的瀏覽器或裝置不支援推播通知功能。請使用支援的瀏覽器或更新到最新版本。 `,-1)]),_:1,__:[31]})]),_:1}))]))}}),Tt=wt;const Et={class:`min-h-screen bg-background`},Dt={class:`px-4 pb-20`},Ot={class:`mt-6 space-y-4`},kt={class:`flex items-center justify-between`},At={class:`flex items-center gap-3`},jt={class:`flex h-10 w-10 items-center justify-center rounded-lg bg-brand-accent`},Mt={class:`text-base font-medium text-foreground`},Nt={class:`text-sm text-muted-foreground`},Pt={class:`flex items-center justify-between`},Ft={class:`flex items-center gap-3`},It={class:`flex h-10 w-10 items-center justify-center rounded-lg bg-brand-accent`},Lt={class:`text-base font-medium text-foreground`},Rt={class:`text-sm text-muted-foreground`},zt={class:`flex items-center justify-between`},Bt={class:`flex items-center gap-3`},Vt={class:`flex h-10 w-10 items-center justify-center rounded-lg bg-brand-accent`},Ht={class:`text-base font-medium text-foreground`},Ut={class:`text-sm text-muted-foreground`},Wt={class:`flex items-center gap-2`},Gt={key:0,class:`w-2 h-2 bg-green-500 rounded-full`},Kt={key:1,class:`w-2 h-2 bg-red-500 rounded-full`},qt={key:2,class:`w-2 h-2 bg-yellow-500 rounded-full`},Jt={class:`mt-8`},Yt={class:`mb-4 text-sm font-medium text-muted-foreground`},Xt={class:`flex items-center justify-between`},Zt={class:`flex items-center gap-3`},Qt={class:`text-base font-medium text-foreground`},$t={class:`text-sm text-muted-foreground`},en={class:`space-y-4`},tn={class:`flex items-center gap-3 mb-3`},nn={class:`text-base font-medium text-foreground`},rn={class:`text-sm text-muted-foreground`},an={key:0,class:`ml-auto text-muted-foreground`},on={class:`flex items-center justify-between`},sn={class:`flex items-center gap-3`},cn={class:`text-base font-medium text-foreground`},ln={class:`text-sm text-muted-foreground`},un={class:`px-4 pb-6 overflow-y-auto`},dn={class:`px-4 pb-6 overflow-y-auto`},fn={class:`space-y-2 mb-4`},pn=[`onClick`],mn={class:`flex items-center gap-3`},hn={class:`w-10 h-10 rounded-full bg-muted flex items-center justify-center`},gn=[`src`,`alt`],_n={key:1,class:`text-lg`},vn={class:`font-medium text-foreground`},yn={key:0,class:`text-sm text-muted-foreground`},bn={class:`flex items-center gap-2`},xn={key:0,class:`text-xs bg-brand-primary text-primary-foreground px-2 py-1 rounded`};var Sn=R({__name:`Settings`,setup(a){let{t:s,locale:c}=ie(),l=de(),d=pe(),m=le(),h=me(),v=fe(),b=ue(),S=ae(),C=G(!1),w=G(!1),E=G(!1),M=k(()=>m.user?.email||``);k(()=>m.user);let N=k(()=>b.storedAccounts),P=k(()=>b.currentAccountId),R=async e=>{e&&typeof e==`string`&&(l.setLocale(e),oe.global.locale.value=e,await ce(),c.value=e)},se=()=>{C.value=!0},z=()=>{S.push({name:he.coupleSettings.name})},B=()=>{h.couple=null,h.userProfile=null,h.partnerProfile=null,h.coupleSettings=null,h.userSettings=null,v.expenses=[]},U=async()=>{try{await m.signOut(),B(),S.push({name:he.startup.name}),T.success(s(`settings.logoutSuccess`))}catch(e){console.error(`登出失敗:`,e),T.error(s(`settings.logoutError`))}finally{w.value=!1}},K=async e=>{try{if(e===P.value){E.value=!1;return}let t=await b.switchToAccount(e,S.currentRoute.value.fullPath);t.success?T.info(s(`settings.switchingAccount`)):T.error(t.error||s(`settings.switchAccountError`))}catch(e){console.error(`切換帳號失敗:`,e),T.error(s(`settings.switchAccountError`))}},Y=async()=>{try{let e=await b.addNewAccountWithGoogle(S.currentRoute.value.fullPath);e.success?T.info(s(`settings.addAccountInfo`)):T.error(e.error||s(`settings.addAccountError`))}catch(e){console.error(`新增帳號失敗:`,e),T.error(s(`settings.addAccountError`))}},Z=e=>{if(e===P.value){T.error(s(`settings.cannotRemoveCurrentAccount`));return}b.removeAccount(e),T.success(s(`settings.accountRemoved`))};return(a,c)=>(V(),F(`div`,Et,[L(o,{title:q(s)(`settings.title`)},null,8,[`title`]),A(`main`,Dt,[A(`div`,Ot,[L(q(Q),{class:`p-4`},{default:W(()=>[A(`div`,kt,[A(`div`,At,[A(`div`,jt,[L(q(Me),{class:`h-5 w-5 text-brand-primary`})]),A(`div`,null,[A(`h3`,Mt,X(q(s)(`settings.theme`)),1),A(`p`,Nt,X(q(s)(`settings.themeDesc`)),1)])]),L(Le)])]),_:1}),L(q(Q),{class:`p-4`},{default:W(()=>[A(`div`,Pt,[A(`div`,Ft,[A(`div`,It,[L(q(je),{class:`h-5 w-5 text-brand-primary`})]),A(`div`,null,[A(`h3`,Lt,X(q(s)(`settings.language`)),1),A(`p`,Rt,X(q(s)(`settings.languageDesc`)),1)])]),L(q(i),{defaultValue:q(l).currentLocale,"onUpdate:modelValue":R},{default:W(()=>[L(q(t),{class:`w-32`},{default:W(()=>[L(q(e))]),_:1}),L(q(r),null,{default:W(()=>[(V(!0),F(O,null,H(q(l).availableLocales,e=>(V(),j(q(n),{key:e.value,value:e.value},{default:W(()=>[I(X(e.label),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`defaultValue`])])]),_:1}),L(q(Q),{class:`p-4 cursor-pointer hover:bg-accent transition-colors`,onClick:se},{default:W(()=>[A(`div`,zt,[A(`div`,Bt,[A(`div`,Vt,[L(q(Ae),{class:`h-5 w-5 text-brand-primary`})]),A(`div`,null,[A(`h3`,Ht,X(q(s)(`settings.notifications`)),1),A(`p`,Ut,X(q(d).hasPermission?`已啟用推播通知`:q(d).isBlocked?`通知權限被封鎖`:`點擊設定推播通知`),1)])]),A(`div`,Wt,[q(d).hasPermission?(V(),F(`div`,Gt)):q(d).isBlocked?(V(),F(`div`,Kt)):(V(),F(`div`,qt)),L(q(_),{class:`h-5 w-5 text-muted-foreground`})])])]),_:1}),A(`div`,Jt,[A(`h2`,Yt,X(q(s)(`settings.moreSettings`)),1),L(q(Q),{class:`p-4 mb-3 cursor-pointer hover:bg-accent transition-colors`,onClick:z},{default:W(()=>[A(`div`,Xt,[A(`div`,Zt,[c[6]||=A(`div`,{class:`flex h-10 w-10 items-center justify-center rounded-lg bg-brand-accent`},[A(`span`,{class:`text-lg`},`💑`)],-1),A(`div`,null,[A(`h3`,Qt,X(q(s)(`couple.title`)),1),A(`p`,$t,X(q(s)(`couple.manageSharedExpenses`)),1)])]),L(q(_),{class:`h-5 w-5 text-muted-foreground`})])]),_:1}),L(q(Q),{class:`p-4 mb-3`},{default:W(()=>[A(`div`,en,[A(`div`,tn,[c[7]||=A(`div`,{class:`flex h-10 w-10 items-center justify-center rounded-lg bg-brand-accent`},[A(`span`,{class:`text-lg`},`👤`)],-1),A(`div`,null,[A(`h3`,nn,X(q(s)(`settings.account`)),1),A(`p`,rn,X(M.value),1)])]),L(q(y),{variant:`outline`,class:`w-full justify-start`,onClick:c[0]||=e=>E.value=!0},{default:W(()=>[L(q(Pe),{class:`mr-2 h-4 w-4`}),I(` `+X(q(s)(`settings.switchAccount`))+` `,1),N.value.length>1?(V(),F(`span`,an,X(N.value.length),1)):x(``,!0)]),_:1}),L(q(y),{variant:`outline`,class:`w-full justify-start text-destructive hover:text-destructive`,onClick:c[1]||=e=>w.value=!0},{default:W(()=>[L(q(u),{class:`mr-2 h-4 w-4`}),I(` `+X(q(s)(`settings.logout`)),1)]),_:1})])]),_:1}),L(q(Q),{class:`p-4 cursor-pointer hover:bg-accent transition-colors`},{default:W(()=>[A(`div`,on,[A(`div`,sn,[c[8]||=A(`div`,{class:`flex h-10 w-10 items-center justify-center rounded-lg bg-brand-accent`},[A(`span`,{class:`text-lg`},`ℹ️`)],-1),A(`div`,null,[A(`h3`,cn,X(q(s)(`settings.about`)),1),A(`p`,ln,X(q(s)(`settings.version`)),1)])]),L(q(_),{class:`h-5 w-5 text-muted-foreground`})])]),_:1})])])]),L(q(g),{open:C.value,"onUpdate:open":c[2]||=e=>C.value=e},{default:W(()=>[L(q(re),{class:`max-h-[90vh]`},{default:W(()=>[L(q(_e),null,{default:W(()=>[L(q(ge),null,{default:W(()=>c[9]||=[I(`推播通知設定`,-1)]),_:1,__:[9]})]),_:1}),A(`div`,un,[L(Tt)])]),_:1})]),_:1},8,[`open`]),L(q(ne),{open:w.value,"onUpdate:open":c[4]||=e=>w.value=e},{default:W(()=>[L(q(te),null,{default:W(()=>[L(q(p),null,{default:W(()=>[L(q(f),null,{default:W(()=>[I(X(q(s)(`settings.logoutConfirmTitle`)),1)]),_:1}),L(q(ee),null,{default:W(()=>[I(X(q(s)(`settings.logoutConfirmDesc`)),1)]),_:1})]),_:1}),L(q(ye),null,{default:W(()=>[L(q(y),{variant:`outline`,onClick:c[3]||=e=>w.value=!1},{default:W(()=>[I(X(q(s)(`common.cancel`)),1)]),_:1}),L(q(y),{variant:`destructive`,onClick:U},{default:W(()=>[I(X(q(s)(`settings.confirmLogout`)),1)]),_:1})]),_:1})]),_:1})]),_:1},8,[`open`]),L(q(g),{open:E.value,"onUpdate:open":c[5]||=e=>E.value=e},{default:W(()=>[L(q(re),{class:`max-h-[90vh]`},{default:W(()=>[L(q(_e),null,{default:W(()=>[L(q(ge),null,{default:W(()=>[I(X(q(s)(`settings.manageAccounts`)),1)]),_:1})]),_:1}),A(`div`,dn,[A(`div`,fn,[(V(!0),F(O,null,H(N.value,e=>(V(),F(`div`,{key:e.id,class:J([`flex items-center justify-between p-3 rounded-lg border cursor-pointer hover:bg-accent transition-colors`,e.id===P.value?`border-brand-primary bg-brand-accent`:`border-border`]),onClick:t=>K(e.id)},[A(`div`,mn,[A(`div`,hn,[e.avatarUrl?(V(),F(`img`,{key:0,src:e.avatarUrl,alt:e.name,class:`w-10 h-10 rounded-full`},null,8,gn)):(V(),F(`span`,_n,X(e.email?.charAt(0)?.toUpperCase()||`?`),1))]),A(`div`,null,[A(`p`,vn,X(e.name||e.email),1),e.name?(V(),F(`p`,yn,X(e.email),1)):x(``,!0)])]),A(`div`,bn,[e.id===P.value?(V(),F(`span`,xn,X(q(s)(`settings.current`)),1)):x(``,!0),e.id!==P.value&&N.value.length>1?(V(),j(q(y),{key:1,variant:`ghost`,size:`sm`,onClick:D(t=>Z(e.id),[`stop`])},{default:W(()=>c[10]||=[A(`svg`,{class:`w-4 h-4`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[A(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M6 18L18 6M6 6l12 12`})],-1)]),_:2,__:[10]},1032,[`onClick`])):x(``,!0)])],10,pn))),128))]),L(q(y),{variant:`outline`,class:`w-full`,onClick:Y},{default:W(()=>[c[11]||=A(`svg`,{class:`mr-2 h-4 w-4`,viewBox:`0 0 24 24`},[A(`path`,{d:`M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z`,fill:`#4285F4`}),A(`path`,{d:`M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z`,fill:`#34A853`}),A(`path`,{d:`M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z`,fill:`#FBBC05`}),A(`path`,{d:`M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z`,fill:`#EA4335`})],-1),I(` `+X(q(s)(`settings.addAccountWithGoogle`)),1)]),_:1,__:[11]})])]),_:1})]),_:1},8,[`open`])]))}}),Cn=Sn;export{Cn as default};