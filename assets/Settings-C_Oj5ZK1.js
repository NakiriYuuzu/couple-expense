import{b as e,c as t,d as n,e as r,f as i}from"./SelectValue-BoBfgLwg.js";import{b as a,c as o,d as s}from"./badge-DZxBum43.js";import{x as c}from"./PopperContent-BnGMTRB6.js";import{b as l}from"./Card-B_5NY5d-.js";import{b as u,c as d}from"./TopBar-Cegs0OHU.js";import{b as ee,c as f,d as te,e as ne,f as re}from"./DialogTitle-VRbnv-C7.js";import{b as ie,c as p}from"./DialogFooter-tXEMO-FE.js";import{b as m}from"./Label-BbU9RIJx.js";import{b as ae}from"./Progress-BcOfro9_.js";import{J as h,M as g,_,aA as v,aB as y,aC as b,aE as x,aF as S,aG as C,aI as w,aM as T,aN as oe,aP as E,aR as D,aT as O,aU as k,a_ as A,aa as j,ab as M,ac as se,ae as ce,af as N,ag as P,ah as F,am as I,aq as L,au as R,av as le,aw as z,ay as B,az as V,b as ue,b5 as H,b9 as de,bb as U,bd as W,be as G,bg as K,d as fe,e as pe,f as me,g as he,h as ge,i as _e,j as ve,k as ye,q as be,r as q,s as J,t as Y,v as X,w as Z,x as Q}from"./index-Dkwm6DWF.js";import{b as xe}from"./CardContent-BWSex-LG.js";const Se=L(`bell`,[[`path`,{d:`M10.268 21a2 2 0 0 0 3.464 0`,key:`vwvbt9`}],[`path`,{d:`M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326`,key:`11g9vi`}]]),Ce=L(`languages`,[[`path`,{d:`m5 8 6 6`,key:`1wu5hv`}],[`path`,{d:`m4 14 6-6 2-3`,key:`1k1g8d`}],[`path`,{d:`M2 5h12`,key:`or177f`}],[`path`,{d:`M7 2h1`,key:`1t2jsx`}],[`path`,{d:`m22 22-5-10-5 10`,key:`don7ne`}],[`path`,{d:`M14 18h6`,key:`1m8k6r`}]]),we=L(`moon`,[[`path`,{d:`M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401`,key:`kfwtm`}]]),Te=L(`sun`,[[`circle`,{cx:`12`,cy:`12`,r:`4`,key:`4exip2`}],[`path`,{d:`M12 2v2`,key:`tus03m`}],[`path`,{d:`M12 20v2`,key:`1lh1kg`}],[`path`,{d:`m4.93 4.93 1.41 1.41`,key:`149t6j`}],[`path`,{d:`m17.66 17.66 1.41 1.41`,key:`ptbguv`}],[`path`,{d:`M2 12h2`,key:`1t8f8n`}],[`path`,{d:`M20 12h2`,key:`1q8mjw`}],[`path`,{d:`m6.34 17.66-1.41 1.41`,key:`1m8zz5`}],[`path`,{d:`m19.07 4.93-1.41 1.41`,key:`1shlcs`}]]),Ee=L(`user-cog`,[[`path`,{d:`M10 15H6a4 4 0 0 0-4 4v2`,key:`1nfge6`}],[`path`,{d:`m14.305 16.53.923-.382`,key:`1itpsq`}],[`path`,{d:`m15.228 13.852-.923-.383`,key:`eplpkm`}],[`path`,{d:`m16.852 12.228-.383-.923`,key:`13v3q0`}],[`path`,{d:`m16.852 17.772-.383.924`,key:`1i8mnm`}],[`path`,{d:`m19.148 12.228.383-.923`,key:`1q8j1v`}],[`path`,{d:`m19.53 18.696-.382-.924`,key:`vk1qj3`}],[`path`,{d:`m20.772 13.852.924-.383`,key:`n880s0`}],[`path`,{d:`m20.772 16.148.924.383`,key:`1g6xey`}],[`circle`,{cx:`18`,cy:`15`,r:`3`,key:`gjjjvw`}],[`circle`,{cx:`9`,cy:`7`,r:`4`,key:`nufk8`}]]),De=L(`wallet`,[[`path`,{d:`M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1`,key:`18etb6`}],[`path`,{d:`M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4`,key:`xoc0q4`}]]);var Oe=C({__name:`BaseSeparator`,props:{orientation:{type:String,required:!1,default:`horizontal`},decorative:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){let t=e,n=[`horizontal`,`vertical`];function r(e){return n.includes(e)}let i=B(()=>r(t.orientation)?t.orientation:`horizontal`),a=B(()=>i.value===`vertical`?t.orientation:void 0),o=B(()=>t.decorative?{role:`none`}:{"aria-orientation":a.value,role:`separator`});return(e,t)=>(D(),v(U(h),T({as:e.as,"as-child":e.asChild,"data-orientation":i.value},o.value),{default:A(()=>[k(e.$slots,`default`)]),_:3},16,[`as`,`as-child`,`data-orientation`]))}}),ke=Oe,Ae=C({__name:`Separator`,props:{orientation:{type:String,required:!1,default:`horizontal`},decorative:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){let t=e;return(e,n)=>(D(),v(ke,G(w(t)),{default:A(()=>[k(e.$slots,`default`)]),_:3},16))}}),je=Ae;const[Me,Ne]=j(`SwitchRoot`);var Pe=C({__name:`SwitchRoot`,props:{defaultValue:{type:Boolean,required:!1},modelValue:{type:[Boolean,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},value:{type:String,required:!1,default:`on`},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`button`},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:[`update:modelValue`],setup(e,{emit:t}){let n=e,r=t,{disabled:i}=de(n),a=_(n,`modelValue`,r,{defaultValue:n.defaultValue,passive:n.modelValue===void 0});function o(){i.value||(a.value=!a.value)}let{forwardRef:s,currentElement:l}=d(),u=c(l),ee=B(()=>n.id&&l.value?document.querySelector(`[for="${n.id}"]`)?.innerText:void 0);return Ne({modelValue:a,toggleCheck:o,disabled:i}),(e,t)=>(D(),v(U(h),T(e.$attrs,{id:e.id,ref:U(s),role:`switch`,type:e.as===`button`?`button`:void 0,value:e.value,"aria-label":e.$attrs[`aria-label`]||ee.value,"aria-checked":U(a),"aria-required":e.required,"data-state":U(a)?`checked`:`unchecked`,"data-disabled":U(i)?``:void 0,"as-child":e.asChild,as:e.as,disabled:U(i),onClick:o,onKeydown:R(le(o,[`prevent`]),[`enter`])}),{default:A(()=>[k(e.$slots,`default`,{modelValue:U(a)}),U(u)&&e.name?(D(),v(U(p),{key:0,type:`checkbox`,name:e.name,disabled:U(i),required:e.required,value:e.value,checked:!!U(a)},null,8,[`name`,`disabled`,`required`,`value`,`checked`])):y(`v-if`,!0)]),_:3},16,[`id`,`type`,`value`,`aria-label`,`aria-checked`,`aria-required`,`data-state`,`data-disabled`,`as-child`,`as`,`disabled`,`onKeydown`]))}}),Fe=Pe,Ie=C({__name:`SwitchThumb`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`span`}},setup(e){let t=Me();return d(),(e,n)=>(D(),v(U(h),{"data-state":U(t).modelValue?.value?`checked`:`unchecked`,"data-disabled":U(t).disabled.value?``:void 0,"as-child":e.asChild,as:e.as},{default:A(()=>[k(e.$slots,`default`)]),_:3},8,[`data-state`,`data-disabled`,`as-child`,`as`]))}}),Le=Ie,Re=C({__name:`Switch`,props:{defaultValue:{type:Boolean},modelValue:{type:[Boolean,null]},disabled:{type:Boolean},id:{},value:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:[`update:modelValue`],setup(e,{emit:t}){let n=e,r=t,i=X(n,`class`),a=g(i,r);return(e,t)=>(D(),v(U(Fe),T({"data-slot":`switch`},U(a),{class:U(N)(`peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50`,n.class)}),{default:A(t=>[S(U(Le),{"data-slot":`switch-thumb`,class:W(U(N)(`bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0`))},{default:A(()=>[k(e.$slots,`thumb`,G(w(t)))]),_:2},1032,[`class`])]),_:3},16,[`class`]))}}),$=Re,ze=C({__name:`ThemeToggle`,setup(e){let t=fe(),{isDark:n,toggleDark:r}=t;return(e,t)=>(D(),v(U(Q),{variant:`outline`,size:`icon`,onClick:t[0]||=e=>U(r)(),class:`relative`},{default:A(()=>[S(U(Te),{class:`h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0`}),S(U(we),{class:`absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100`}),t[1]||=V(`span`,{class:`sr-only`},`åˆ‡æ›ä¸»é¡Œ`,-1)]),_:1}))}}),Be=ze,Ve=C({__name:`Separator`,props:{orientation:{default:`horizontal`},decorative:{type:Boolean,default:!0},asChild:{type:Boolean},as:{},class:{}},setup(e){let t=e,n=X(t,`class`);return(e,r)=>(D(),v(U(je),T({"data-slot":`separator`},U(n),{class:U(N)(`bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px`,t.class)}),null,16,[`class`]))}}),He=Ve,Ue=C({__name:`Alert`,props:{class:{},variant:{}},setup(e){let t=e;return(n,r)=>(D(),b(`div`,{"data-slot":`alert`,class:W(U(N)(U(Ye)({variant:e.variant}),t.class)),role:`alert`},[k(n.$slots,`default`)],2))}}),We=Ue,Ge=C({__name:`AlertDescription`,props:{class:{}},setup(e){let t=e;return(e,n)=>(D(),b(`div`,{"data-slot":`alert-description`,class:W(U(N)(`text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed`,t.class))},[k(e.$slots,`default`)],2))}}),Ke=Ge,qe=C({__name:`AlertTitle`,props:{class:{}},setup(e){let t=e;return(e,n)=>(D(),b(`div`,{"data-slot":`alert-title`,class:W(U(N)(`col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight`,t.class))},[k(e.$slots,`default`)],2))}}),Je=qe;const Ye=M(`relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current`,{variants:{variant:{default:`bg-card text-card-foreground`,destructive:`text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90`}},defaultVariants:{variant:`default`}}),Xe={class:`space-y-6`},Ze={class:`space-y-4`},Qe={class:`flex items-center justify-between`},$e={class:`space-y-1`},et={class:`text-sm text-muted-foreground`},tt={class:`flex items-center space-x-2`},nt={key:0,class:`space-y-4`},rt={class:`space-y-4`},it={class:`flex items-center justify-between`},at={class:`space-y-1`},ot={class:`flex items-center justify-between`},st={class:`space-y-1`},ct={class:`flex items-center justify-between`},lt={class:`space-y-1`},ut={class:`flex items-center justify-between`},dt={class:`space-y-1`},ft={class:`flex items-center justify-between`},pt={class:`space-y-1`},mt={class:`flex items-center justify-between`},ht={class:`space-y-1`},gt={class:`flex items-center justify-between`},_t={class:`space-y-1`},vt={key:1,class:`space-y-4`},yt={class:`flex items-center justify-between`},bt={class:`space-x-2`},xt={class:`max-h-60 overflow-y-auto`},St={class:`flex-1 space-y-1`},Ct={class:`flex items-center space-x-2`},wt={class:`font-medium text-sm`},Tt={class:`text-sm text-muted-foreground`},Et={class:`text-xs text-muted-foreground`};var Dt=C({__name:`NotificationSettings`,setup(e){let t=ve(),n=H({...t.settings}),r=B(()=>{switch(t.permissionStatus){case`granted`:return`å·²æŽˆæ¬ŠæŽ¨æ’­é€šçŸ¥æ¬Šé™`;case`denied`:return`æŽ¨æ’­é€šçŸ¥æ¬Šé™è¢«æ‹’çµ•`;case`default`:return`å°šæœªæŽˆæ¬ŠæŽ¨æ’­é€šçŸ¥æ¬Šé™`;default:return`æœªçŸ¥æ¬Šé™ç‹€æ…‹`}}),i=B(()=>{switch(t.permissionStatus){case`granted`:return`default`;case`denied`:return`destructive`;case`default`:return`secondary`;default:return`outline`}}),o=B(()=>{switch(t.permissionStatus){case`granted`:return`å·²æŽˆæ¬Š`;case`denied`:return`è¢«æ‹’çµ•`;case`default`:return`æœªæŽˆæ¬Š`;default:return`æœªçŸ¥`}}),c=async()=>{let e=await t.requestPermission();if(e)try{t.setupDailyNotifications(),t.setupWeeklyNotifications(),P.success(`æŽ¨æ’­é€šçŸ¥å·²å•Ÿç”¨ï¼æ¯æ—¥ç¸½çµå’Œé€±å ±å·²è¨­å®šå®Œæˆã€‚`)}catch(e){console.error(`è¨­å®šé€šçŸ¥æŽ’ç¨‹å¤±æ•—:`,e),P.success(`æŽ¨æ’­é€šçŸ¥å·²å•Ÿç”¨ï¼`)}},u=async()=>{await t.testNotification(),P.success(`æ¸¬è©¦é€šçŸ¥å·²ç™¼é€ï¼`)},d=async(e,r)=>{await t.updateSettings({[e]:r}),n.value[e]=r},ee=e=>new Intl.DateTimeFormat(`zh-TW`,{month:`short`,day:`numeric`,hour:`2-digit`,minute:`2-digit`}).format(new Date(e));return E(async()=>{if(await t.initialize(),t.hasPermission)try{t.setupDailyNotifications(),t.setupWeeklyNotifications(),setInterval(async()=>{await t.validateAndUpdateToken()},3600*1e3)}catch(e){console.error(`è¨­å®šé€šçŸ¥æŽ’ç¨‹å¤±æ•—:`,e)}n.value={...t.settings}}),(e,f)=>(D(),b(`div`,Xe,[V(`div`,Ze,[f[10]||=V(`h3`,{class:`text-lg font-semibold`},`æŽ¨æ’­é€šçŸ¥è¨­å®š`,-1),S(U(l),null,{default:A(()=>[S(U(xe),{class:`pt-6`},{default:A(()=>[V(`div`,Qe,[V(`div`,$e,[f[7]||=V(`p`,{class:`font-medium`},`é€šçŸ¥æ¬Šé™`,-1),V(`p`,et,K(r.value),1)]),V(`div`,tt,[S(U(a),{variant:i.value},{default:A(()=>[x(K(o.value),1)]),_:1},8,[`variant`]),U(t).canRequestPermission?(D(),v(U(Q),{key:0,onClick:c,loading:U(t).isLoading,size:`sm`},{default:A(()=>[...f[8]||=[x(` å•Ÿç”¨é€šçŸ¥ `,-1)]]),_:1},8,[`loading`])):U(t).hasPermission?(D(),v(U(Q),{key:1,onClick:u,variant:`outline`,size:`sm`},{default:A(()=>[...f[9]||=[x(` æ¸¬è©¦é€šçŸ¥ `,-1)]]),_:1})):y(``,!0)])])]),_:1})]),_:1})]),U(t).hasPermission?(D(),b(`div`,nt,[f[25]||=V(`h4`,{class:`font-medium`},`é€šçŸ¥é¡žåž‹`,-1),V(`div`,rt,[V(`div`,it,[V(`div`,at,[S(U(m),{class:`font-medium`},{default:A(()=>[...f[11]||=[x(`å•Ÿç”¨æŽ¨æ’­é€šçŸ¥`,-1)]]),_:1}),f[12]||=V(`p`,{class:`text-sm text-muted-foreground`},` æŽ¥æ”¶æ‰€æœ‰æŽ¨æ’­é€šçŸ¥ `,-1)]),S(U($),{"model-value":n.value.enabled,"onUpdate:modelValue":f[0]||=e=>d(`enabled`,e)},null,8,[`model-value`])]),S(U(He)),V(`div`,{class:W([`space-y-4`,{"opacity-50":!n.value.enabled}])},[V(`div`,ot,[V(`div`,st,[S(U(m),{class:`font-medium`},{default:A(()=>[...f[13]||=[x(`æ”¯å‡ºæé†’`,-1)]]),_:1}),f[14]||=V(`p`,{class:`text-sm text-muted-foreground`},` é‡è¦æ”¯å‡ºå’Œé ç®—æé†’ `,-1)]),S(U($),{"model-value":n.value.expenseReminders,"onUpdate:modelValue":f[1]||=e=>d(`expenseReminders`,e),disabled:!n.value.enabled},null,8,[`model-value`,`disabled`])]),V(`div`,ct,[V(`div`,lt,[S(U(m),{class:`font-medium`},{default:A(()=>[...f[15]||=[x(`æ¯æ—¥ç¸½çµ`,-1)]]),_:1}),f[16]||=V(`p`,{class:`text-sm text-muted-foreground`},` æ¯æ—¥æ”¯å‡ºç¸½çµå ±å‘Š `,-1)]),S(U($),{"model-value":n.value.dailySummary,"onUpdate:modelValue":f[2]||=e=>d(`dailySummary`,e),disabled:!n.value.enabled},null,8,[`model-value`,`disabled`])]),V(`div`,ut,[V(`div`,dt,[S(U(m),{class:`font-medium`},{default:A(()=>[...f[17]||=[x(`é€±å ±`,-1)]]),_:1}),f[18]||=V(`p`,{class:`text-sm text-muted-foreground`},` æ¯é€±æ”¯å‡ºåˆ†æžå ±å‘Š `,-1)]),S(U($),{"model-value":n.value.weeklyReport,"onUpdate:modelValue":f[3]||=e=>d(`weeklyReport`,e),disabled:!n.value.enabled},null,8,[`model-value`,`disabled`])]),V(`div`,ft,[V(`div`,pt,[S(U(m),{class:`font-medium`},{default:A(()=>[...f[19]||=[x(`é ç®—è­¦å‘Š`,-1)]]),_:1}),f[20]||=V(`p`,{class:`text-sm text-muted-foreground`},` é ç®—è¶…æ”¯æé†’ `,-1)]),S(U($),{"model-value":n.value.budgetAlerts,"onUpdate:modelValue":f[4]||=e=>d(`budgetAlerts`,e),disabled:!n.value.enabled},null,8,[`model-value`,`disabled`])]),S(U(He)),V(`div`,mt,[V(`div`,ht,[S(U(m),{class:`font-medium`},{default:A(()=>[...f[21]||=[x(`è²éŸ³æé†’`,-1)]]),_:1}),f[22]||=V(`p`,{class:`text-sm text-muted-foreground`},` é€šçŸ¥æ™‚æ’­æ”¾è²éŸ³ `,-1)]),S(U($),{"model-value":n.value.soundEnabled,"onUpdate:modelValue":f[5]||=e=>d(`soundEnabled`,e),disabled:!n.value.enabled},null,8,[`model-value`,`disabled`])]),V(`div`,gt,[V(`div`,_t,[S(U(m),{class:`font-medium`},{default:A(()=>[...f[23]||=[x(`éœ‡å‹•æé†’`,-1)]]),_:1}),f[24]||=V(`p`,{class:`text-sm text-muted-foreground`},` é€šçŸ¥æ™‚éœ‡å‹•ï¼ˆé™æ‰‹æ©Ÿï¼‰ `,-1)]),S(U($),{"model-value":n.value.vibrationEnabled,"onUpdate:modelValue":f[6]||=e=>d(`vibrationEnabled`,e),disabled:!n.value.enabled},null,8,[`model-value`,`disabled`])])],2)])])):y(``,!0),U(t).hasPermission&&U(t).history.length>0?(D(),b(`div`,vt,[V(`div`,yt,[f[28]||=V(`h4`,{class:`font-medium`},`é€šçŸ¥æ­·å²`,-1),V(`div`,bt,[U(t).unreadCount>0?(D(),v(U(Q),{key:0,onClick:U(t).markAllAsRead,variant:`outline`,size:`sm`},{default:A(()=>[...f[26]||=[x(` å…¨éƒ¨æ¨™ç‚ºå·²è®€ `,-1)]]),_:1},8,[`onClick`])):y(``,!0),S(U(Q),{onClick:U(t).clearHistory,variant:`outline`,size:`sm`},{default:A(()=>[...f[27]||=[x(` æ¸…é™¤æ­·å² `,-1)]]),_:1},8,[`onClick`])])]),S(U(l),null,{default:A(()=>[S(U(xe),{class:`p-0`},{default:A(()=>[V(`div`,xt,[(D(!0),b(z,null,O(U(t).history.slice(0,10),e=>(D(),b(`div`,{key:e.id,class:W([`flex items-start p-4 border-b last:border-b-0`,{"bg-muted/30":!e.read}])},[V(`div`,St,[V(`div`,Ct,[V(`p`,wt,K(e.title),1),e.read?y(``,!0):(D(),v(U(a),{key:0,variant:`secondary`,class:`text-xs`},{default:A(()=>[...f[29]||=[x(` æ–° `,-1)]]),_:1}))]),V(`p`,Tt,K(e.body),1),V(`p`,Et,K(ee(e.timestamp)),1)]),S(U(Q),{onClick:n=>U(t).deleteNotification(e.id),variant:`ghost`,size:`sm`,class:`text-muted-foreground hover:text-destructive`},{default:A(()=>[S(U(F),{class:`h-4 w-4`})]),_:1},8,[`onClick`])],2))),128))])]),_:1})]),_:1})])):y(``,!0),U(t).isSupported?U(t).isBlocked?(D(),v(U(We),{key:3,variant:`destructive`},{default:A(()=>[S(U(s),{class:`h-4 w-4`}),S(U(Je),null,{default:A(()=>[...f[32]||=[x(`é€šçŸ¥æ¬Šé™è¢«å°éŽ–`,-1)]]),_:1}),S(U(Ke),null,{default:A(()=>[...f[33]||=[x(` æŽ¨æ’­é€šçŸ¥æ¬Šé™å·²è¢«å°éŽ–ã€‚è«‹åˆ°ç€è¦½å™¨è¨­å®šä¸­æ‰‹å‹•é–‹å•Ÿæ­¤ç¶²ç«™çš„é€šçŸ¥æ¬Šé™ã€‚ `,-1)]]),_:1})]),_:1})):y(``,!0):(D(),v(U(We),{key:2,variant:`destructive`},{default:A(()=>[S(U(s),{class:`h-4 w-4`}),S(U(Je),null,{default:A(()=>[...f[30]||=[x(`ä¸æ”¯æ´æŽ¨æ’­é€šçŸ¥`,-1)]]),_:1}),S(U(Ke),null,{default:A(()=>[...f[31]||=[x(` æ‚¨çš„ç€è¦½å™¨æˆ–è£ç½®ä¸æ”¯æ´æŽ¨æ’­é€šçŸ¥åŠŸèƒ½ã€‚è«‹ä½¿ç”¨æ”¯æ´çš„ç€è¦½å™¨æˆ–æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚ `,-1)]]),_:1})]),_:1}))]))}}),Ot=Dt;const kt={class:`min-h-screen bg-background`},At={class:`px-4 pb-20`},jt={class:`mt-6 space-y-4`},Mt={class:`flex items-center justify-between`},Nt={class:`flex items-center gap-3`},Pt={class:`flex h-10 w-10 items-center justify-center rounded-lg bg-brand-accent`},Ft={class:`text-base font-medium text-foreground`},It={class:`text-sm text-muted-foreground`},Lt={class:`flex items-center justify-between`},Rt={class:`flex items-center gap-3`},zt={class:`flex h-10 w-10 items-center justify-center rounded-lg bg-brand-accent`},Bt={class:`text-base font-medium text-foreground`},Vt={class:`text-sm text-muted-foreground`},Ht={class:`flex items-center justify-between`},Ut={class:`flex items-center gap-3`},Wt={class:`flex h-10 w-10 items-center justify-center rounded-lg bg-brand-accent`},Gt={class:`text-base font-medium text-foreground`},Kt={class:`text-sm text-muted-foreground`},qt={class:`flex items-center gap-2`},Jt={key:0,class:`w-2 h-2 bg-green-500 rounded-full`},Yt={key:1,class:`w-2 h-2 bg-red-500 rounded-full`},Xt={key:2,class:`w-2 h-2 bg-yellow-500 rounded-full`},Zt={class:`flex items-center justify-between`},Qt={class:`flex items-center gap-3`},$t={class:`flex h-10 w-10 items-center justify-center rounded-lg bg-brand-accent`},en={class:`text-base font-medium text-foreground`},tn={class:`text-sm text-muted-foreground`},nn={class:`mt-8`},rn={class:`mb-4 text-sm font-medium text-muted-foreground`},an={class:`flex items-center justify-between`},on={class:`flex items-center gap-3`},sn={class:`text-base font-medium text-foreground`},cn={class:`text-sm text-muted-foreground`},ln={class:`space-y-4`},un={class:`flex items-center gap-3 mb-3`},dn={class:`text-base font-medium text-foreground`},fn={class:`text-sm text-muted-foreground`},pn={key:0,class:`ml-auto text-muted-foreground`},mn={class:`flex items-center justify-between`},hn={class:`flex items-center gap-3`},gn={class:`text-base font-medium text-foreground`},_n={class:`text-sm text-muted-foreground`},vn={class:`px-4 pb-6 overflow-y-auto`},yn={class:`px-4 pb-6 overflow-y-auto`},bn={class:`space-y-2 mb-4`},xn=[`onClick`],Sn={class:`flex items-center gap-3`},Cn={class:`w-10 h-10 rounded-full bg-muted flex items-center justify-center`},wn=[`src`,`alt`],Tn={key:1,class:`text-lg`},En={class:`font-medium text-foreground`},Dn={key:0,class:`text-sm text-muted-foreground`},On={class:`flex items-center gap-2`},kn={key:0,class:`text-xs bg-brand-primary text-primary-foreground px-2 py-1 rounded`},An={class:`px-4 pb-6 space-y-4`},jn={class:`space-y-2`},Mn={class:`flex items-center gap-2`},Nn={class:`text-xs text-muted-foreground`},Pn={key:0,class:`space-y-2`},Fn={class:`flex justify-between text-xs text-muted-foreground`},In={class:`flex gap-2 pt-4`};var Ln=C({__name:`Settings`,setup(a){let{t:s,locale:c}=se(),d=he(),p=ve(),h=pe(),g=ye(),_=_e(),C=me(),w=ce(),T=H(!1),E=H(!1),k=H(null),j=H(!1),M=H(!1),N=B(()=>h.user?.email||``);B(()=>h.user);let F=B(()=>C.storedAccounts),L=B(()=>C.currentAccountId),R=B(()=>{let e=g.personalBudget;return!e||e<=0?0:Math.min(_.personalStats.month/e*100,100)}),de=()=>{k.value=g.personalBudget,E.value=!0},G=async()=>{try{await g.updatePersonalBudget(k.value),P.success(s(`settings.personalBudgetSaved`)),E.value=!1}catch(e){console.error(`å„²å­˜å€‹äººé ç®—å¤±æ•—:`,e),P.error(s(`common.error`))}},fe=async()=>{try{await g.updatePersonalBudget(null),k.value=null,P.success(s(`settings.personalBudgetCleared`)),E.value=!1}catch(e){console.error(`æ¸…é™¤å€‹äººé ç®—å¤±æ•—:`,e),P.error(s(`common.error`))}},X=async e=>{e&&typeof e==`string`&&(d.setLocale(e),ue.global.locale.value=e,await oe(),c.value=e)},xe=()=>{T.value=!0},Te=()=>{w.push({name:ge.coupleSettings.name})},Oe=()=>{g.couple=null,g.userProfile=null,g.partnerProfile=null,g.coupleSettings=null,_.expenses=[]},ke=async()=>{try{await h.signOut(),Oe(),w.push({name:ge.startup.name}),P.success(s(`settings.logoutSuccess`))}catch(e){console.error(`ç™»å‡ºå¤±æ•—:`,e),P.error(s(`settings.logoutError`))}finally{j.value=!1}},Ae=async e=>{try{if(e===L.value){M.value=!1;return}let t=await C.switchToAccount(e,w.currentRoute.value.fullPath);t.success?P.info(s(`settings.switchingAccount`)):P.error(t.error||s(`settings.switchAccountError`))}catch(e){console.error(`åˆ‡æ›å¸³è™Ÿå¤±æ•—:`,e),P.error(s(`settings.switchAccountError`))}},je=async()=>{try{let e=await C.addNewAccountWithGoogle(w.currentRoute.value.fullPath);e.success?P.info(s(`settings.addAccountInfo`)):P.error(e.error||s(`settings.addAccountError`))}catch(e){console.error(`æ–°å¢žå¸³è™Ÿå¤±æ•—:`,e),P.error(s(`settings.addAccountError`))}},Me=e=>{if(e===L.value){P.error(s(`settings.cannotRemoveCurrentAccount`));return}C.removeAccount(e),P.success(s(`settings.accountRemoved`))};return(a,c)=>(D(),b(`div`,kt,[S(u,{title:U(s)(`settings.title`)},null,8,[`title`]),V(`main`,At,[V(`div`,jt,[S(U(l),{class:`p-4`},{default:A(()=>[V(`div`,Mt,[V(`div`,Nt,[V(`div`,Pt,[S(U(we),{class:`h-5 w-5 text-brand-primary`})]),V(`div`,null,[V(`h3`,Ft,K(U(s)(`settings.theme`)),1),V(`p`,It,K(U(s)(`settings.themeDesc`)),1)])]),S(Be)])]),_:1}),S(U(l),{class:`p-4`},{default:A(()=>[V(`div`,Lt,[V(`div`,Rt,[V(`div`,zt,[S(U(Ce),{class:`h-5 w-5 text-brand-primary`})]),V(`div`,null,[V(`h3`,Bt,K(U(s)(`settings.language`)),1),V(`p`,Vt,K(U(s)(`settings.languageDesc`)),1)])]),S(U(i),{defaultValue:U(d).currentLocale,"onUpdate:modelValue":X},{default:A(()=>[S(U(t),{class:`w-32`},{default:A(()=>[S(U(e))]),_:1}),S(U(r),null,{default:A(()=>[(D(!0),b(z,null,O(U(d).availableLocales,e=>(D(),v(U(n),{key:e.value,value:e.value},{default:A(()=>[x(K(e.label),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`defaultValue`])])]),_:1}),S(U(l),{class:`p-4 cursor-pointer hover:bg-accent transition-colors`,onClick:xe},{default:A(()=>[V(`div`,Ht,[V(`div`,Ut,[V(`div`,Wt,[S(U(Se),{class:`h-5 w-5 text-brand-primary`})]),V(`div`,null,[V(`h3`,Gt,K(U(s)(`settings.notifications`)),1),V(`p`,Kt,K(U(p).hasPermission?`å·²å•Ÿç”¨æŽ¨æ’­é€šçŸ¥`:U(p).isBlocked?`é€šçŸ¥æ¬Šé™è¢«å°éŽ–`:`é»žæ“Šè¨­å®šæŽ¨æ’­é€šçŸ¥`),1)])]),V(`div`,qt,[U(p).hasPermission?(D(),b(`div`,Jt)):U(p).isBlocked?(D(),b(`div`,Yt)):(D(),b(`div`,Xt)),S(U(I),{class:`h-5 w-5 text-muted-foreground`})])])]),_:1}),S(U(l),{class:`p-4 cursor-pointer hover:bg-accent transition-colors`,onClick:de},{default:A(()=>[V(`div`,Zt,[V(`div`,Qt,[V(`div`,$t,[S(U(De),{class:`h-5 w-5 text-brand-primary`})]),V(`div`,null,[V(`h3`,en,K(U(s)(`settings.personalBudget`)),1),V(`p`,tn,K(U(g).personalBudget?`NT$ ${U(g).personalBudget.toLocaleString()}`:U(s)(`settings.personalBudgetNotSet`)),1)])]),S(U(I),{class:`h-5 w-5 text-muted-foreground`})])]),_:1}),V(`div`,nn,[V(`h2`,rn,K(U(s)(`settings.moreSettings`)),1),S(U(l),{class:`p-4 mb-3 cursor-pointer hover:bg-accent transition-colors`,onClick:Te},{default:A(()=>[V(`div`,an,[V(`div`,on,[c[8]||=V(`div`,{class:`flex h-10 w-10 items-center justify-center rounded-lg bg-brand-accent`},[V(`span`,{class:`text-lg`},`ðŸ’‘`)],-1),V(`div`,null,[V(`h3`,sn,K(U(s)(`couple.title`)),1),V(`p`,cn,K(U(s)(`couple.manageSharedExpenses`)),1)])]),S(U(I),{class:`h-5 w-5 text-muted-foreground`})])]),_:1}),S(U(l),{class:`p-4 mb-3`},{default:A(()=>[V(`div`,ln,[V(`div`,un,[c[9]||=V(`div`,{class:`flex h-10 w-10 items-center justify-center rounded-lg bg-brand-accent`},[V(`span`,{class:`text-lg`},`ðŸ‘¤`)],-1),V(`div`,null,[V(`h3`,dn,K(U(s)(`settings.account`)),1),V(`p`,fn,K(N.value),1)])]),S(U(Q),{variant:`outline`,class:`w-full justify-start`,onClick:c[0]||=e=>M.value=!0},{default:A(()=>[S(U(Ee),{class:`mr-2 h-4 w-4`}),x(` `+K(U(s)(`settings.switchAccount`))+` `,1),F.value.length>1?(D(),b(`span`,pn,K(F.value.length),1)):y(``,!0)]),_:1}),S(U(Q),{variant:`outline`,class:`w-full justify-start text-destructive hover:text-destructive`,onClick:c[1]||=e=>j.value=!0},{default:A(()=>[S(U(o),{class:`mr-2 h-4 w-4`}),x(` `+K(U(s)(`settings.logout`)),1)]),_:1})])]),_:1}),S(U(l),{class:`p-4 cursor-pointer hover:bg-accent transition-colors`},{default:A(()=>[V(`div`,mn,[V(`div`,hn,[c[10]||=V(`div`,{class:`flex h-10 w-10 items-center justify-center rounded-lg bg-brand-accent`},[V(`span`,{class:`text-lg`},`â„¹ï¸`)],-1),V(`div`,null,[V(`h3`,gn,K(U(s)(`settings.about`)),1),V(`p`,_n,K(U(s)(`settings.version`)),1)])]),S(U(I),{class:`h-5 w-5 text-muted-foreground`})])]),_:1})])])]),S(U(Z),{open:T.value,"onUpdate:open":c[2]||=e=>T.value=e},{default:A(()=>[S(U(Y),{class:`max-h-[90vh]`},{default:A(()=>[S(U(J),null,{default:A(()=>[S(U(q),null,{default:A(()=>[...c[11]||=[x(`æŽ¨æ’­é€šçŸ¥è¨­å®š`,-1)]]),_:1})]),_:1}),V(`div`,vn,[S(Ot)])]),_:1})]),_:1},8,[`open`]),S(U(re),{open:j.value,"onUpdate:open":c[4]||=e=>j.value=e},{default:A(()=>[S(U(ne),null,{default:A(()=>[S(U(f),null,{default:A(()=>[S(U(ee),null,{default:A(()=>[x(K(U(s)(`settings.logoutConfirmTitle`)),1)]),_:1}),S(U(te),null,{default:A(()=>[x(K(U(s)(`settings.logoutConfirmDesc`)),1)]),_:1})]),_:1}),S(U(ie),null,{default:A(()=>[S(U(Q),{variant:`outline`,onClick:c[3]||=e=>j.value=!1},{default:A(()=>[x(K(U(s)(`common.cancel`)),1)]),_:1}),S(U(Q),{variant:`destructive`,onClick:ke},{default:A(()=>[x(K(U(s)(`settings.confirmLogout`)),1)]),_:1})]),_:1})]),_:1})]),_:1},8,[`open`]),S(U(Z),{open:M.value,"onUpdate:open":c[5]||=e=>M.value=e},{default:A(()=>[S(U(Y),{class:`max-h-[90vh]`},{default:A(()=>[S(U(J),null,{default:A(()=>[S(U(q),null,{default:A(()=>[x(K(U(s)(`settings.manageAccounts`)),1)]),_:1})]),_:1}),V(`div`,yn,[V(`div`,bn,[(D(!0),b(z,null,O(F.value,e=>(D(),b(`div`,{key:e.id,class:W([`flex items-center justify-between p-3 rounded-lg border cursor-pointer hover:bg-accent transition-colors`,e.id===L.value?`border-brand-primary bg-brand-accent`:`border-border`]),onClick:t=>Ae(e.id)},[V(`div`,Sn,[V(`div`,Cn,[e.avatarUrl?(D(),b(`img`,{key:0,src:e.avatarUrl,alt:e.name,class:`w-10 h-10 rounded-full`},null,8,wn)):(D(),b(`span`,Tn,K(e.email?.charAt(0)?.toUpperCase()||`?`),1))]),V(`div`,null,[V(`p`,En,K(e.name||e.email),1),e.name?(D(),b(`p`,Dn,K(e.email),1)):y(``,!0)])]),V(`div`,On,[e.id===L.value?(D(),b(`span`,kn,K(U(s)(`settings.current`)),1)):y(``,!0),e.id!==L.value&&F.value.length>1?(D(),v(U(Q),{key:1,variant:`ghost`,size:`sm`,onClick:le(t=>Me(e.id),[`stop`])},{default:A(()=>[...c[12]||=[V(`svg`,{class:`w-4 h-4`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[V(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M6 18L18 6M6 6l12 12`})],-1)]]),_:1},8,[`onClick`])):y(``,!0)])],10,xn))),128))]),S(U(Q),{variant:`outline`,class:`w-full`,onClick:je},{default:A(()=>[c[13]||=V(`svg`,{class:`mr-2 h-4 w-4`,viewBox:`0 0 24 24`},[V(`path`,{d:`M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z`,fill:`#4285F4`}),V(`path`,{d:`M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z`,fill:`#34A853`}),V(`path`,{d:`M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z`,fill:`#FBBC05`}),V(`path`,{d:`M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z`,fill:`#EA4335`})],-1),x(` `+K(U(s)(`settings.addAccountWithGoogle`)),1)]),_:1})])]),_:1})]),_:1},8,[`open`]),S(U(Z),{open:E.value,"onUpdate:open":c[7]||=e=>E.value=e},{default:A(()=>[S(U(Y),{class:`max-h-[90vh]`},{default:A(()=>[S(U(J),null,{default:A(()=>[S(U(q),null,{default:A(()=>[x(K(U(s)(`settings.personalBudgetTitle`)),1)]),_:1})]),_:1}),V(`div`,An,[V(`div`,jn,[S(U(m),null,{default:A(()=>[x(K(U(s)(`settings.monthlyBudgetAmount`)),1)]),_:1}),V(`div`,Mn,[c[14]||=V(`span`,{class:`text-sm text-muted-foreground`},`NT$`,-1),S(U(be),{modelValue:k.value,"onUpdate:modelValue":c[6]||=e=>k.value=e,modelModifiers:{number:!0},type:`number`,min:`0`,step:`100`,placeholder:U(s)(`settings.enterBudgetAmount`)},null,8,[`modelValue`,`placeholder`])]),V(`p`,Nn,K(U(s)(`settings.personalBudgetDesc`)),1)]),U(g).personalBudget?(D(),b(`div`,Pn,[S(U(m),null,{default:A(()=>[x(K(U(s)(`settings.currentUsage`)),1)]),_:1}),S(U(ae),{"model-value":R.value,class:`h-2`},null,8,[`model-value`]),V(`div`,Fn,[V(`span`,null,`NT$ `+K(U(_).personalStats.month.toLocaleString()),1),V(`span`,null,K(R.value.toFixed(0))+`%`,1)])])):y(``,!0),V(`div`,In,[S(U(Q),{variant:`outline`,class:`flex-1`,onClick:fe},{default:A(()=>[x(K(U(s)(`settings.clearBudget`)),1)]),_:1}),S(U(Q),{class:`flex-1`,onClick:G,disabled:U(g).loading},{default:A(()=>[x(K(U(s)(`common.save`)),1)]),_:1},8,[`disabled`])])])]),_:1})]),_:1},8,[`open`])]))}}),Rn=Ln;export{Rn as default};