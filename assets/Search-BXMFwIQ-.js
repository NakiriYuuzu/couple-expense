import{c as e,d as t}from"./VisuallyHidden-BPF3JLnY.js";import{b as n}from"./ExpenseGroup-BUh6gZZu.js";import{b as r,c as i}from"./TopBar-DUw4tseo.js";import{b as a,d as o}from"./usePullToRefresh-BK7dh9gb.js";import{b as s}from"./VisuallyHiddenInput-CcuwT87J.js";import{b as c}from"./Label-CwhSjOJt.js";import{b as l,c as u,d,e as f,f as p}from"./DialogTitle-Ck2Dyjf6.js";import{B as m,D as h,E as g,F as ee,G as te,I as ne,J as re,M as _,O as v,P as y,Q as b,R as x,a$ as S,aA as ie,aG as C,aI as w,aP as T,aT as E,aW as D,aY as O,aZ as k,a_ as A,ao as j,ar as M,au as N,aw as P,az as ae,b0 as F,b2 as I,b3 as L,b4 as R,b9 as z,bc as oe,bd as se,be as B,bg as V,bh as H,bi as ce,bk as le,bm as U,br as W,bt as ue,bu as G,bv as K,bw as q,by as de,bz as J,c as fe,h as pe,j as me,r as he,t as ge,u as _e,v as ve,w as ye,x as Y}from"./index-DaV3G9Q-.js";import{b as be}from"./DialogFooter-CkrDA5yQ.js";function X(e=[],t,n){let r=[...e];return r[n]=t,r.sort((e,t)=>e-t)}function Z(e,n,r){let i=r-n,a=100/i,o=a*(e-n);return t(o,0,100)}function Q(e,t){if(t>2)return`Value ${e+1} of ${t}`;if(t===2)return[`Minimum`,`Maximum`][e]}function xe(e,t){if(e.length===1)return 0;let n=e.map(e=>Math.abs(e-t)),r=Math.min(...n);return n.indexOf(r)}function Se(e,t,n){let r=e/2,i=50,a=Te([0,i],[0,r]);return(r-a(t)*n)*n}function Ce(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function we(e,t){if(t>0){let n=Ce(e),r=Math.min(...n);return r>=t}return!0}function Te(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Ee(e){return(String(e).split(`.`)[1]||``).length}function De(e,t){let n=10**t;return Math.round(e*n)/n}const Oe=[`PageUp`,`PageDown`],ke=[`ArrowUp`,`ArrowDown`,`ArrowLeft`,`ArrowRight`],Ae={"from-left":[`Home`,`PageDown`,`ArrowDown`,`ArrowLeft`],"from-right":[`Home`,`PageDown`,`ArrowDown`,`ArrowRight`],"from-bottom":[`Home`,`PageDown`,`ArrowDown`,`ArrowLeft`],"from-top":[`Home`,`PageUp`,`ArrowUp`,`ArrowLeft`]},[je,Me]=T([`SliderVertical`,`SliderHorizontal`]);var Ne=R({__name:`SliderHorizontal`,props:{dir:{type:String,required:!1},min:{type:Number,required:!0},max:{type:Number,required:!0},inverted:{type:Boolean,required:!0}},emits:[`slideEnd`,`slideStart`,`slideMove`,`homeKeyDown`,`endKeyDown`,`stepKeyDown`],setup(e,{emit:t}){let n=e,r=t,{max:i,min:a,dir:o,inverted:s}=G(n),{forwardRef:c,currentElement:l}=P(),u=$(),d=W(),f=W(),p=O(()=>o?.value!==`rtl`&&!s.value||o?.value!==`ltr`&&s.value);function m(e,t){let n=f.value||l.value.getBoundingClientRect(),r=[...u.thumbElements.value][u.valueIndexToChangeRef.value],o=u.thumbAlignment.value===`contain`?r.clientWidth:0;!d.value&&!t&&u.thumbAlignment.value===`contain`&&(d.value=e.clientX-r.getBoundingClientRect().left);let s=[0,n.width-o],c=p.value?[a.value,i.value]:[i.value,a.value],m=Te(s,c);f.value=n;let h=t?e.clientX-n.left-o/2:e.clientX-n.left-(d.value??0);return m(h)}let h=O(()=>p.value?`left`:`right`),g=O(()=>p.value?`right`:`left`),ee=O(()=>p.value?1:-1);return Me({startEdge:h,endEdge:g,direction:ee,size:`width`}),(e,t)=>(B(),A(Ve,{ref:K(c),dir:K(o),"data-orientation":`horizontal`,style:de({"--reka-slider-thumb-transform":!p.value&&K(u).thumbAlignment.value===`overflow`?`translateX(50%)`:`translateX(-50%)`}),onSlideStart:t[0]||=e=>{let t=m(e,!0);r(`slideStart`,t)},onSlideMove:t[1]||=e=>{let t=m(e);r(`slideMove`,t)},onSlideEnd:t[2]||=()=>{f.value=void 0,d.value=void 0,r(`slideEnd`)},onStepKeyDown:t[3]||=e=>{let t=p.value?`from-left`:`from-right`,n=K(Ae)[t].includes(e.key);r(`stepKeyDown`,e,n?-1:1)},onEndKeyDown:t[4]||=e=>r(`endKeyDown`,e),onHomeKeyDown:t[5]||=e=>r(`homeKeyDown`,e)},{default:U(()=>[H(e.$slots,`default`)]),_:3},8,[`dir`,`style`]))}}),Pe=Ne,Fe=R({__name:`SliderVertical`,props:{min:{type:Number,required:!0},max:{type:Number,required:!0},inverted:{type:Boolean,required:!0}},emits:[`slideEnd`,`slideStart`,`slideMove`,`homeKeyDown`,`endKeyDown`,`stepKeyDown`],setup(e,{emit:t}){let n=e,r=t,{max:i,min:a,inverted:o}=G(n),s=$(),{forwardRef:c,currentElement:l}=P(),u=W(),d=W(),f=O(()=>!o.value);function p(e,t){let n=d.value||l.value.getBoundingClientRect(),r=[...s.thumbElements.value][s.valueIndexToChangeRef.value],o=s.thumbAlignment.value===`contain`?r.clientHeight:0;!u.value&&!t&&s.thumbAlignment.value===`contain`&&(u.value=e.clientY-r.getBoundingClientRect().top);let c=[0,n.height-o],p=f.value?[i.value,a.value]:[a.value,i.value],m=Te(c,p),h=t?e.clientY-n.top-o/2:e.clientY-n.top-(u.value??0);return d.value=n,m(h)}let m=O(()=>f.value?`bottom`:`top`),h=O(()=>f.value?`top`:`bottom`),g=O(()=>f.value?1:-1);return Me({startEdge:m,endEdge:h,direction:g,size:`height`}),(e,t)=>(B(),A(Ve,{ref:K(c),"data-orientation":`vertical`,style:de({"--reka-slider-thumb-transform":!f.value&&K(s).thumbAlignment.value===`overflow`?`translateY(-50%)`:`translateY(50%)`}),onSlideStart:t[0]||=e=>{let t=p(e,!0);r(`slideStart`,t)},onSlideMove:t[1]||=e=>{let t=p(e);r(`slideMove`,t)},onSlideEnd:t[2]||=()=>{d.value=void 0,u.value=void 0,r(`slideEnd`)},onStepKeyDown:t[3]||=e=>{let t=f.value?`from-bottom`:`from-top`,n=K(Ae)[t].includes(e.key);r(`stepKeyDown`,e,n?-1:1)},onEndKeyDown:t[4]||=e=>r(`endKeyDown`,e),onHomeKeyDown:t[5]||=e=>r(`homeKeyDown`,e)},{default:U(()=>[H(e.$slots,`default`)]),_:3},8,[`style`]))}}),Ie=Fe;const[$,Le]=T(`SliderRoot`);var Re=R({inheritAttrs:!1,__name:`SliderRoot`,props:{defaultValue:{type:Array,required:!1,default:()=>[0]},modelValue:{type:[Array,null],required:!1},disabled:{type:Boolean,required:!1,default:!1},orientation:{type:String,required:!1,default:`horizontal`},dir:{type:String,required:!1},inverted:{type:Boolean,required:!1,default:!1},min:{type:Number,required:!1,default:0},max:{type:Number,required:!1,default:100},step:{type:Number,required:!1,default:1},minStepsBetweenThumbs:{type:Number,required:!1,default:0},thumbAlignment:{type:String,required:!1,default:`contain`},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`span`},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:[`update:modelValue`,`valueCommit`],setup(n,{emit:r}){let a=n,o=r,{min:c,max:l,step:u,minStepsBetweenThumbs:d,orientation:f,disabled:p,thumbAlignment:m,dir:h}=G(a),g=ae(h),{forwardRef:ee,currentElement:te}=P(),ne=e(te),{CollectionSlot:re}=i({isProvider:!0}),_=w(a,`modelValue`,o,{defaultValue:a.defaultValue,passive:a.modelValue===void 0}),v=O(()=>Array.isArray(_.value)?[..._.value]:[]),y=W(0),b=W(v.value);function x(e){let t=xe(v.value,e);T(e,t)}function ie(e){T(e,y.value)}function C(){let e=b.value[y.value],t=v.value[y.value],n=t!==e;n&&o(`valueCommit`,ue(v.value))}function T(e,n,{commit:r}={commit:!1}){let i=Ee(u.value),a=De(Math.round((e-c.value)/u.value)*u.value+c.value,i),s=t(a,c.value,l.value),f=X(v.value,s,n);if(we(f,d.value*u.value)){y.value=f.indexOf(s);let e=String(f)!==String(_.value);e&&r&&o(`valueCommit`,f),e&&(E.value[y.value]?.focus(),_.value=f)}}let E=W([]);return Le({modelValue:_,currentModelValue:v,valueIndexToChangeRef:y,thumbElements:E,orientation:f,min:c,max:l,disabled:p,thumbAlignment:m}),(e,t)=>(B(),A(K(re),null,{default:U(()=>[(B(),A(ce(K(f)===`horizontal`?Pe:Ie),z(e.$attrs,{ref:K(ee),"as-child":e.asChild,as:e.as,min:K(c),max:K(l),dir:K(g),inverted:e.inverted,"aria-disabled":K(p),"data-disabled":K(p)?``:void 0,onPointerdown:t[0]||=()=>{K(p)||(b.value=v.value)},onSlideStart:t[1]||=e=>!K(p)&&x(e),onSlideMove:t[2]||=e=>!K(p)&&ie(e),onSlideEnd:t[3]||=e=>!K(p)&&C(),onHomeKeyDown:t[4]||=e=>!K(p)&&T(K(c),0,{commit:!0}),onEndKeyDown:t[5]||=e=>!K(p)&&T(K(l),v.value.length-1,{commit:!0}),onStepKeyDown:t[6]||=(e,t)=>{if(!K(p)){let n=K(Oe).includes(e.key),r=n||e.shiftKey&&K(ke).includes(e.key),i=r?10:1,a=y.value,o=v.value[a],s=K(u)*i*t;T(o+s,a,{commit:!0})}}}),{default:U(()=>[H(e.$slots,`default`,{modelValue:K(_)}),K(ne)&&e.name?(B(),A(K(s),{key:0,type:`number`,value:K(_),name:e.name,required:e.required,disabled:K(p),step:K(u)},null,8,[`value`,`name`,`required`,`disabled`,`step`])):S(`v-if`,!0)]),_:3},16,[`as-child`,`as`,`min`,`max`,`dir`,`inverted`,`aria-disabled`,`data-disabled`]))]),_:3}))}}),ze=Re,Be=R({__name:`SliderImpl`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`span`}},emits:[`slideStart`,`slideMove`,`slideEnd`,`homeKeyDown`,`endKeyDown`,`stepKeyDown`],setup(e,{emit:t}){let n=e,r=t,i=$();return(e,t)=>(B(),A(K(j),z({"data-slider-impl":``},n,{onKeydown:t[0]||=e=>{e.key===`Home`?(r(`homeKeyDown`,e),e.preventDefault()):e.key===`End`?(r(`endKeyDown`,e),e.preventDefault()):K(Oe).concat(K(ke)).includes(e.key)&&(r(`stepKeyDown`,e),e.preventDefault())},onPointerdown:t[1]||=e=>{let t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),K(i).thumbElements.value.includes(t)?t.focus():r(`slideStart`,e)},onPointermove:t[2]||=e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&r(`slideMove`,e)},onPointerup:t[3]||=e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),r(`slideEnd`,e))}}),{default:U(()=>[H(e.$slots,`default`)]),_:3},16))}}),Ve=Be,He=R({__name:`SliderRange`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`span`}},setup(e){let t=$(),n=je();P();let r=O(()=>t.currentModelValue.value.map(e=>Z(e,t.min.value,t.max.value))),i=O(()=>t.currentModelValue.value.length>1?Math.min(...r.value):0),a=O(()=>100-Math.max(...r.value,0));return(e,r)=>(B(),A(K(j),{"data-disabled":K(t).disabled.value?``:void 0,"data-orientation":K(t).orientation.value,"as-child":e.asChild,as:e.as,style:de({[K(n).startEdge.value]:`${i.value}%`,[K(n).endEdge.value]:`${a.value}%`})},{default:U(()=>[H(e.$slots,`default`)]),_:3},8,[`data-disabled`,`data-orientation`,`as-child`,`as`,`style`]))}}),Ue=He,We=R({inheritAttrs:!1,__name:`SliderThumbImpl`,props:{index:{type:Number,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){let t=e,n=$(),r=je(),{forwardRef:a,currentElement:o}=P(),{CollectionItem:s}=i(),c=O(()=>n.modelValue?.value?.[t.index]),l=O(()=>c.value===void 0?0:Z(c.value,n.min.value??0,n.max.value??100)),u=O(()=>Q(t.index,n.modelValue?.value?.length??0)),d=M(o),f=O(()=>d[r.size].value),p=O(()=>n.thumbAlignment.value===`overflow`||!f.value?0:Se(f.value,l.value,r.direction.value)),m=C();return oe(()=>{n.thumbElements.value.push(o.value)}),se(()=>{let e=n.thumbElements.value.findIndex(e=>e===o.value)??-1;n.thumbElements.value.splice(e,1)}),(e,t)=>(B(),A(K(s),null,{default:U(()=>[L(K(j),z(e.$attrs,{ref:K(a),role:`slider`,tabindex:K(n).disabled.value?void 0:0,"aria-label":e.$attrs[`aria-label`]||u.value,"data-disabled":K(n).disabled.value?``:void 0,"data-orientation":K(n).orientation.value,"aria-valuenow":c.value,"aria-valuemin":K(n).min.value,"aria-valuemax":K(n).max.value,"aria-orientation":K(n).orientation.value,"as-child":e.asChild,as:e.as,style:{transform:`var(--reka-slider-thumb-transform)`,position:`absolute`,[K(r).startEdge.value]:`calc(${l.value}% + ${p.value}px)`,display:!K(m)&&c.value===void 0?`none`:void 0},onFocus:t[0]||=()=>{K(n).valueIndexToChangeRef.value=e.index}}),{default:U(()=>[H(e.$slots,`default`)]),_:3},16,[`tabindex`,`aria-label`,`data-disabled`,`data-orientation`,`aria-valuenow`,`aria-valuemin`,`aria-valuemax`,`aria-orientation`,`as-child`,`as`,`style`])]),_:3}))}}),Ge=We,Ke=R({__name:`SliderThumb`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`span`}},setup(e){let t=e,{getItems:n}=i(),{forwardRef:r,currentElement:a}=P(),o=O(()=>a.value?n(!0).findIndex(e=>e.ref===a.value):-1);return(e,n)=>(B(),A(Ge,z({ref:K(r)},t,{index:o.value}),{default:U(()=>[H(e.$slots,`default`)]),_:3},16,[`index`]))}}),qe=Ke,Je=R({__name:`SliderTrack`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`span`}},setup(e){let t=$();return P(),(e,n)=>(B(),A(K(j),{"as-child":e.asChild,as:e.as,"data-disabled":K(t).disabled.value?``:void 0,"data-orientation":K(t).orientation.value},{default:U(()=>[H(e.$slots,`default`)]),_:3},8,[`as-child`,`as`,`data-disabled`,`data-orientation`]))}}),Ye=Je;const Xe=y(`sliders-horizontal`,[[`line`,{x1:`21`,x2:`14`,y1:`4`,y2:`4`,key:`obuewd`}],[`line`,{x1:`10`,x2:`3`,y1:`4`,y2:`4`,key:`1q6298`}],[`line`,{x1:`21`,x2:`12`,y1:`12`,y2:`12`,key:`1iu8h1`}],[`line`,{x1:`8`,x2:`3`,y1:`12`,y2:`12`,key:`ntss68`}],[`line`,{x1:`21`,x2:`16`,y1:`20`,y2:`20`,key:`14d8ph`}],[`line`,{x1:`12`,x2:`3`,y1:`20`,y2:`20`,key:`m0wm8r`}],[`line`,{x1:`14`,x2:`14`,y1:`2`,y2:`6`,key:`14e1ph`}],[`line`,{x1:`8`,x2:`8`,y1:`10`,y2:`14`,key:`1i6ji0`}],[`line`,{x1:`16`,x2:`16`,y1:`18`,y2:`22`,key:`1lctlv`}]]);var Ze=R({__name:`Slider`,props:{defaultValue:{},modelValue:{},disabled:{type:Boolean},orientation:{},dir:{},inverted:{type:Boolean},min:{},max:{},step:{},minStepsBetweenThumbs:{},thumbAlignment:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:[`update:modelValue`,`valueCommit`],setup(e,{emit:t}){let n=e,r=t,i=m(n,`class`),a=N(i,r);return(e,t)=>(B(),A(K(ze),z({"data-slot":`slider`,class:K(x)(`relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col`,n.class)},K(a)),{default:U(({modelValue:e})=>[L(K(Ye),{"data-slot":`slider-track`,class:`bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5`},{default:U(()=>[L(K(Ue),{"data-slot":`slider-range`,class:`bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full`})]),_:1}),(B(!0),F(D,null,V(e,(e,t)=>(B(),A(K(qe),{key:t,"data-slot":`slider-thumb`,class:`border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50`}))),128))]),_:1},16,[`class`]))}}),Qe=Ze;const $e={class:`min-h-screen bg-background`},et={class:`sticky top-[64px] z-40 bg-background px-4 py-4 shadow-sm`},tt={class:`flex gap-2`},nt={class:`flex-1 relative`},rt={class:`px-4 pb-24`},it={key:0,class:`mt-6 space-y-4 animate-fade-in-up`},at={key:1,class:`flex flex-col items-center justify-center mt-20`},ot={class:`text-muted-foreground text-center`},st={class:`grid gap-4 py-4`},ct={class:`space-y-2`},lt={class:`grid grid-cols-2 gap-2`},ut={class:`space-y-2`},dt={class:`grid grid-cols-3 gap-3`},ft=[`onClick`],pt={class:`text-xs font-medium text-foreground`},mt={class:`space-y-3`},ht={class:`grid grid-cols-2 gap-2`},gt={class:`px-2 pt-2`},_t={class:`flex justify-between text-xs text-muted-foreground`},vt={class:`grid gap-4 py-4`},yt={class:`space-y-2`},bt={class:`space-y-2`},xt={class:`space-y-2`},St={class:`grid grid-cols-3 gap-3`},Ct=[`onClick`],wt={class:`text-xs font-medium text-foreground`},Tt={class:`space-y-2`};var Et=R({__name:`Search`,setup(e){let{t}=h(),i=pe(),s=me(),{expenses:m}=i,{isInCouple:y}=he(s),x=W(``),S=W(!1),C=W(),w=W(),T=W(),j=O(()=>[{id:`food`,label:t(`expense.categories.food`),icon:g},{id:`pet`,label:t(`expense.categories.pet`),icon:_},{id:`shopping`,label:t(`expense.categories.shopping`),icon:ee},{id:`transport`,label:t(`expense.categories.transport`),icon:o},{id:`home`,label:t(`expense.categories.home`),icon:re},{id:`other`,label:t(`expense.categories.other`),icon:ne}]),M=W({startDate:null,endDate:null,categories:[],minAmount:``,maxAmount:``}),N=W([0,3e3]),P=O(()=>1e4);le(N,e=>{M.value.minAmount=e[0].toString(),M.value.maxAmount=e[1].toString()}),le(()=>[M.value.minAmount,M.value.maxAmount],([e,t])=>{let n=e?parseFloat(e):0,r=t?parseFloat(t):P.value;N.value=[n,r]});let ae=e=>{let t=j.value.find(t=>t.id===e.category);return{id:e.id,title:e.title,amount:`NT ${Math.round(e.amount)}`,category:e.category,icon:t?.icon,user:e.user}},R=O(()=>{let e=[...m];if(x.value){let t=x.value.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(t))}if(M.value.startDate){let t=M.value.startDate.replace(/\//g,`-`);e=e.filter(e=>e.date>=t)}if(M.value.endDate){let t=M.value.endDate.replace(/\//g,`-`);e=e.filter(e=>e.date<=t)}if(M.value.categories.length>0&&(e=e.filter(e=>M.value.categories.includes(e.category))),M.value.minAmount){let t=parseFloat(M.value.minAmount);e=e.filter(e=>e.amount>=t)}if(M.value.maxAmount){let t=parseFloat(M.value.maxAmount);e=e.filter(e=>e.amount<=t)}return e}),z=O(()=>{let e={};return R.value.forEach(t=>{let n=t.date.replace(/-/g,`/`);e[n]||(e[n]=[]),e[n].push(ae(t))}),Object.entries(e).map(([e,t])=>({date:e,expenses:t})).sort((e,t)=>t.date.localeCompare(e.date))}),oe=()=>{},se=e=>{let t=new Date(e);return`${t.getFullYear()}/${String(t.getMonth()+1).padStart(2,`0`)}/${String(t.getDate()).padStart(2,`0`)}`},H=e=>{e&&(M.value.startDate=`${e.year}/${String(e.month).padStart(2,`0`)}/${String(e.day).padStart(2,`0`)}`)},ue=e=>{e&&(M.value.endDate=`${e.year}/${String(e.month).padStart(2,`0`)}/${String(e.day).padStart(2,`0`)}`)},G=e=>{let t=M.value.categories.indexOf(e);t>-1?M.value.categories.splice(t,1):M.value.categories.push(e)},de=()=>{M.value={startDate:null,endDate:null,categories:[],minAmount:``,maxAmount:``},C.value=void 0,w.value=void 0,N.value=[0,P.value]},fe=()=>{S.value=!1},X=W(!1),Z=W(null),Q=W({title:``,amount:0,category:`food`,date:``}),xe=e=>{let t=m.find(t=>t.id===e.id);if(t){Q.value={title:t.title,amount:t.amount,category:t.category,date:t.date.replace(/-/g,`/`)};let e=t.date.split(`-`);T.value=ie(`${e[0]}-${e[1]}-${e[2]}`),Z.value=t,X.value=!0}},Se=e=>{e&&(Q.value.date=`${e.year}/${String(e.month).padStart(2,`0`)}/${String(e.day).padStart(2,`0`)}`)},Ce=e=>e||t(`home.selectDate`),we=async()=>{if(Z.value)try{let e=Q.value.date.replace(/\//g,`-`);await i.updateExpense(Z.value.id,{title:Q.value.title,amount:Math.round(Q.value.amount),category:Q.value.category,date:e}),X.value=!1,Z.value=null}catch(e){console.error(`更新費用失敗:`,e)}},Te=()=>{X.value=!1,Z.value=null};return a({onRefresh:async()=>{try{await i.fetchExpenses(),E.success(`資料已更新`)}catch(e){console.error(`刷新失敗:`,e),E.error(`刷新失敗，請稍後重試`)}}}),(e,i)=>(B(),F(`div`,$e,[L(r,{title:K(t)(`search.title`)},null,8,[`title`]),k(`div`,et,[k(`div`,tt,[k(`div`,nt,[L(K(te),{class:`absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground`}),L(K(Y),{modelValue:x.value,"onUpdate:modelValue":i[0]||=e=>x.value=e,type:`text`,placeholder:K(t)(`search.searchTransaction`),class:`pl-10 pr-4 h-12`,onInput:oe},null,8,[`modelValue`,`placeholder`])]),L(K(b),{variant:`outline`,size:`icon`,class:`h-12 w-12`,onClick:i[1]||=e=>S.value=!0},{default:U(()=>[L(K(Xe),{class:`h-5 w-5`})]),_:1})])]),k(`main`,rt,[R.value.length>0?(B(),F(`div`,it,[(B(!0),F(D,null,V(z.value,e=>(B(),A(n,{key:e.date,date:e.date,expenses:e.expenses,"show-user":K(y),onExpenseClick:xe},null,8,[`date`,`expenses`,`show-user`]))),128))])):(B(),F(`div`,at,[L(K(te),{class:`h-12 w-12 text-muted-foreground mb-4`}),k(`p`,ot,J(x.value?K(t)(`search.noResultsFound`):K(t)(`search.enterKeywordToSearch`)),1)]))]),L(K(p),{open:S.value,"onUpdate:open":i[7]||=e=>S.value=e},{default:U(()=>[L(K(f),{class:`sm:max-w-md`},{default:U(()=>[L(K(u),null,{default:U(()=>[L(K(l),null,{default:U(()=>[I(J(K(t)(`search.filterConditions`)),1)]),_:1}),L(K(d),null,{default:U(()=>[I(J(K(t)(`search.setFilterDesc`)),1)]),_:1})]),_:1}),k(`div`,st,[k(`div`,ct,[L(K(c),null,{default:U(()=>[I(J(K(t)(`search.dateRange`)),1)]),_:1}),k(`div`,lt,[k(`div`,null,[L(K(ye),null,{default:U(()=>[L(K(_e),{asChild:``},{default:U(()=>[L(K(b),{variant:`outline`,class:`w-full justify-start text-left font-normal`},{default:U(()=>[L(K(v),{class:`mr-2 h-4 w-4`}),I(` `+J(M.value.startDate?se(M.value.startDate):K(t)(`search.startDate`)),1)]),_:1})]),_:1}),L(K(ve),{class:`w-auto p-0`,align:`start`},{default:U(()=>[L(K(ge),{modelValue:C.value,"onUpdate:modelValue":[i[2]||=e=>C.value=e,H]},null,8,[`modelValue`])]),_:1})]),_:1})]),k(`div`,null,[L(K(ye),null,{default:U(()=>[L(K(_e),{asChild:``},{default:U(()=>[L(K(b),{variant:`outline`,class:`w-full justify-start text-left font-normal`},{default:U(()=>[L(K(v),{class:`mr-2 h-4 w-4`}),I(` `+J(M.value.endDate?se(M.value.endDate):K(t)(`search.endDate`)),1)]),_:1})]),_:1}),L(K(ve),{class:`w-auto p-0`,align:`start`},{default:U(()=>[L(K(ge),{modelValue:w.value,"onUpdate:modelValue":[i[3]||=e=>w.value=e,ue]},null,8,[`modelValue`])]),_:1})]),_:1})])])]),k(`div`,ut,[L(K(c),null,{default:U(()=>[I(J(K(t)(`search.category`)),1)]),_:1}),k(`div`,dt,[(B(!0),F(D,null,V(j.value,e=>(B(),F(`button`,{key:e.id,type:`button`,onClick:t=>G(e.id),class:q([`flex flex-col items-center gap-2 p-3 rounded-lg border-2 transition-all duration-200`,M.value.categories.includes(e.id)?`border-brand-primary bg-brand-accent`:`border-border bg-background hover:border-brand-primary hover:bg-brand-accent`])},[k(`div`,{class:q([`flex h-10 w-10 items-center justify-center rounded-lg`,M.value.categories.includes(e.id)?`bg-brand-primary`:`bg-brand-accent`])},[(B(),A(ce(e.icon),{class:q([`h-5 w-5`,M.value.categories.includes(e.id)?`text-brand-primary-foreground`:`text-brand-primary`])},null,8,[`class`]))],2),k(`span`,pt,J(e.label),1)],10,ft))),128))])]),k(`div`,mt,[L(K(c),null,{default:U(()=>[I(J(K(t)(`search.amountRange`)),1)]),_:1}),k(`div`,ht,[L(K(Y),{modelValue:M.value.minAmount,"onUpdate:modelValue":i[4]||=e=>M.value.minAmount=e,type:`number`,placeholder:K(t)(`search.minAmountPlaceholder`),min:`0`},null,8,[`modelValue`,`placeholder`]),L(K(Y),{modelValue:M.value.maxAmount,"onUpdate:modelValue":i[5]||=e=>M.value.maxAmount=e,type:`number`,placeholder:K(t)(`search.maxAmountPlaceholder`),min:`0`},null,8,[`modelValue`,`placeholder`])]),k(`div`,gt,[L(K(Qe),{modelValue:N.value,"onUpdate:modelValue":i[6]||=e=>N.value=e,max:P.value,step:10,class:`mb-2`},null,8,[`modelValue`,`max`]),k(`div`,_t,[k(`span`,null,`NT$ `+J(N.value[0]),1),k(`span`,null,`NT$ `+J(N.value[1]),1)])])])]),L(K(be),null,{default:U(()=>[L(K(b),{variant:`outline`,onClick:de},{default:U(()=>[I(J(K(t)(`search.reset`)),1)]),_:1}),L(K(b),{onClick:fe},{default:U(()=>[I(J(K(t)(`search.applyFilter`)),1)]),_:1})]),_:1})]),_:1})]),_:1},8,[`open`]),L(K(p),{open:X.value,"onUpdate:open":i[11]||=e=>X.value=e},{default:U(()=>[L(K(f),{class:`sm:max-w-md`},{default:U(()=>[L(K(u),null,{default:U(()=>[L(K(l),null,{default:U(()=>[I(J(K(t)(`home.editExpense`)),1)]),_:1}),L(K(d),null,{default:U(()=>[I(J(K(t)(`home.editExpenseDesc`)),1)]),_:1})]),_:1}),k(`div`,vt,[k(`div`,yt,[L(K(c),{for:`edit-title`},{default:U(()=>[I(J(K(t)(`home.title_`)),1)]),_:1}),L(K(Y),{id:`edit-title`,modelValue:Q.value.title,"onUpdate:modelValue":i[8]||=e=>Q.value.title=e,placeholder:K(t)(`home.enterExpenseTitle`)},null,8,[`modelValue`,`placeholder`])]),k(`div`,bt,[L(K(c),{for:`edit-amount`},{default:U(()=>[I(J(K(t)(`home.amount`)),1)]),_:1}),L(K(Y),{id:`edit-amount`,modelValue:Q.value.amount,"onUpdate:modelValue":i[9]||=e=>Q.value.amount=e,type:`number`,min:`0`,step:`1`,placeholder:K(t)(`home.enterAmount`)},null,8,[`modelValue`,`placeholder`])]),k(`div`,xt,[L(K(c),null,{default:U(()=>[I(J(K(t)(`search.category`)),1)]),_:1}),k(`div`,St,[(B(!0),F(D,null,V(j.value,e=>(B(),F(`button`,{key:e.id,type:`button`,onClick:t=>Q.value.category=e.id,class:q([`flex flex-col items-center gap-2 p-3 rounded-lg border-2 transition-all duration-200`,Q.value.category===e.id?`border-brand-primary bg-brand-accent`:`border-border bg-background hover:border-brand-primary hover:bg-brand-accent`])},[k(`div`,{class:q([`flex h-10 w-10 items-center justify-center rounded-lg`,Q.value.category===e.id?`bg-brand-primary`:`bg-brand-accent`])},[(B(),A(ce(e.icon),{class:q([`h-5 w-5`,Q.value.category===e.id?`text-brand-primary-foreground`:`text-brand-primary`])},null,8,[`class`]))],2),k(`span`,wt,J(e.label),1)],10,Ct))),128))])]),k(`div`,Tt,[L(K(c),null,{default:U(()=>[I(J(K(t)(`home.date`)),1)]),_:1}),L(K(ye),null,{default:U(()=>[L(K(_e),{asChild:``},{default:U(()=>[L(K(b),{variant:`outline`,class:`w-full justify-start text-left font-normal`},{default:U(()=>[L(K(v),{class:`mr-2 h-4 w-4`}),I(` `+J(Ce(Q.value.date)),1)]),_:1})]),_:1}),L(K(ve),{class:`w-auto p-0`,align:`start`},{default:U(()=>[L(K(ge),{modelValue:T.value,"onUpdate:modelValue":[i[10]||=e=>T.value=e,Se]},null,8,[`modelValue`])]),_:1})]),_:1})])]),L(K(be),null,{default:U(()=>[L(K(b),{variant:`outline`,onClick:Te},{default:U(()=>[I(J(K(t)(`common.cancel`)),1)]),_:1}),L(K(b),{onClick:we},{default:U(()=>[I(J(K(t)(`common.save`)),1)]),_:1})]),_:1})]),_:1})]),_:1},8,[`open`])]))}}),Dt=fe(Et,[[`__scopeId`,`data-v-a6ba8b81`]]);export{Dt as default};